<HBProfile xsi:noNamespaceSchemaLocation="../Schemas/EchoSchema.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<!-- Original contribution by EchoTiger -->
	<Name>[N-Quest] Highmountain [Echo] ($Rev$)</Name>

	<MinDurability>0.3</MinDurability>
	<MinFreeBagSlots>3</MinFreeBagSlots>

	<SellGrey>true</SellGrey>
	<SellWhite>true</SellWhite>
	<SellGreen>true</SellGreen>
	<SellBlue>true</SellBlue>
	<SellPurple>false</SellPurple>

	<MailGrey>false</MailGrey>
	<MailWhite>true</MailWhite>
	<MailGreen>true</MailGreen>
	<MailBlue>true</MailBlue>
	<MailPurple>true</MailPurple>

	<TargetElites>true</TargetElites>

	<AvoidMobs>
		<Mob Name="Gornoth the Lost" Entry="103656" />
		<Mob Name="Siege Worm" Entry="99214" /> <!-- Instant healing elite -->
	</AvoidMobs>

	<Blackspots>
		<Blackspot X="5677.544" Y="4255.224" Z="695.3536" Radius="12.15873" /> <!-- Large fire that bot can get stuck in -->
		<Blackspot X="4260.577" Y="4463.903" Z="671.5811" Radius="3.730841" /> <!-- Weapon Rack outside of Thundertotem -->
		<Blackspot X="4983.007" Y="3782.136" Z="733.887" Radius="4.976638" /> <!-- Huge rock beside Bluewax Gatekeeper in Candle Rock. -->
		<Blackspot X="5210.68" Y="4908.445" Z="709.0677" Radius="3.262056" /> <!-- Campfire in CLiff's Edge -->
		<Blackspot X="5201.003" Y="4938.592" Z="711.0554" Radius="6.220824" /> <!-- Cage in Cliff's Edge -->

		<Blackspot X="4909.1" Y="3909.448" Z="721.8604" Radius="4" /> <!-- Treasure up on rock in Candle Rock -->
	</Blackspots>

	<Blacklist>
		<Mob Name="Hill Ettin" Id="102886" Flags="Combat" />
	</Blacklist>

	<Mailboxes>
		<Mailbox X="4070.627" Y="4325.143" Z="768.275" /> <!-- Thunder Totem -->
		<Mailbox X="4067.306" Y="4324.686" Z="768.1508" /> <!-- Thunder Totem -->
		<Mailbox X="4853.22" Y="3958.505" Z="832.6034" /> <!-- Skyhorn -->
		<Mailbox Name="Cliff's Edge" X="5215.825" Y="4898.948" Z="710.8175" /> <!-- Cliff's Edge -->
	</Mailboxes>

	<Vendors>
		<Vendor Name="Galica Bravepaw" Type="Repair" Entry="97858" X="4069.965" Y="4410.103" Z="768.1867" />
		<Vendor Name="Lucas Sigmund" Type="Repair" Entry="94100" X="4494.187" Y="4865.437" Z="662.1328" />
		<Vendor Name="Bar'tu Silverstream" Type="Repair" Entry="97869" X="5114.556" Y="4973.081" Z="752.5872" /> <!-- The Witchwood -->
		<Vendor Name="Shale Greyfeather" Type="Repair" Entry="99905" X="4106.347" Y="4405.938" Z="768.1934" /> <!-- Thunder Totem -->
		<Vendor Name="De'tu Frostwing" Type="Repair" Entry="97865" X="4814.677" Y="3915.732" Z="826.8667" /> <!-- Skyhorn -->
		<Vendor Name="Cale Fireheart" Type="Repair" Entry="97876" X="3935.39" Y="3899.267" Z="905.3173" />
		<Vendor Name="Crafty Palu" Type="Repair" Entry="108537" X="6470.426" Y="4746.604" Z="12.73519" /> <!-- Shipwreck Cove -->
		<Vendor Name="Adaleigh Mae Nelson" Type="Food" Entry="108534" X="6455.857" Y="4732.254" Z="13.12072" /> <!-- Shipwreck Cove -->
		<Vendor Name="Darbrul" Type="Repair" Entry="99205" X="5867.962" Y="4547.085" Z="614.298" UsableWhen="IsQuestCompleted(40229)" />
	</Vendors>

<!-- INITORDER COMMENT 
	<InitOrder>
		Perhaps add detection for loading the class hall if player hasn't unlocked this zone yet.
		<CustomBehavior File="Misc\RunLua" Lua="SetCVar('AutoLootDefault', 1)" />

		<CustomBehavior File="EnablePlugin" Names="Anti Drown" />
		<CustomBehavior File="EnablePlugin" Names="Refreshment Detection" />

		<CustomBehavior File="Misc\ProfileCompatibilityInfo" AllowBrokenAddOns="true" AllowBrokenPlugIns="true" />

		<LootMobs Value="true" />
		<TargetingDistance Value="45" /> Use LevelBot default
	</InitOrder>
END INITORDER COMMENT -->

	<QuestOrder>
		<!-- Init Settings -->
			<CustomBehavior File="Misc\RunLua" Lua="SetCVar('AutoLootDefault', 1)" />

			<CustomBehavior File="EnablePlugin" Names="Anti Drown" />
			<CustomBehavior File="EnablePlugin" Names="Refreshment Detection" />

			<CustomBehavior File="Misc\ProfileCompatibilityInfo" AllowBrokenAddOns="true" AllowBrokenPlugIns="true" />

			<LootMobs Value="true" />
			<TargetingDistance Value="45" />
		<!-- END Init Settings -->

		<!-- Profile Settings -->
			<CustomBehavior File="RunCode" Type="Definition">
				<![CDATA[private static System.Windows.Window _uiWindow{get;set;}public static void Initialize(){Settings.Instance.Load();System.Windows.Application.Current.Dispatcher.BeginInvoke((Action)(()=>{var grid=(System.Windows.Controls.Grid)((Honorbuddy.MainWindow)System.Windows.Application.Current.MainWindow).Content;var profileConfigButton=grid.Children.OfType<System.Windows.Controls.Button>().FirstOrDefault(btn=>btn.Name=="btnProfileSettings");if(profileConfigButton!=null)return;profileConfigButton=new System.Windows.Controls.Button{Name="btnProfileSettings",HorizontalAlignment=System.Windows.HorizontalAlignment.Right,VerticalAlignment=System.Windows.VerticalAlignment.Bottom,Margin=new System.Windows.Thickness(0,0,8,86),Content="Profile Config",Height=20,Width=120};grid.Children.Add(profileConfigButton);profileConfigButton.Click+=(sender,args)=>{System.Windows.Application.Current.Dispatcher.BeginInvoke((Action)(()=>{if(_uiWindow!=null){_uiWindow.Close();_uiWindow=null;}Settings.Instance.Load();_uiWindow=UiWindow.GetWindow();_uiWindow.Show();_uiWindow.Closing+=(o,eventArgs)=>{Settings.Instance.Save();};}));};}));Styx.CommonBot.BotEvents.OnBotStopped+=args=>{System.Windows.Application.Current.Dispatcher.BeginInvoke((Action)(()=>{var grid=(System.Windows.Controls.Grid)((Honorbuddy.MainWindow)System.Windows.Application.Current.MainWindow).Content;var profileConfigButton=grid.Children.OfType<System.Windows.Controls.Button>().FirstOrDefault(btn=>btn.Name=="btnProfileSettings");grid.Children.Remove(profileConfigButton);_uiWindow.Close();}));};Styx.CommonBot.TreeRoot.OnShutdownRequested+=(sender,args)=>{System.Windows.Application.Current.Dispatcher.BeginInvoke((Action)(()=>{_uiWindow.Close();}));};}public static class UiWindow{public static System.Windows.Window GetWindow(){var window=new System.Windows.Window{Title="Profile Settings",SizeToContent=System.Windows.SizeToContent.WidthAndHeight,ResizeMode=System.Windows.ResizeMode.NoResize,DataContext=Settings.Instance};var grid=new System.Windows.Controls.Grid{Width=500,Height=550};window.Content=grid;var hbHeaderLogo=new System.Windows.Controls.MediaElement{LoadedBehavior=System.Windows.Controls.MediaState.Play,VerticalAlignment=System.Windows.VerticalAlignment.Top,HorizontalAlignment=System.Windows.HorizontalAlignment.Center};hbHeaderLogo.MediaEnded+=(sender,args)=>{hbHeaderLogo.Position=TimeSpan.FromMilliseconds(1);};grid.Children.Add(hbHeaderLogo);var discordButton=new System.Windows.Controls.Button{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Margin=new System.Windows.Thickness(20,20,0,0),Style=new System.Windows.Style(),Background=System.Windows.Media.Brushes.Transparent,BorderThickness=new System.Windows.Thickness(0),Cursor=System.Windows.Input.Cursors.Hand};discordButton.Click+=(sender,args)=>{Process.Start("http://discord.gg/h74WjFY");};grid.Children.Add(discordButton);var discordImage=new System.Windows.Controls.Image{Height=36,Width=50,Style=new System.Windows.Style()};discordButton.Content=discordImage;var paypalButton=new System.Windows.Controls.Button{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Margin=new System.Windows.Thickness(25,80,0,0),Style=new System.Windows.Style(),Background=System.Windows.Media.Brushes.Transparent,BorderThickness=new System.Windows.Thickness(0),Cursor=System.Windows.Input.Cursors.Hand};paypalButton.Click+=(sender,args)=>{Process.Start("https://www.paypal.me/EchoTiger/");};grid.Children.Add(paypalButton);var paypalImage=new System.Windows.Controls.Image{Height=50,Width=38,Style=new System.Windows.Style()};paypalButton.Content=paypalImage;var tabControl=new System.Windows.Controls.TabControl{Margin=new System.Windows.Thickness(0,150,0,0)};grid.Children.Add(tabControl);var changelogTab=new System.Windows.Controls.TabItem{Header="Changelog",Foreground=new System.Windows.Media.SolidColorBrush(System.Windows.Media.Color.FromRgb(66,189,255))};tabControl.Items.Add(changelogTab);changelogTab.GotFocus+=(sender,args)=>{changelogTab.Foreground=new System.Windows.Media.SolidColorBrush(System.Windows.Media.Color.FromRgb(73,96,210));};changelogTab.LostFocus+=(sender,args)=>{changelogTab.Foreground=new System.Windows.Media.SolidColorBrush(System.Windows.Media.Color.FromRgb(66,189,255));};changelogTab.Focus();var changelogTextBox=new System.Windows.Controls.RichTextBox{Margin=new System.Windows.Thickness(10),VerticalScrollBarVisibility=System.Windows.Controls.ScrollBarVisibility.Auto,IsReadOnly=true,SelectionOpacity=0};changelogTab.Content=changelogTextBox;var generalTab=new System.Windows.Controls.TabItem{Header="General Settings",Foreground=new System.Windows.Media.SolidColorBrush(System.Windows.Media.Color.FromRgb(66,189,255))};tabControl.Items.Add(generalTab);generalTab.GotFocus+=(sender,args)=>{generalTab.Foreground=new System.Windows.Media.SolidColorBrush(System.Windows.Media.Color.FromRgb(73,96,210));};generalTab.LostFocus+=(sender,args)=>{generalTab.Foreground=new System.Windows.Media.SolidColorBrush(System.Windows.Media.Color.FromRgb(66,189,255));};var generalGrid=new System.Windows.Controls.Grid();generalTab.Content=generalGrid;var useAPItemCheckBox=new System.Windows.Controls.CheckBox{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Margin=new System.Windows.Thickness(50,50,0,0),Content="Use Artifact Power Items"};generalGrid.Children.Add(useAPItemCheckBox);useAPItemCheckBox.SetBinding(System.Windows.Controls.CheckBox.IsCheckedProperty,new System.Windows.Data.Binding(nameof(Settings.Instance.UseAPItems)){Source=Settings.Instance});var useCustomAntiStuckCheckBox=new System.Windows.Controls.CheckBox{HorizontalAlignment=System.Windows.HorizontalAlignment.Center,VerticalAlignment=System.Windows.VerticalAlignment.Top,Margin=new System.Windows.Thickness(0,100,20,0),Content="Use Custom Anti-Stuck"};generalGrid.Children.Add(useCustomAntiStuckCheckBox);useCustomAntiStuckCheckBox.SetBinding(System.Windows.Controls.CheckBox.IsCheckedProperty,new System.Windows.Data.Binding(nameof(Settings.Instance.UseCustomAntiStuck)){Source=Settings.Instance});var generalTabLabel=new System.Windows.Controls.Label{HorizontalAlignment=System.Windows.HorizontalAlignment.Center,VerticalAlignment=System.Windows.VerticalAlignment.Bottom,Margin=new System.Windows.Thickness(0,0,0,50),Content="More settings coming soon!"};generalGrid.Children.Add(generalTabLabel);var farmTreasuresCheckBox=new System.Windows.Controls.CheckBox{HorizontalAlignment=System.Windows.HorizontalAlignment.Left,VerticalAlignment=System.Windows.VerticalAlignment.Top,Margin=new System.Windows.Thickness(270,50,0,0),Content="Passively Farm Treasures"};generalGrid.Children.Add(farmTreasuresCheckBox);farmTreasuresCheckBox.SetBinding(System.Windows.Controls.CheckBox.IsCheckedProperty,new System.Windows.Data.Binding(nameof(Settings.Instance.FarmTreasures)){Source=Settings.Instance});Task.WhenAll(LoadChangelogAsync(window,changelogTextBox),LoadDiscordImageAsync(window,discordImage),LoadPaypalImageAsync(window,paypalImage),LoadHBLogoAsync(window,hbHeaderLogo));return window;}private static async Task LoadChangelogAsync(System.Windows.Window window,System.Windows.Controls.RichTextBox changelogTextBox){await window.Dispatcher.BeginInvoke(new Action(async()=>{using(var client=new System.Net.WebClient()){var str=await client.DownloadStringTaskAsync("http://ech-o.net/bForum/changelog");using(var stream=new MemoryStream(System.Text.Encoding.Default.GetBytes(str))){changelogTextBox.Selection.Load(stream,System.Windows.DataFormats.Rtf);}}}));}private static async Task LoadDiscordImageAsync(System.Windows.Window window,System.Windows.Controls.Image imageControl){await window.Dispatcher.BeginInvoke(new Action(async()=>{using(var client=new System.Net.WebClient()){var str=await client.DownloadDataTaskAsync("http://ech-o.net/bForum/discord.png");using(var stream=new MemoryStream(str)){var bitmap=new System.Windows.Media.Imaging.BitmapImage();bitmap.BeginInit();bitmap.StreamSource=stream;bitmap.CacheOption=System.Windows.Media.Imaging.BitmapCacheOption.OnLoad;bitmap.EndInit();bitmap.Freeze();imageControl.Source=bitmap;}}}));}private static async Task LoadPaypalImageAsync(System.Windows.Window window,System.Windows.Controls.Image imageControl){await window.Dispatcher.BeginInvoke(new Action(async()=>{using(var client=new System.Net.WebClient()){var str=await client.DownloadDataTaskAsync("http://ech-o.net/bForum/paypaltrasnp.png");using(var stream=new MemoryStream(str)){var bitmap=new System.Windows.Media.Imaging.BitmapImage();bitmap.BeginInit();bitmap.StreamSource=stream;bitmap.CacheOption=System.Windows.Media.Imaging.BitmapCacheOption.OnLoad;bitmap.EndInit();bitmap.Freeze();imageControl.Source=bitmap;}}}));}private static async Task LoadHBLogoAsync(System.Windows.Window window,System.Windows.Controls.MediaElement mediaElement){await window.Dispatcher.BeginInvoke(new Action(async()=>{var savedImagePath=Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData),"Profile Settings","header.png");if(savedImagePath==null)return;if(File.Exists(savedImagePath)){mediaElement.Source=new Uri(savedImagePath);}else{mediaElement.Source=new Uri("http://ech-o.net/bForum/headerlowres.jpg");var directory=Path.GetDirectoryName(savedImagePath);if(directory==null)return;if(!Directory.Exists(directory)){Directory.CreateDirectory(directory);}using(var client=new System.Net.WebClient()){await client.DownloadFileTaskAsync("http://ech-o.net/bForum/header.png",savedImagePath);if(File.Exists(savedImagePath)){mediaElement.Source=new Uri(savedImagePath);}}}}));}}public class Settings : System.ComponentModel.INotifyPropertyChanged{private readonly string _filePath;private readonly string _jsonLocation;private bool _useAPItems=true;	private bool _useCustomAntiStuck=true;private bool _farmTreasures=false;private Settings(){var hbLocation=Path.GetDirectoryName(System.Reflection.Assembly.GetEntryAssembly().Location);_jsonLocation=Path.Combine(hbLocation,"Newtonsoft.Json.dll");_filePath=Path.Combine(Styx.Helpers.Settings.CharacterSettingsDirectory,"OfficialProfilePackSettings.json");}public bool UseAPItems{get{return _useAPItems;}set{if(value==_useAPItems)return;_useAPItems=value;OnPropertyChanged();}}public bool UseCustomAntiStuck{get{return _useCustomAntiStuck;}set{if(value==_useCustomAntiStuck)return;_useCustomAntiStuck=value;OnPropertyChanged();}}public static Settings Instance{get;private set;}=new Settings();public bool FarmTreasures{get{return _farmTreasures;}set{if(value==_farmTreasures)return;_farmTreasures=value;OnPropertyChanged();}}public event System.ComponentModel.PropertyChangedEventHandler PropertyChanged;public void Load(){try{if(File.Exists(_filePath)){var assembly=AppDomain.CurrentDomain.GetAssemblies().FirstOrDefault(a=>a.FullName.Contains("Newtonsoft.Json"))?? System.Reflection.Assembly.LoadFrom(_jsonLocation);var jsonConvert=assembly.GetTypes().FirstOrDefault(a=>a.FullName=="Newtonsoft.Json.JsonConvert");var json=string.Empty;using(var streamReader=new StreamReader(_filePath)){json=streamReader.ReadToEnd();}var populateObject=jsonConvert.GetMethods().FirstOrDefault(m=>m.Name=="PopulateObject");populateObject.Invoke(null,new object[]{json,Instance});}}catch(Exception ex){Logging.Write(ex.Message);}}private void OnPropertyChanged([System.Runtime.CompilerServices.CallerMemberName] string propertyName=null){PropertyChanged?.Invoke(this,new System.ComponentModel.PropertyChangedEventArgs(propertyName));}public void Save(){try{var assembly=AppDomain.CurrentDomain.GetAssemblies().FirstOrDefault(a=>a.FullName.Contains("Newtonsoft.Json"))?? System.Reflection.Assembly.LoadFrom(_jsonLocation);var jsonConvert=assembly.GetTypes().FirstOrDefault(a=>a.FullName=="Newtonsoft.Json.JsonConvert");var serializeObject=jsonConvert.GetMethods().FirstOrDefault(m=>m.Name=="SerializeObject");var content=(string)serializeObject.Invoke(null,new object[]{this});using(var streamWriter=new StreamWriter(_filePath)){streamWriter.WriteLine(content);}}catch(Exception ex){Logging.Write(ex.Message);}}}]]>
			</CustomBehavior>
			<CustomBehavior File="RunCode"><![CDATA[
					Initialize();
					string settingsLog = $"[ProfileBase]: Settings Activated\n	Use Artifact Power Items :: {Settings.Instance.UseAPItems}\n	Use Custom Anti-Stuck    :: {Settings.Instance.UseCustomAntiStuck}\n 	Passively Farm Treasures :: {Settings.Instance.FarmTreasures}\n\nUse the 'Profile Config' button above the bot's Stop/Start button to change these settings.\n";
					Logging.Write(System.Windows.Media.Colors.DeepSkyBlue, settingsLog);
				]]>
			</CustomBehavior>
		<!-- END Profile Settings -->

		<!-- RunCode Methods -->
			<CustomBehavior File="RunCode" Type="Definition"><![CDATA[
					bool DoQuest(params uint[] questIds)
					{
						foreach (var questId in questIds)
						{
							if (HasQuest(questId) && !IsQuestCompleted(questId)) return true;
						}
						return false;
					}
					bool NeedsQuest(params uint[] questIds)
					{
						foreach (var questId in questIds)
						{
							if (!HasQuest(questId) && !IsQuestCompleted(questId)) return true;
						}
						return false;
					}
					bool NeedsBreadcrumbQuest(params uint[] questIds)
					{
						foreach (var questId in questIds)
						{
							if (IsQuestCompleted(questId)) return false;
						}
						return true;
					}
					bool QuestDone(params uint[] questIds)
					{
						foreach (var questId in questIds)
						{
							if (HasQuest(questId) && IsQuestCompleted(questId)) return true;
						}
						return false;
					}
					bool QuestFlaggedCompleted(params uint[] questIds)
					{
						foreach (var questId in questIds)
						{
							return Lua.GetReturnVal<bool>($"return IsQuestFlaggedCompleted({questId});", 0);
						}
						return false;
					}

					async Task SkipCutscene(int preWait = 3000, int postWait = 3000)
					{
				// Add detection of cutscene here.
						await Coroutine.Sleep(preWait);
				// Test and improve the working method.
						Lua.DoString("MovieFrame:StopMovie(); CinematicFrame_CancelCinematic(); StopCinematic();");
						await Coroutine.Sleep(postWait);
					}
				]]>
			</CustomBehavior>

			<CustomBehavior File="RunCode" Type="Definition"><![CDATA[
					async Task VehicleMove(WoWPoint moveTo)
					{
						if (!StyxWoW.Me.InVehicle) return;
						while (Me.Location.Distance(moveTo) >= 5)
						{
							Navigator.MoveTo(moveTo);
							await CombatAwareness();
							await Coroutine.Yield();
						}
					}

					async Task VehicleKill(uint unitId)
					{
						if (!StyxWoW.Me.InVehicle) return;
						WoWUnit killMe = Unit(unitId, u => u.IsAlive);
						if (killMe == null || Blacklist.Contains(killMe, BlacklistFlags.Combat)) return;

						while (killMe != null && killMe.IsAlive)
						{
							if (Me.Location.Distance(killMe.Location) >= 5)
							{
								Navigator.MoveTo(killMe.Location);
								await CombatAwareness();
								await Coroutine.Yield();
							}

							if (killMe.IsAlive)
							{
								await VehicleCombat(killMe);
								await Coroutine.Yield();
							}
							await Coroutine.Yield();
						}
					}

					async Task VehicleCombat(WoWUnit vehicleKill)
					{
						if (!StyxWoW.Me.InVehicle) return;
						if (vehicleKill.Distance > 5) return;
						if (Me.CurrentTarget != vehicleKill)
						{
							vehicleKill.Target();
						}
						Me.SetFacing(vehicleKill.Location);
						if (Me.ZoneId == 7503)
						{
							Styx.Helpers.KeyboardManager.KeyUpDown((char)System.Windows.Forms.Keys.D2); // For murloc quest mostly.
							SpellManager.ClickRemoteLocation(vehicleKill.Location);
						}
						Styx.Helpers.KeyboardManager.KeyUpDown((char)System.Windows.Forms.Keys.D1);
						await Coroutine.Sleep(1050);
					}

					async Task CombatAwareness()
					{
						if (!StyxWoW.Me.InVehicle) return;
						var killArray = ObjectManager.GetObjectsOfType<WoWUnit>().Where(u => u.IsTargetingMeOrPet && u.Distance <= 5 && u.IsHostile);
						if (killArray == null) return;

						foreach (WoWUnit killMe in killArray)
						{
							while (killMe != null && killMe.IsTargetingMeOrPet && killMe.Distance <= 5)
							{
								await CommonCoroutines.StopMoving();
								StyxWoW.Me.SetFacing(killMe.Location);
								await VehicleCombat(killMe);
								await Coroutine.Yield();
							}
						}
					}

					async Task VehiclePickUp(uint questId, uint unitId, WoWPoint giverSpot)
					{
						if (!StyxWoW.Me.InVehicle) return;
						if (!NeedsQuest(questId)) return;
						Logging.Write(System.Windows.Media.Colors.Yellow, $"[ProfileBase]: Moving to PickUp questId {questId}");
						while (Me.Location.Distance(giverSpot) >= 10)
						{
							Navigator.MoveTo(giverSpot);
							await CombatAwareness();
							await Coroutine.Yield();
						}

						var unitPoi = Unit(unitId);
						if (unitPoi == null) await Coroutine.Wait(10000, () => unitPoi != null);

						while (!HasQuest(questId))
						{
							while (Me.Location.Distance(unitPoi.Location) >= 5)
							{
								Navigator.MoveTo(unitPoi.Location);
								await Coroutine.Yield();
							}

							if (Me.Location.Distance(unitPoi.Location) < 5)
							{
								unitPoi.Interact();
								await Coroutine.Sleep(500);
								Lua.DoString("QuestFrameAcceptButton:Click();");
							}
							await Coroutine.Yield();
						}
					}

					async Task VehicleTurnIn(uint questId, uint unitId, WoWPoint giverSpot)
					{
						if (!StyxWoW.Me.InVehicle) return;
						if (!QuestDone(questId)) return;
						Logging.Write(System.Windows.Media.Colors.Yellow, $"[ProfileBase]: Moving to TurnIn questId {questId}");
						while (Me.Location.Distance(giverSpot) >= 10)
						{
							Navigator.MoveTo(giverSpot);
							await CombatAwareness();
							await Coroutine.Yield();
						}

						var unitPoi = Unit(unitId);
						if (unitPoi == null) await Coroutine.Wait(10000, () => unitPoi != null);

						while (HasQuest(questId))
						{
							while (Me.Location.Distance(unitPoi.Location) >= 5)
							{
								Navigator.MoveTo(unitPoi.Location);
								await Coroutine.Yield();
							}

							if (Me.Location.Distance(unitPoi.Location) < 5)
							{
								unitPoi.Interact();
								await Coroutine.Sleep(500);
								Lua.DoString("QuestInfoRewardsFrameQuestInfoItem1:Click();");
								await Coroutine.Sleep(300);
								Lua.DoString("QuestFrameCompleteQuestButton:Click();");
							}
							await Coroutine.Yield();
						}
					}
				]]>
			</CustomBehavior>			
		<!-- END RunCode Methods -->

		<!-- Anti-stuck hook -->
			<CustomBehavior File="RunCode" Type="Definition"><![CDATA[
				static bool UseAntiStuck = true;

				public static class StuckDetection
				{
					public static Vector3 LastPoint = new Vector3(0f,0f,0f);

					public static bool IsStuck()
					{
						if (!Settings.Instance.UseCustomAntiStuck) return false;
						if (!UseAntiStuck) return false; 
						if (!StyxWoW.Me.IsValid) return false;
						if (StyxWoW.Me.IsDead) return false;
						if (StyxWoW.Me.IsActuallyInCombat) return false;

						var currentPoint = StyxWoW.Me.Location;
						var isStuck = currentPoint.DistanceSqr(LastPoint) < 10f * 10f;
						LastPoint = currentPoint;
						return isStuck;
					}
				}
			]]>
			</CustomBehavior>
			<CustomBehavior File="RunCode" Code="StuckDetection.LastPoint = new Vector3(0f,0f,0f);" /> <!-- Clean out stale data in case the user stop/starts the bot. -->
			<CustomBehavior File="Hooks\DoWhen" ActivityName="DoWhen_StuckDetector" AllowUseWhileMounted="true" LogExecution="false" UseAtInterval="210000" >
				<If Condition="StuckDetection.IsStuck() &amp;&amp; HasItem(140192)" >
					<CustomBehavior File="RunCode"><![CDATA[
						Logging.Write(System.Windows.Media.Colors.DeepSkyBlue, "[ProfileBase]: Stuck detection activated!");
						await CommonCoroutines.StopMoving();
						await CommonCoroutines.LandAndDismount();
						WoWItem dalaranHearthstone = StyxWoW.Me.BagItems.FirstOrDefault(x => x.Entry == 140192);
						if (dalaranHearthstone.CooldownTimeLeft != TimeSpan.Zero) {
							Logging.Write(System.Windows.Media.Colors.DeepSkyBlue, "[ProfileBase]: Awaiting Dalaran Hearthstone cooldown before attempting hearth!");
							await Coroutine.Wait(901000, () => dalaranHearthstone.CooldownTimeLeft == TimeSpan.Zero);
						}
						dalaranHearthstone.Interact();
						await Coroutine.Sleep(11500);
						Logging.Write(System.Windows.Media.Colors.DeepSkyBlue, "[ProfileBase]: Reloading profile.");
						ProfileManager.LoadNew(ProfileManager.XmlLocation);
					]]>
					</CustomBehavior>
				</If>
			</CustomBehavior>
		<!-- END Anti-stuck hook -->

		<!-- Activate Artifact Boost Items Usage -->
			<CustomBehavior File="Hooks\DoWhen" LogExecution="false" AllowExecutionWhileNotAlive="false" ActivityName="UseArtifactBoostItems"
				UseWhen="Settings.Instance.UseAPItems &amp;&amp; (Lua.GetReturnVal&lt;bool&gt;(&quot;return HasArtifactEquipped()&quot;, 0) &amp;&amp; Me.IsAlive &amp;&amp; !Me.Combat) &amp;&amp; 
				(HasItem(141383) || HasItem(138781) || HasItem(138782) || HasItem(141384) || HasItem(141863) || HasItem(141404) || HasItem(141403) || HasItem(141397) || HasItem(141396) || HasItem(141394) || 
				HasItem(141390) || HasItem(141389) || HasItem(141388) || HasItem(141387) || HasItem(141386))" >
				<CustomBehavior File="RunCode" Code="Logging.Write(System.Windows.Media.Colors.Yellow, &quot;[Notification]: Using Artifact Boost Itemss.&quot;);" />
				<While Condition="HasItem(138839) &amp;&amp; (Me.IsAlive &amp;&amp; !Me.Combat)" >
					<!-- <WoWItem Name="Valiant's Glory" Entry="138839" />-->
					<CustomBehavior File="UseItem" ItemId="138839" WaitTime="3100" />
				</While>
				<While Condition="HasItem(141383) &amp;&amp; (Me.IsAlive &amp;&amp; !Me.Combat)" >
					<!-- <WoWItem Name="Crystallized Moon Drop" Entry="141383" /> -->
					<CustomBehavior File="UseItem" ItemId="141383" WaitTime="3100" />
				</While>
				<While Condition="HasItem(138781) &amp;&amp; (Me.IsAlive &amp;&amp; !Me.Combat)" >
					<!-- <WoWItem Name="Brief History of the Aeons" Entry="138781" /> -->
					<CustomBehavior File="UseItem" ItemId="138781" WaitTime="3100" />
				</While>
				<While Condition="HasItem(138782) &amp;&amp; (Me.IsAlive &amp;&amp; !Me.Combat)" >
					<!-- <WoWItem Name="Brief History of the Ages" Entry="138782" /> -->
					<CustomBehavior File="UseItem" ItemId="138782" WaitTime="3100" />
				</While>
				<While Condition="HasItem(141384) &amp;&amp; (Me.IsAlive &amp;&amp; !Me.Combat)" >
					<!-- <WoWItem Name="Emblem of the Dark Covenant" Entry="141384" /> -->
					<CustomBehavior File="UseItem" ItemId="141384" WaitTime="3100" />
				</While>
				<While Condition="HasItem(141405) &amp;&amp; (Me.IsAlive &amp;&amp; !Me.Combat)" >
					<!-- <WoWItem Name="Senegos' Favor" Entry="141405" /> -->
					<CustomBehavior File="UseItem" ItemId="141405" WaitTime="3100" />
				</While>
				<While Condition="HasItem(141863) &amp;&amp; (Me.IsAlive &amp;&amp; !Me.Combat)" >
					<!-- <WoWItem Name="Daglop's Precious" Entry="141863" /> -->
					<CustomBehavior File="UseItem" ItemId="141863" WaitTime="3100" />
				</While>
				<While Condition="HasItem(141404) &amp;&amp; (Me.IsAlive &amp;&amp; !Me.Combat)" >
					<!-- <WoWItem Name="Insignia of the Second Command" Entry="141404" /> -->
					<CustomBehavior File="UseItem" ItemId="141404" WaitTime="3100" />
				</While>
				<While Condition="HasItem(141403) &amp;&amp; (Me.IsAlive &amp;&amp; !Me.Combat)" >
					<!-- <WoWItem Name="Tablet of Tyr" Entry="141403" /> -->
					<CustomBehavior File="UseItem" ItemId="141403" WaitTime="3100" />
				</While>
				<While Condition="HasItem(141397) &amp;&amp; (Me.IsAlive &amp;&amp; !Me.Combat)" >
					<!-- <WoWItem Name="The Spiritwalker's Wisdom" Entry="141397" /> -->
					<CustomBehavior File="UseItem" ItemId="141397" WaitTime="3100" />
				</While>
				<While Condition="HasItem(141396) &amp;&amp; (Me.IsAlive &amp;&amp; !Me.Combat)" >
					<!-- <WoWItem Name="The River's Blessing" Entry="141396" /> -->
					<CustomBehavior File="UseItem" ItemId="141396" WaitTime="3100" />
				</While>
				<While Condition="HasItem(141394) &amp;&amp; (Me.IsAlive &amp;&amp; !Me.Combat)" >
					<!-- <WoWItem Name="Plume of the Great Eagle" Entry="141394" /> -->
					<CustomBehavior File="UseItem" ItemId="141394" WaitTime="3100" />
				</While>
				<While Condition="HasItem(141390) &amp;&amp; (Me.IsAlive &amp;&amp; !Me.Combat)" >
					<!-- <WoWItem Name="The Corruptor's Totem" Entry="141390" /> -->
					<CustomBehavior File="UseItem" ItemId="141390" WaitTime="3100" />
				</While>
				<While Condition="HasItem(141389) &amp;&amp; (Me.IsAlive &amp;&amp; !Me.Combat)" >
					<!-- <WoWItem Name="Stareye Gem" Entry="141389" /> -->
					<CustomBehavior File="UseItem" ItemId="141389" WaitTime="3100" />
				</While>
				<While Condition="HasItem(141388) &amp;&amp; (Me.IsAlive &amp;&amp; !Me.Combat)" >
					<!-- <WoWItem Name="Warden's Boon" Entry="141388" /> -->
					<CustomBehavior File="UseItem" ItemId="141388" WaitTime="3100" />
				</While>
				<While Condition="HasItem(141387) &amp;&amp; (Me.IsAlive &amp;&amp; !Me.Combat)" >
					<!-- <WoWItem Name="Emerald Bloom" Entry="141387" /> -->
					<CustomBehavior File="UseItem" ItemId="141387" WaitTime="3100" />
				</While>
				<While Condition="HasItem(141386) &amp;&amp; (Me.IsAlive &amp;&amp; !Me.Combat)" >
					<!-- <WoWItem Name="Giant Pearl Scepter" Entry="141386" /> -->
					<CustomBehavior File="UseItem" ItemId="141386" WaitTime="3100" />
				</While>
			</CustomBehavior>
		<!-- END Activate Artifact Boost Items Usage -->

		<!-- Profession Items -->
			<!-- <WoWItem Name="Skinning Technique: Unbroken Tooth" Entry="139893" /> -->
			<If Condition="HasItem(139893)" >
				<CustomBehavior File="ForcedDismount" />
				<CustomBehavior File="UseItem" ItemId="139893" WaitTime="1337" />
			</If>

			<!-- <WoWItem Name="Skinning Technique: Unbroken Claw" Entry="139894" /> -->
			<If Condition="HasItem(139894)" >
				<CustomBehavior File="ForcedDismount" />
				<CustomBehavior File="UseItem" ItemId="139894" WaitTime="1337" />
			</If>
		<!-- END Profession Items -->

		<!-- Treasure Farm Hook -->
			<CustomBehavior File="RunCode">
			<![CDATA[
				TreeHooks.Instance.InsertHook("Questbot_Main", 0,
					_treasureHuntComposite ?? (_treasureHuntComposite = new  CommonBehaviors.Actions.ActionRunCoroutine(ctx => TreasureHunt())));	
			]]>
			</CustomBehavior>

			<CustomBehavior File="RunCode" Type="Definition" ><![CDATA[
					List<WoWGuid> treasureBlacklist = new List<WoWGuid>();
					bool TreasureIsLogged = false;
					public Styx.TreeSharp.Composite _treasureHuntComposite;

					public async Task<bool> TreasureHunt()
					{
						if (!Settings.Instance.FarmTreasures) return false;
						if (StyxWoW.Me.IsDead || StyxWoW.Me.IsGhost) return false;
						if (StyxWoW.Me.IsActuallyInCombat) return false;

						var treasurePoi = ObjectManager.GetObjectsOfType<WoWGameObject>().OrderBy(obj => obj.DistanceSqr).FirstOrDefault(obj => !treasureBlacklist.Contains(obj.Guid) && !BlackspotManager.IsBlackspotted(obj.Location) && obj.Name.Contains("Treasure") && obj.CanUse() && obj.DistanceSqr <= 40f*40f);
						if (treasurePoi == null || !treasurePoi.IsValid) return false;

						if (Navigator.LookupPathInfo(treasurePoi).Navigability != PathNavigability.Navigable)
						{
							treasureBlacklist.Add(treasurePoi.Guid);
							Logging.Write(System.Windows.Media.Colors.DeepSkyBlue, $"[ProfileBase]: Treasure detected near us! But we can't navigate to it. Blacklisting it..\n	Name     :: {treasurePoi.Name}\n	Entry    :: {treasurePoi.Entry}\n	Location :: {treasurePoi.Location}");
							return false;
						}
						else if (!TreasureIsLogged)
						{
							bool TreasureIsLogged = true;
							Logging.Write(System.Windows.Media.Colors.DeepSkyBlue, $"[ProfileBase]: Treasure detected near us!\n	Name     :: {treasurePoi.Name}\n	Entry    :: {treasurePoi.Entry}\n	Location :: {treasurePoi.Location}");
						}

						var treasureGuid = treasurePoi.Guid;

						while (treasurePoi != null && treasurePoi.IsValid && Me.IsAlive && !Me.IsActuallyInCombat)
						{
							if (!treasurePoi.WithinInteractRange)
								Navigator.MoveTo(treasurePoi.Location);
							else
							{
								await CommonCoroutines.LandAndDismount();
								await CommonCoroutines.StopMoving();
								treasurePoi.Interact();
								await Coroutine.Wait(2000, () => LootFrame.Instance.IsVisible);
								LootFrame.Instance.LootAll();
								await Coroutine.Wait(2000, () => !LootFrame.Instance.IsVisible);
							}
							await Coroutine.Yield();
						}

						if (treasurePoi == null || !treasurePoi.IsValid)
						{
							TreasureIsLogged = false;
							treasureBlacklist.Add(treasureGuid);
						}

						return true;
					}
			]]>
			</CustomBehavior>
		<!-- END Treasure Farm Hook -->



	<!-- Zone Introductory Quests -->
		<If Condition="QuestDone(39733)" >
			<TurnIn QuestName="The Lone Mountain" QuestId="39733" TurnInName="Warbrave Oro" TurnInId="97666" X="-827.2934" Y="4292.502" Z="746.2735" /> <!-- Breadcrumb from Class Hall -->
		</If>

		<PickUp QuestName="Keepers of the Hammer" QuestId="38907" GiverName="Warbrave Oro" GiverId="97666" X="-827.2934" Y="4292.502" Z="746.2735" />
		<While Condition="DoQuest(38907)" >
			<If Condition="Me.ZoneId == 7502" >
				<MoveTo X="-863.934" Y="4298.434" Z="745.3463" />
				<CustomBehavior File="InteractWith" MobId="96813" NonCompeteDistance="0" X="-863.934" Y="4298.434" Z="745.3467" />
				<CustomBehavior File="Misc\RunLua" Lua="TakeTaxiNode(7);" />
			</If>
			<MoveTo X="4147.644" Y="4373.127" Z="767.992" />
		</While>
		<TurnIn QuestName="Keepers of the Hammer" QuestId="38907" TurnInName="Mayla Highmountain" TurnInId="93826" X="4083.05" Y="4385.5" Z="670.6271" />
	<!-- END Zone Introductory Quests -->

	<!-- Story: The Rivermane Tribe -->
		<PickUp QuestName="The Rivermane Tribe" QuestId="38911" GiverName="Mayla Highmountain" GiverId="93826" X="4083.05" Y="4385.5" Z="670.6271" />
		<TurnIn QuestName="The Rivermane Tribe" QuestId="38911" TurnInName="Jale Rivermane" TurnInId="93833" X="4138.714" Y="4604.009" Z="658.2969" />

		<PickUp QuestName="Ormgul the Pestilent" QuestId="39491" GiverName="Jale Rivermane" GiverId="93833" X="4138.714" Y="4604.009" Z="658.2969" />
		<PickUp QuestName="Poisoned Crops" QuestId="39272" GiverName="Farmer Maya" GiverId="95191" X="4139.162" Y="4600.486" Z="658.074" />
		<PickUp QuestName="Infestation" QuestId="39490" GiverName="Farmer Maya" GiverId="95191" X="4139.162" Y="4600.486" Z="658.074" />

		<CustomBehavior File="InteractWith" MobIds="99433, 99434, 99435, 99436" QuestId="39272" QuestObjectiveIndex="1" >
			<HuntingGrounds>
				<Hotspot X="4177.017" Y="4641.941" Z="652.0767" />
				<Hotspot X="4212.645" Y="4615.779" Z="655.0013" />
				<Hotspot X="4260.76" Y="4635.216" Z="652.7175" />
				<Hotspot X="4314.377" Y="4634.545" Z="652.0786" />
			</HuntingGrounds>
		</CustomBehavior>

		<CustomBehavior File="KillUntilComplete" MobId="95935" QuestId="39491" QuestObjectiveIndex="1" X="4211.044" Y="4697.575" Z="643.8798" />


		<While Condition="DoQuest(39490)" >
			<CustomBehavior File="KillUntilComplete" QuestId="39490" >
				<HuntingGrounds>
					<Hotspot X="4253.641" Y="4673.818" Z="648.2146" />
					<Hotspot X="4272.623" Y="4611.793" Z="652.655" />
					<Hotspot X="4195.535" Y="4614.488" Z="653.7449" />
				</HuntingGrounds>

				<PursuitList>
					<PursueUnit Id="94691" PursueWhen="!IsObjectiveComplete(2, 39490)" />
					<PursueUnit Id="94688" PursueWhen="!IsObjectiveComplete(1, 39490)" />
				</PursuitList>
			</CustomBehavior>
		</While>

		<TurnIn QuestName="Ormgul the Pestilent" QuestId="39491" TurnInName="Jale Rivermane" TurnInId="93833" X="4138.714" Y="4604.009" Z="658.2971" />
		<TurnIn QuestName="Infestation" QuestId="39490" TurnInName="Farmer Maya" TurnInId="95191" X="4139.162" Y="4600.486" Z="658.0746" />
		<TurnIn QuestName="Poisoned Crops" QuestId="39272" TurnInName="Farmer Maya" TurnInId="95191" X="4139.162" Y="4600.486" Z="658.0746" />

		<PickUp QuestName="The Flow of the River" QuestId="39496" GiverName="Jale Rivermane" GiverId="93833" X="4138.714" Y="4604.009" Z="658.2971" />
		<TurnIn QuestName="The Flow of the River" QuestId="39496" TurnInName="Angler Creel" TurnInId="95186" X="4060.99" Y="4781.447" Z="625.9194" />

		<PickUp QuestName="Trapped Tauren" QuestId="39316" GiverName="Angler Creel" GiverId="95186" X="4060.99" Y="4781.447" Z="625.9194" />
		<PickUp QuestName="Fish Out of Water" QuestId="39614" GiverName="Angler Creel" GiverId="95186" X="4060.99" Y="4781.447" Z="625.9194" />
		<PickUp QuestName="Spray and Prey" QuestId="39277" GiverName="Jale Rivermane" GiverId="95956" X="4064.991" Y="4778.116" Z="626.1729" />

		<While Condition="DoQuest(39614)" >
			<CustomBehavior File="RunCode" Code="
				Logging.Write(System.Windows.Media.Colors.Yellow, &quot;[ProfileBase]: Disabling custom anti-stuck measures until this quest is complete.&quot;);
				UseAntiStuck = false;
			" />
			<!-- NOTE: <PerformanceIssue> : Bot must face lake prior to kicking(interacting) with the fish. Add custom code here. -->
			<CustomBehavior File="InteractWith" MobIds="95148" InteractBlacklistTimeInSeconds="10" NumOfTimes="50" QuestId="39614" QuestObjectiveIndex="1" >
				<HuntingGrounds>
					<Hotspot X="4038.536" Y="4775.965" Z="623.6185" />
					<Hotspot X="3985.755" Y="4902.08" Z="624.2513" />
					<Hotspot X="3936.748" Y="4779.066" Z="625.9948" />
					<Hotspot X="3936.509" Y="4943.055" Z="622.6791" />
					<Hotspot X="3904.754" Y="5002.131" Z="627.1608" />
				</HuntingGrounds>
			</CustomBehavior>
			<CustomBehavior File="RunCode" Code="
				Logging.Write(System.Windows.Media.Colors.Yellow, &quot;[ProfileBase]: Re-enabling custom anti-stuck measures.&quot;);
				UseAntiStuck = true;
			" />
		</While>

		<While Condition="DoQuest(39277)" >
			<CustomBehavior File="InteractWith" MobIds="95013, 96124" InteractByUsingItemId="127988" MobState="Alive" Range="5" IgnoreCombat="true" QuestId="39277" QuestObjectiveIndex="1" TerminateWhen="Me.HealthPercent &lt;= 20" >
				<HuntingGrounds>
					<Hotspot X="4038.536" Y="4775.965" Z="623.6185" />
					<Hotspot X="3985.755" Y="4902.08" Z="624.2513" />
					<Hotspot X="3936.748" Y="4779.066" Z="625.9948" />
					<Hotspot X="3936.509" Y="4943.055" Z="622.6791" />
					<Hotspot X="3904.754" Y="5002.131" Z="627.1608" />
				</HuntingGrounds>
			</CustomBehavior>
		</While>

		<If Condition="NeedsQuest(39323)" >
			<MoveTo X="3960.622" Y="4842.78" Z="625.2082" />
			<PickUp QuestName="Moozy's Sojourn" QuestId="39323" GiverName="Rordan Waterwise" GiverId="96083" X="3943.739" Y="4843.707" Z="621.8448" />
		</If>

		<If Condition="!IsQuestCompleted(39274) &amp;&amp; Me.Level &lt; 110" > <!-- Bonus Objective: Defend the Riverlands -->
			<CustomBehavior File="InteractWith" MobState="AliveNotInCombat" InteractByLooting="true" NumOfTimes="150" TerminateWhen="IsQuestCompleted(39274)" >
				<HuntingGrounds>
					<Hotspot X="3941.23" Y="4936.438" Z="622.6931" />
					<Hotspot X="4009.044" Y="4883.389" Z="627.3096" />
					<Hotspot X="3879.027" Y="4866.287" Z="634.6851" />
					<Hotspot X="3873.758" Y="4945.203" Z="637.6177" />
				</HuntingGrounds>
				<PursuitList>
					<PursueUnit Id="99406" PursueWhen="(UNIT.IsAlive || UNIT.Lootable) &amp;&amp; !UNIT.TaggedByOther" />
					<PursueUnit Id="95013" PursueWhen="(UNIT.IsAlive || UNIT.Lootable) &amp;&amp; !UNIT.TaggedByOther" />
					<PursueUnit Id="94687" PursueWhen="(UNIT.IsAlive || UNIT.Lootable) &amp;&amp; !UNIT.TaggedByOther" />
				</PursuitList>
			</CustomBehavior>
		</If>

		<!-- Hatchlings of the Talon Side Quest -->
			<PickUp Nav="Fly" QuestName="Hatchlings of the Talon" QuestId="41094" GiverName="Aviana" GiverId="97925" X="3811.742" Y="5414.195" Z="631.5471" />
			<While Condition="DoQuest(41094)" >
				<CustomBehavior File="InteractWith" MobId="97925" Quest="41094" GossipOptions="1" NonCompeteDistance="0" PreInteractMountStrategy="Dismount" X="3811.76" Y="5414.135" Z="631.6297" TerminateWhen="Me.HasAura(203740) || Me.HasAura(203741)" />
				<CustomBehavior File="RunCode"><![CDATA[
						while (Me.Z > 360 && (Me.HasAura(203740) || Me.HasAura(203741)))
						{
							WoWUnit globePoi = ObjectManager.GetObjectsOfType<WoWUnit>().Where(x => x.Entry == 103076 && x.Z < Me.Z).OrderBy(x => x.Distance).FirstOrDefault();
							while (globePoi != null && globePoi.Z < Me.Z && (Me.HasAura(203740) || Me.HasAura(203741)))
							{
								WoWMovement.ClickToMove(globePoi.Location);
								await Coroutine.Yield();
							}
							await Coroutine.Yield();
						}
					]]>
				</CustomBehavior>
				<CustomBehavior File="MyCTM" X="3660.889" Y="5523.938" Z="305.7928" TerminateWhen="Me.Z &lt; 315" />
			</While>
			<TurnIn Nav="Fly" QuestName="Hatchlings of the Talon" QuestId="41094" TurnInName="Aviana" TurnInId="97925" X="3811.742" Y="5414.195" Z="631.5471" />
		<!-- END Hatchlings of the Talon Side Quest -->

		<While Condition="DoQuest(39316)" >
			<CustomBehavior File="InteractWith" MobId="243368" NonCompeteDistance="0" QuestId="39316" QuestObjectiveIndex="1" X="3987.133" Y="4657.559" Z="642.855" />
		</While>

		<TurnIn QuestName="Moozy's Sojourn" QuestId="39323" TurnInName="Moozy Waterwise" TurnInId="95130" X="3932.338" Y="5040.542" Z="619.6666" />

		<PickUp QuestName="Moozy's Adventure" QuestId="39572" GiverName="Moozy Waterwise" GiverId="95130" X="3932.338" Y="5040.542" Z="619.6666" />
		<TurnIn QuestName="Moozy's Adventure" QuestId="39572" TurnInName="Sella Waterwise" TurnInId="96084" X="4231.368" Y="4860.691" Z="655.5359" />

		<TurnIn QuestName="Trapped Tauren" QuestId="39316" TurnInName="Angler Creel" TurnInId="95186" X="4060.99" Y="4781.447" Z="625.9202" />
		<TurnIn QuestName="Fish Out of Water" QuestId="39614" TurnInName="Angler Creel" TurnInId="95186" X="4060.99" Y="4781.447" Z="625.9202" />
		<TurnIn QuestName="Spray and Prey" QuestId="39277" TurnInName="Jale Rivermane" TurnInId="95956" X="4064.991" Y="4778.116" Z="626.1739" />

		<PickUp QuestName="Lifespring Cavern" QuestId="39661" GiverName="Jale Rivermane" GiverId="95956" X="4064.991" Y="4778.116" Z="626.1739" />
		<TurnIn QuestName="Lifespring Cavern" QuestId="39661" TurnInName="Jale Rivermane" TurnInId="96520" X="4077.511" Y="4974.141" Z="663.2186" />

		<PickUp QuestName="Balance of Elements" QuestId="39488" GiverName="Jale Rivermane" GiverId="96520" X="4077.511" Y="4974.141" Z="663.2186" />
		<!-- NOTE: <NPCIdChange> : The NPC becomes a follower, which causes an Id change. -->
		<PickUp QuestName="Invading Spelunkers" QuestId="39489" GiverName="Jale Rivermane" GiverId="95973" X="4069.751" Y="4975.878" Z="662.8732" />

		<While Condition="DoQuest(39488)" >
			<CustomBehavior File="InteractWith" MobIds="243639" NumOfTimes="10" QuestId="39488" QuestObjectiveIndex="1" >
				<HuntingGrounds>
					<Hotspot X="4176.417" Y="5008.643" Z="645.3951" />
					<Hotspot X="4210.141" Y="5036.455" Z="652.2859" />
					<Hotspot X="4235.343" Y="5063.03" Z="652.2601" />
					<Hotspot X="4180.616" Y="5082.789" Z="660.3372" />
					<Hotspot X="4223.156" Y="5110.615" Z="669.6387" />
				</HuntingGrounds>
			</CustomBehavior>
		</While>

		<While Condition="DoQuest(39489)" >
			<CustomBehavior File="KillUntilComplete" MobIds="95916, 95866" QuestId="39489" QuestObjectiveIndex="1" >
				<HuntingGrounds>
					<Hotspot X="4216" Y="5105.166" Z="669.8068" />
					<Hotspot X="4107.565" Y="5106.719" Z="676.3578" />
					<Hotspot X="4220.652" Y="5088.407" Z="703.9309" />
				</HuntingGrounds>
			</CustomBehavior>
		</While>

		<TurnIn QuestName="Balance of Elements" QuestId="39488" TurnInName="Jale Rivermane" TurnInId="95973" X="4222.013" Y="5092.705" Z="703.6729" />
		<TurnIn QuestName="Invading Spelunkers" QuestId="39489" TurnInName="Jale Rivermane" TurnInId="95973" X="4222.013" Y="5092.705" Z="703.6729" />

		<PickUp QuestName="Crystal Fury" QuestId="39487" GiverName="Jale Rivermane" GiverId="95973" X="4222.013" Y="5092.705" Z="703.6729" />
		<While Condition="DoQuest(39487)" >
			<CustomBehavior File="KillUntilComplete" MobId="95881" QuestId="39487" QuestObjectiveIndex="1" X="4265.129" Y="5107.484" Z="708.971" />
		</While>
		<TurnIn QuestName="Crystal Fury" QuestId="39487" TurnInName="Jale Rivermane" TurnInId="95973" X="4270.49" Y="5101.572" Z="708.8771" />

		<PickUp QuestName="High Water" QuestId="39498" GiverName="Jale Rivermane" GiverId="95973" X="4270.49" Y="5101.572" Z="708.8771" />
		<TurnIn QuestName="High Water" QuestId="39498" TurnInName="Jale Rivermane" TurnInId="97662" X="3583.474" Y="4836.208" Z="700.3303" />
	<!-- END Story: The Rivermane Tribe -->

	<!-- Story: Riverbend -->
		<PickUp QuestName="The Underking Comes" QuestId="42104" GiverName="Jale Rivermane" GiverId="97662" X="3583.474" Y="4836.208" Z="700.3303" />
		<While Condition="DoQuest(42104)" >
			<!-- NOTE: <Improve> : This can be improved. -->
			<MoveTo QuestId="42104" X="3658.93" Y="4836.998" Z="688.731" />
			<CustomBehavior File="Misc\RunLua" QuestId="42104" WaitTime="1500" Lua="ExtraActionButton1:Click();" />
			<MoveTo QuestId="42104" X="3634.189" Y="4891.154" Z="682.9647" />
			<CustomBehavior File="Misc\RunLua" QuestId="42104" WaitTime="1500" Lua="ExtraActionButton1:Click();" />
			<MoveTo QuestId="42104" X="3668.64" Y="4897.01" Z="681.988" />
			<CustomBehavior File="Misc\RunLua" QuestId="42104" WaitTime="1500" Lua="ExtraActionButton1:Click();" />
			<MoveTo QuestId="42104" X="3704.925" Y="4871.203" Z="679.8173" />
			<CustomBehavior File="Misc\RunLua" QuestId="42104" WaitTime="1500" Lua="ExtraActionButton1:Click();" />
			<MoveTo QuestId="42104" X="3724.296" Y="4846.906" Z="681.0002" />
			<CustomBehavior File="Misc\RunLua" QuestId="42104" WaitTime="1500" Lua="ExtraActionButton1:Click();" />
			<MoveTo QuestId="42104" X="3700.379" Y="4855.821" Z="681.0949" />
			<CustomBehavior File="Misc\RunLua" QuestId="42104" WaitTime="1500" Lua="ExtraActionButton1:Click();" />
		</While>
		<If Condition="QuestDone(42104)" >
			<TurnIn QuestName="The Underking Comes" QuestId="42104" TurnInName="Spiritwalker Ebonhorn" TurnInId="93805" X="3708.767" Y="4962.487" Z="671.2761" />
			<CustomBehavior File="RunCode" Code="await SkipCutscene();" />
		</If>

		<PickUp QuestName="Grasp of the Underking" QuestId="39025" GiverName="Spiritwalker Ebonhorn" GiverId="93805" X="3737.774" Y="4959.208" Z="670.8829" />
		<PickUp QuestName="The Drogbar" QuestId="39026" GiverName="Spiritwalker Ebonhorn" GiverId="93805" X="3737.774" Y="4959.208" Z="670.8829" />

		<While Condition="DoQuest(39025)" >
			<CustomBehavior File="InteractWith" MobId="97648" QuestId="39025" NonCompeteDistance="0" InteractBlacklistTimeInSeconds="1" QuestObjectiveIndex="2" X="3736.111" Y="4887.467" Z="675.6513" />
			<CustomBehavior File="InteractWith" MobId="97648" QuestId="39025" NonCompeteDistance="0" InteractBlacklistTimeInSeconds="1" QuestObjectiveIndex="1" X="3649.892" Y="4908.655" Z="685.0859" />
			<CustomBehavior File="InteractWith" MobId="97648" QuestId="39025" NonCompeteDistance="0" InteractBlacklistTimeInSeconds="1" QuestObjectiveIndex="3" X="3575.872" Y="4839.522" Z="700.2889" />
		</While>

		<While Condition="DoQuest(39026)" >
			<CustomBehavior File="KillUntilComplete" MobIds="103067, 102274, 94846" QuestId="39026" QuestObjectiveIndex="1" >
				<HuntingGrounds>
					<Hotspot X="3568.237" Y="4846.711" Z="700.9561" />
					<Hotspot X="3615.923" Y="4772.635" Z="717.7861" />
					<Hotspot X="3725.579" Y="4917.6" Z="673.3043" />
				</HuntingGrounds>
			</CustomBehavior>
		</While>

		<TurnIn QuestName="Grasp of the Underking" QuestId="39025" TurnInName="Warbrave Oro" TurnInId="97553" X="3541.17" Y="4770.213" Z="714.2067" />
		<TurnIn QuestName="The Drogbar" QuestId="39026" TurnInName="Warbrave Oro" TurnInId="97553" X="3541.17" Y="4770.213" Z="714.2067" />

		<PickUp QuestName="Bitestone Enclave" QuestId="39043" GiverName="Warbrave Oro" GiverId="97553" X="3541.17" Y="4770.213" Z="714.2067" />
		<While Condition="DoQuest(39043)" >
			<CustomBehavior File="KillUntilComplete" QuestId="39043" >
				<HuntingGrounds>
					<Hotspot X="3503.413" Y="4580.504" Z="680.7924" />
					<Hotspot X="3441.987" Y="4449.904" Z="680.4611" />
					<Hotspot X="3374.287" Y="4484.193" Z="705.421" />
				</HuntingGrounds>

				<PursuitList>
					<PursueUnit Id="98653" PursueWhen="!IsObjectiveComplete(2, 39043)" />
					<PursueUnit Id="94261" PursueWhen="!IsObjectiveComplete(1, 39043)" />
					<PursueUnit Id="102297" PursueWhen="!IsObjectiveComplete(1, 39043)" />
					<PursueUnit Id="102283" PursueWhen="!IsObjectiveComplete(1, 39043)" />
				</PursuitList>
			</CustomBehavior>
		</While>
		<TurnIn QuestName="Bitestone Enclave" QuestId="39043" TurnInName="Warbrave Oro" TurnInId="97553" X="3482.253" Y="4601.077" Z="681.6348" />

		<PickUp QuestName="Dargrul and the Hammer" QuestId="39027" GiverName="Warbrave Oro" GiverId="97553" X="3482.253" Y="4601.077" Z="681.6348" />
		<While Condition="DoQuest(39027)" >
			<MoveTo X="3464.436" Y="4511.601" Z="679.8839" />
			<CustomBehavior File="WaitTimer" WaitTime="10000" />
			<!-- NOTE: <TechnicalCheck> : Something weird happens here.  When the player is caught in the grasp, all mobs around the player become 5500+ yards away from the player, this is why this IW has a range of 6000.
										May also remove the WaitForNpcs="false" on the IW, and instead, have the IW terminate on a detection. -->
			<CustomBehavior File="InteractWith" MobId="97781" Range="6000" WaitForNpcs="false" QuestId="39027" X="3466.416" Y="4518.513" Z="680.0645" />
			<MoveTo X="3738.184" Y="4957.429" Z="670.7311" />
		</While>
		<TurnIn QuestName="Dargrul and the Hammer" QuestId="39027" TurnInName="Spiritwalker Ebonhorn" TurnInId="93805" X="3737.774" Y="4959.208" Z="670.8829" />

		<PickUp QuestName="Get to High Ground" QuestId="38909" GiverName="Spiritwalker Ebonhorn" GiverId="93805" X="3737.774" Y="4959.208" Z="670.8829" />
		<While Condition="DoQuest(38909)" >
			<MoveTo X="4083.05" Y="4385.5" Z="670.6257" />
		</While>
		<TurnIn QuestName="Get to High Ground" QuestId="38909" TurnInName="Mayla Highmountain" TurnInId="93826" X="4083.05" Y="4385.5" Z="670.6257" />
	<!-- END Story: Riverbend -->

	<!-- Breadcrumb Quests -->
		<PickUp QuestName="The Skyhorn Tribe" QuestId="38913" GiverName="Mayla Highmountain" GiverId="93826" X="4083.05" Y="4385.5" Z="670.6257" /> <!-- Breadcrumb for Skyhorn Tribe story -->
		<PickUp QuestName="The Bloodtotem Tribe" QuestId="38912" GiverName="Mayla Highmountain" GiverId="93826" X="4083.05" Y="4385.5" Z="670.6257" /> <!-- Breadcrumb for Bloodtotem Tribe story. -->
		<PickUp QuestName="A Walk With the Spirits" QuestId="40515" GiverName="Mayla Highmountain" GiverId="93826" X="4083.05" Y="4385.5" Z="670.6257" />
	<!-- END Breadcrumb Quests -->

	<!-- Moozy Finale -->
		<PickUp QuestName="Moozy's Reunion" QuestId="42590" GiverName="Sella Waterwise" GiverId="96084" X="4056.849" Y="4372.806" Z="768.562" />
		<While Condition="DoQuest(42590)" >
			<MoveTo X="4269.8" Y="4303.593" Z="738.8216" />
			<DisableBehavior Name="Combat" />
			<UseMount Value="false" />
			<!-- Mounts and Shapeshifts can cause weird issues here. -->
			<CustomBehavior File="RunCode"><![CDATA[
					await CommonCoroutines.LandAndDismount();
					foreach (var aura in new[]{768,783,5487,2645,24858}.Select(id =>Me.GetAuraById(id)).Where(a => a != null)) 
					aura.TryCancelAura();
				]]>
			</CustomBehavior>
			<CustomBehavior File="InteractWith" MobId="107726" NonCompeteDistance="0" GossipOptions="1" InteractBlacklistTimeInSeconds="1" WaitForNpcs="false" QuestId="42590" X="4269.8" Y="4303.593" Z="738.8216" />
			<CustomBehavior File="RunCode"><![CDATA[
					var ethelPoi = ObjectManager.GetObjectsOfType<WoWUnit>().FirstOrDefault(x => x.Entry == 107726);
					Random rnd = new Random();

					while (ethelPoi != null && !QuestDone(42590))
					{
						while (ethelPoi.Distance > 6)
						{
							Navigator.MoveTo(ethelPoi.Location);
							await Coroutine.Yield();
						}

						WoWMovement.ClickToMove(WoWMathHelper.CalculatePointInFront(ethelPoi.Location, ethelPoi.Rotation, 3.5f));
						await Coroutine.Wait(rnd.Next(2000, 2500), () => ethelPoi.IsMoving);

						if (!ethelPoi.IsMoving)
						{
							// This is to prevent a potential issue where Ethel may glitch out and face the wrong way.
							WoWMovement.ClickToMove(WoWMathHelper.CalculatePointBehind(ethelPoi.Location, ethelPoi.Rotation, 2.5f));
							await Coroutine.Sleep(2000);
						}
						else
							await Coroutine.Sleep(rnd.Next(500, 1000));

						await Coroutine.Yield();
					}
				]]>
			</CustomBehavior>
			<EnableBehavior Name="Combat" />
			<UseMount Value="true" />
		</While>
		<TurnIn QuestName="Moozy's Reunion" QuestId="42590" TurnInName="Sella Waterwise" TurnInId="96084" X="4056.849" Y="4372.806" Z="768.562" />
	<!-- END Moozy Finale -->

	<!-- Story: XXX -->
		<TurnIn QuestName="A Walk With the Spirits" QuestId="40515" TurnInName="Spiritwalker Ebonhorn" TurnInId="98825" X="4057.205" Y="4320.374" Z="675.4365" />

		<PickUp QuestName="The Story of Huln" QuestId="40167" GiverName="Spiritwalker Ebonhorn" GiverId="98825" X="4057.205" Y="4320.374" Z="675.4365" />
		<While Condition="DoQuest(40167)" >
			<CustomBehavior File="InteractWith" MobId="98825" GossipOptions="1" QuestId="40167" X="4057.205" Y="4320.374" Z="675.4365" />
			<CustomBehavior File="RunCode" Code="await SkipCutscene();" />
		</While>
		<TurnIn QuestName="The Story of Huln" QuestId="40167" TurnInName="Spiritwalker Ebonhorn" TurnInId="98825" X="4057.205" Y="4320.374" Z="675.4365" />

		<PickUp QuestName="To See the Past" QuestId="40520" GiverName="Spiritwalker Ebonhorn" GiverId="98825" X="4057.205" Y="4320.374" Z="675.4365" />
		<While Condition="DoQuest(40520)" >
			<CustomBehavior File="InteractWith" MobId="100437" NonCompeteDistance="0" InteractBlacklistTimeInSeconds="1" InteractByBuyingItemId="132247" QuestId="40520" QuestObjectiveIndex="1" X="4252.739" Y="4470.258" Z="671.394" />
			<CustomBehavior File="InteractWith" MobId="100418" NonCompeteDistance="0" InteractBlacklistTimeInSeconds="1" QuestId="40520" QuestObjectiveIndex="3" X="4438.527" Y="4496.714" Z="707.2569" />
			<!-- NOTE: <TechnicalIssue> : Water pushes player down stream, MoveTo is to make player stand out of the water before intearct takes place. -->
			<MoveTo QuestId="40520" QuestObjectiveIndex="2" X="4330.602" Y="4262.781" Z="656.9888" />
			<CustomBehavior File="WaitTimer" WaitTime="5000" TerminateWhen="!Me.Combat" />
			<MoveTo QuestId="40520" QuestObjectiveIndex="2" X="4330.602" Y="4262.781" Z="656.9888" />
			<CustomBehavior File="MyCTM" X="4330.602" Y="4262.781" Z="656.9888" />
			<CustomBehavior File="InteractWith" MobId="245620" Range="8" QuestId="40520" QuestObjectiveIndex="2" X="4335.485" Y="4260.884" Z="656.0594" />
		</While>
		<TurnIn QuestName="To See the Past" QuestId="40520" TurnInName="Spiritwalker Ebonhorn" TurnInId="98825" X="4057.205" Y="4320.374" Z="675.4365" />
	<!-- END Story: XXXX -->

	<!-- Story: Huln's War -->
		<If Condition="!IsQuestCompleted(39992)" > <!-- Last quest in this chain -->
			<DisableBehavior Name="All" />

			<PickUp QuestName="Huln's War - The Arrival" QuestId="39983" GiverName="Spiritwalker Ebonhorn" GiverId="98825" X="4057.205" Y="4320.374" Z="675.4365" />
			<CustomBehavior File="InteractWith" MobId="98825" GossipOptions="1" X="4057.205" Y="4320.374" Z="675.4365" TerminateWhen="Me.InVehicle" /> <!-- Get into vehicle -->
			<While Condition="!IsObjectiveComplete(2, 39983)" >
				<CustomBehavior File="RunCode" Code="
					await VehicleMove(new WoWPoint(3879.25, -4900.002, 147.643));
					await VehicleKill(97796);
					await VehicleKill(109386);
					await VehicleKill(97803);" />	
			</While>
			<CustomBehavior File="RunCode" Code="await VehicleTurnIn(questId: 39983, unitId: 97891, giverSpot: new WoWPoint(3935.409, -4995.921, 148.4869));" />

			<CustomBehavior File="RunCode" Code="await VehiclePickUp(questId: 40112, unitId: 97891, giverSpot: new WoWPoint(3935.409, -4995.921, 148.4869));" />
			<CustomBehavior File="RunCode" Code="await VehicleTurnIn(questId: 40112, unitId: 98794, giverSpot: new WoWPoint(3640.411, -4914.465, 127.2173));" />

			<CustomBehavior File="RunCode" Code="await VehiclePickUp(questId: 39988, unitId: 98794, giverSpot: new WoWPoint(3640.411, -4914.465, 127.2173));" />
			<If Condition="HasQuest(39988)" >
				<!-- Used so the bot won't get stuck on the portal -->
				<MoveTo X="3471.365" Y="-4872.167" Z="139.2624" />
				<MoveTo X="3472.438" Y="-4902.313" Z="140.8259" />
				<CustomBehavior File="MyCTM" X="3478.389" Y="-4908.945" Z="144.1048" />
			</If>
			<CustomBehavior File="RunCode" Code="await VehicleTurnIn(questId: 39988, unitId: 97892, giverSpot: new WoWPoint(3478.842, -4909.076, 144.3305));" />

			<CustomBehavior File="RunCode" Code="await VehiclePickUp(questId: 39990, unitId: 97892, giverSpot: new WoWPoint(3478.842, -4909.076, 144.3305));" />
			<While Condition="!IsQuestCompleted(39990)" >
				<CustomBehavior File="RunCode" Code="
					await VehicleMove(new WoWPoint(3479.334, -4854.102, 134.7919));
					await VehicleKill(97940);
				" />	
			</While>
			<CustomBehavior File="RunCode" Code="await VehicleTurnIn(questId: 39990, unitId: 97892, giverSpot: new WoWPoint(3478.842, -4909.076, 144.3305));" />

			<CustomBehavior File="RunCode" Code="await VehiclePickUp(questId: 40388, unitId: 97892, giverSpot: new WoWPoint(3478.842, -4909.076, 144.3305));" />
			<CustomBehavior File="RunCode" Code="await VehicleTurnIn(questId: 40388, unitId: 97903, giverSpot: new WoWPoint(3451.221, -5101.295, 85.30394));" />

			<CustomBehavior File="RunCode" Code="await VehiclePickUp(questId: 39992, unitId: 97903, giverSpot: new WoWPoint(3451.221, -5101.295, 85.30394));" />
			<While Condition="DoQuest(39992)" >
				<CustomBehavior File="RunCode" Code="
					if (!QuestDone(39992))
					{
						await VehicleMove(new WoWPoint(3513.153, -5184.868, 85.54453));
					}
					await Coroutine.Wait(20000, () =&gt; Unit(97956) != null);
					await VehicleKill(97956);
					await Coroutine.Wait(20000, () =&gt; Me.MapId != 1515 || Unit(97956) != null);
				" />
			</While>
			<EnableBehavior Name="All" />				
		</If>
		<TurnIn QuestName="Huln's War - The Nathrezim" QuestId="39992" TurnInName="Spiritwalker Ebonhorn" TurnInId="98825" X="4057.205" Y="4320.374" Z="675.4365" />
	<!-- END Story: Huln's War -->

	<!-- Story: Secrets of Highmountain -->
		<PickUp QuestName="Secrets of Highmountain" QuestId="38916" GiverName="Spiritwalker Ebonhorn" GiverId="98825" X="4057.205" Y="4320.374" Z="675.4365" />

		<!-- NOTE: <AddLater> : This is a side quest.  Add later.
		<PickUp QuestName="Ceremonial Drums" QuestId="42622" GiverName="Torv Dubstomp" GiverId="108017" X="4050.932" Y="4385.313" Z="667.7916" />

		<While Condition="DoQuest(42622)" >
			<CustomBehavior File="InteractWith" QuestId="42622" >
				<HuntingGrounds>
					<Hotspot X="4123.049" Y="4405.591" Z="667.7467" />
					<Hotspot X="4086.152" Y="4308.324" Z="768.3868" /> 
					<Hotspot X="4019.743" Y="4332.312" Z="768.4916" />
					<Hotspot X="4052.286" Y="4420.277" Z="768.3255" />
					<Hotspot  />
					<Hotspot  />
				</HuntingGrounds>

				<PursuitList>
					<PursueGameObject Id="250904" PursueWhen="!IsObjectiveComplete(2, 42622)" />
					<PursueGameObject Id="250905" PursueWhen="!IsObjectiveComplete(3, 42622)" />
					<PursueUnit Id="108145" ConvertWhen="!IsObjectiveComplete(3, 42622)" PursueWhen="!IsObjectiveComplete(3, 42622)" ConvertBy="Killing" />  
				</PursuitList>
			</CustomBehavior>
		</While> -->

		<TurnIn QuestName="The Bloodtotem Tribe" QuestId="38916" TurnInName="Spiritwalker Ebonhorn" TurnInId="94571" X="3865.907" Y="4516.458" Z="776.5803" />

		<If Condition="NeedsQuest(39575)" >
			<!-- We want to clear our bags and repair first so that the bot won't traverse back through the Hill Ettins --> 
			<CustomBehavior File="ForceSetVendor" DoSell="true" DoRepair="true" />
		</If>
		<PickUp QuestName="The Path of Huln" QuestId="39575" GiverName="Spiritwalker Ebonhorn" GiverId="94571" X="3865.907" Y="4516.458" Z="776.5803" />
		<While Condition="DoQuest(39575)" >
			<DisableBehavior Name="Combat" />
			<CustomBehavior File="ForcedMount" />
			<CustomBehavior File="RunCode"><![CDATA[
					var spiritwalkerPoi = ObjectManager.GetObjectsOfType<WoWUnit>().FirstOrDefault(x => x.Entry == 96164);
					Random rnd = new Random();

					while (spiritwalkerPoi != null && !IsObjectiveComplete(1, 39575))
					{
						while (spiritwalkerPoi.Distance > 8)
						{
							Navigator.MoveTo(spiritwalkerPoi.Location);
							await Coroutine.Yield();
						}

						WoWMovement.ClickToMove(WoWMathHelper.CalculatePointInFront(spiritwalkerPoi.Location, spiritwalkerPoi.Rotation, 8f));
						await Coroutine.Wait(rnd.Next(1000, 1500), () => spiritwalkerPoi.IsMoving);
						await Coroutine.Sleep(rnd.Next(500, 800));

						await Coroutine.Yield();
					}
				]]>
			</CustomBehavior>

			<MoveTo X="3607.821" Y="4468.811" Z="784.5651" />
			<CustomBehavior File="WaitTimer" QuestId="39575" QuestObjectiveIndex="1" WaitTime="30000" />

			<If Condition="!IsObjectiveComplete(2, 39575)" >
				<MoveTo X="3614.548" Y="4404.908" Z="765.1949" />
				<CustomBehavior File="ForcedDismount" />
				<UseMount Value="false" />
				<DisableBehavior Name="Combat" /> <!-- Player will die if there's a speed buff -->
				<CustomBehavior File="MyCTM" X="3612.067" Y="4398.523" Z="661.208" TerminateWhen="Me.Z &lt;= 665" />
				<!-- NOTE: <AddSupport> : This needs to default to player setting <UseMount Value="null" />
										Currently Null is causing errors on profile load.
				-->
				<EnableBehavior Name="Combat" />
				<UseMount Value="true" />
			</If>
		</While>
		<TurnIn QuestName="The Path of Huln" QuestId="39575" TurnInName="Spiritwalker Ebonhorn" TurnInId="99153" X="3652.255" Y="4340.963" Z="664.8455" />

		<PickUp QuestName="In Defiance of Deathwing" QuestId="40219" GiverName="Spiritwalker Ebonhorn" GiverId="99153" X="3652.255" Y="4340.963" Z="664.8455" />
		<While Condition="DoQuest(40219)" >
			<CustomBehavior File="InteractWith" MobId="250916" QuestId="40219" QuestObjectiveIndex="1" X="3551.038" Y="4376.373" Z="663.0094" />
			<CustomBehavior File="InteractWith" MobId="250978" QuestId="40219" QuestObjectiveIndex="2" X="3639.228" Y="4276.268" Z="665.6868" />
			<CustomBehavior File="InteractWith" MobId="250979" QuestId="40219" QuestObjectiveIndex="3" X="3512.604" Y="4292.382" Z="680.8919" />
		</While>
		<TurnIn QuestName="In Defiance of Deathwing" QuestId="40219" TurnInName="Spiritwalker Ebonhorn" TurnInId="94571" X="3510.827" Y="4287.72" Z="680.5923" />


		<PickUp QuestName="Titanic Showdown" QuestId="39578" GiverName="Spiritwalker Ebonhorn" GiverId="94571" X="3517.177" Y="4286.464" Z="680.1006" />
		<While Condition="DoQuest(39578)" >
			<CustomBehavior File="InteractWith" MobId="250994" NonCompeteDistance="0" InteractBlacklistTimeInSeconds="1" QuestId="39578" QuestObjectiveIndex="1" X="3432.866" Y="4302.333" Z="704.6904" />
			<!-- NOTE <AddAvoid> Might need avoid here. -->
			<CustomBehavior File="KillUntilComplete" MobId="97056" QuestId="39578" QuestObjectiveIndex="2" X="3412.535" Y="4259.626" Z="705.2066" />
		</While>
		<TurnIn QuestName="Titanic Showdown" QuestId="39578" TurnInName="Spiritwalker Ebonhorn" TurnInId="99190" X="3420.367" Y="4294.182" Z="703.812" />

		<PickUp QuestName="An Ancient Secret" QuestId="39577" GiverName="Spiritwalker Ebonhorn" GiverId="99190" X="3420.367" Y="4294.182" Z="703.812" />
		<While Condition="DoQuest(39577)" >
			<CustomBehavior File="InteractWith" MobId="251031" QuestId="39577" X="3399.019" Y="4208.474" Z="720.011" TerminateWhen="Unit(96387) != null" />
			<CustomBehavior File="KillUntilComplete" MobIds="96242" QuestId="39577" QuestObjectiveIndex="2" X="3409.205" Y="4189.848" Z="721.3736" TerminateWhen="Unit(96387) == null" />
			<CustomBehavior File="WaitTimer" WaitTime="20000" QuestId="39577" QuestObjectiveIndex="3" TerminateWhen="Unit(96387) == null" />
		</While>
		<TurnIn QuestName="An Ancient Secret" QuestId="39577" TurnInName="Ebyssian" TurnInId="96270" X="3419.826" Y="4198.662" Z="721.3149" />

		<PickUp QuestName="The Backdoor" QuestId="39579" GiverName="Ebyssian" GiverId="96270" X="3419.826" Y="4198.662" Z="721.3149" />
		<TurnIn QuestName="The Backdoor" QuestId="39579" TurnInName="Mayla Highmountain" TurnInId="108305" X="2969.533" Y="4332.866" Z="651.5734" />

		<!-- NOTE: <BonusObjective> : Bonus quest for this area: <PickUp QuestName="Echoes of Deathwing" QuestId="39576" GiverName="Azureback Broodmother" GiverId="108014" XXXX />
			This is where it needs to be. -->

		<PickUp QuestName="The High Chieftain" QuestId="39580" GiverName="Mayla Highmountain" GiverId="108305" X="2969.533" Y="4332.866" Z="651.5734" />
		<If Condition="HasQuest(39580)" >
			<If Condition="Unit(96565) != null" >
				<CustomBehavior File="InteractWith" MobId="96565" NonCompeteDistance="0" X="-863.934" Y="4298.434" Z="745.3467" />
				<CustomBehavior File="Misc\RunLua" Lua="TakeTaxiNode(7);" />
			</If>
		</If>
		<TurnIn QuestName="The High Chieftain" QuestId="39580" TurnInName="Mayla Highmountain" TurnInId="108434" X="4083.142" Y="4385.414" Z="670.626" />
	<!-- END Story: Secrets of Highmountain -->

	<!-- Oenia Skyhorn Side Quests -->
		<PickUp QuestName="Wax On, Wax Off" QuestId="39765" GiverName="Oenia Skyhorn" GiverId="96984" X="4841.946" Y="3822.238" Z="764.2232" />
		<PickUp QuestName="Candle to the Grave" QuestId="39768" GiverName="Oenia Skyhorn" GiverId="96984" X="4841.946" Y="3822.238" Z="764.2232" />

		<CustomBehavior File="KillUntilComplete" MobId="96800" QuestId="39765" QuestObjectiveIndex="1" X="4826.283" Y="3667.298" Z="762.1398" />
		<CustomBehavior File="KillUntilComplete" MobId="96774" QuestId="39768" QuestObjectiveIndex="1" >
			<HuntingGrounds>
				<Hotspot X="4791.599" Y="3740.355" Z="758.7563" />
				<Hotspot X="4874.722" Y="3786.928" Z="758.9703" />
			</HuntingGrounds>
		</CustomBehavior>

		<TurnIn QuestName="Wax On, Wax Off" QuestId="39765" TurnInName="Oenia Skyhorn" TurnInId="96984" X="4841.946" Y="3822.238" Z="764.2232" />
		<TurnIn QuestName="Candle to the Grave" QuestId="39768" TurnInName="Oenia Skyhorn" TurnInId="96984" X="4841.946" Y="3822.238" Z="764.2232" />

		<PickUp QuestName="The Gates of Wax" QuestId="39769" GiverName="Oenia Skyhorn" GiverId="96984" X="4841.946" Y="3822.238" Z="764.2232" />
		<TurnIn QuestName="The Gates of Wax" QuestId="39769" TurnInName="Bluewax Gatekeeper" TurnInId="97130" X="4992.674" Y="3780.547" Z="734.2362" />

		<CustomBehavior File="RunCode" Code="
			if (!IsQuestCompleted(40345))
			{
				Logging.Write(System.Windows.Media.Colors.Yellow, &quot;[ProfileBase]: Disabling custom anti-stuck measures until this quest is complete.&quot;);
				UseAntiStuck = false;
			}
		" />

		<PickUp QuestName="Candle of Command" QuestId="40339" GiverName="Bluewax Gatekeeper" GiverId="97130" X="4841.946" Y="3822.238" Z="764.2232" />
		<While Condition="DoQuest(40339)" >
			<DisableBehavior Name="Combat" />
			<CustomBehavior File="InteractWith" MobId="245340" NonCompeteDistance="0" InteractBlacklistTimeInSeconds="1" QuestId="40339" QuestObjectiveIndex="1" X="4959.039" Y="3779.34" Z="732.6066" />
			<CustomBehavior File="InteractWith" MobId="99745" NonCompeteDistance="0" InteractBlacklistTimeInSeconds="1" MovementBy="None" GossipOptions="2" QuestId="40339" QuestObjectiveIndex="2" X="4960.265" Y="3782.108" Z="732.9263" />
			<CustomBehavior File="InteractWith" MobId="99746" NonCompeteDistance="0" InteractBlacklistTimeInSeconds="1" MovementBy="None" GossipOptions="2" QuestId="40339" QuestObjectiveIndex="3" X="4960.91" Y="3780.905" Z="732.8096" />
			<CustomBehavior File="InteractWith" MobId="99747" NonCompeteDistance="0" InteractBlacklistTimeInSeconds="1" MovementBy="None" GossipOptions="2" QuestId="40339" QuestObjectiveIndex="4" X="4960.252" Y="3782.036" Z="732.9193" />
			<CustomBehavior File="InteractWith" MobId="99748" NonCompeteDistance="0" InteractBlacklistTimeInSeconds="1" MovementBy="None" GossipOptions="2" QuestId="40339" QuestObjectiveIndex="5" X="4959.62" Y="3781.814" Z="732.8821" />
			<EnableBehavior Name="Combat" />
		</While>
		<TurnIn QuestName="Candle of Command" QuestId="40339" TurnInName="Bluewax Gatekeeper" TurnInId="97130" X="4841.946" Y="3822.238" Z="764.2232" />

		<PickUp QuestName="Burn the Candle at Both Ends" QuestId="40345" GiverName="Bluewax Gatekeeper" GiverId="97130" X="4992.387" Y="3781.002" Z="734.2791" />
		<While Condition="DoQuest(40345)" >
			<DisableBehavior Name="Combat" />
			<CustomBehavior File="InteractWith" MobId="245340" NonCompeteDistance="0" InteractBlacklistTimeInSeconds="1" QuestId="40345" QuestObjectiveIndex="1" X="4959.039" Y="3779.34" Z="732.6066" />
			<CustomBehavior File="InteractWith" MobId="99781" NonCompeteDistance="0" InteractBlacklistTimeInSeconds="1" MovementBy="None" GossipOptions="1" QuestId="40345" QuestObjectiveIndex="2" X="4959.967" Y="3781.657" Z="732.8728" />
			<CustomBehavior File="InteractWith" MobId="99782" NonCompeteDistance="0" InteractBlacklistTimeInSeconds="1" MovementBy="None" GossipOptions="1" QuestId="40345" QuestObjectiveIndex="3" X="4959.91" Y="3781.795" Z="732.8875" />
			<CustomBehavior File="InteractWith" MobId="243465" NonCompeteDistance="0" InteractBlacklistTimeInSeconds="1" MovementBy="None" GossipOptions="1" QuestId="40345" QuestObjectiveIndex="4" X="4961.25" Y="3778.908" Z="733.0018" />
			<CustomBehavior File="InteractWith" MobId="99782" NonCompeteDistance="0" InteractBlacklistTimeInSeconds="1" MovementBy="None" GossipOptions="1" QuestId="40345" QuestObjectiveIndex="5" X="4959.91" Y="3781.795" Z="732.8875" />
			<CustomBehavior File="EjectVeh" QuestId="40345" />
			<EnableBehavior Name="Combat" />
			<CustomBehavior File="InteractWith" MobId="99783" NonCompeteDistance="0" InteractBlacklistTimeInSeconds="1" QuestId="40345" QuestObjectiveIndex="6" X="4937.702" Y="3805.764" Z="733.0316" />
			<CustomBehavior File="InteractWith" MobId="99784" NonCompeteDistance="0" InteractBlacklistTimeInSeconds="1" GossipOptions="1" QuestId="40345" QuestObjectiveIndex="7" X="4977.628" Y="3898.031" Z="729.7892" />
			<CustomBehavior File="InteractWith" MobId="245357" NonCompeteDistance="0" InteractBlacklistTimeInSeconds="1" GossipOptions="1" QuestId="40345" QuestObjectiveIndex="8" X="4974.663" Y="3898.847" Z="732.0211" />
		</While>
		<TurnIn QuestName="Burn the Candle at Both Ends" QuestId="40345" TurnInName="Bluewax Gatekeeper" TurnInId="97130" X="4992.387" Y="3781.002" Z="734.2791" />

		<CustomBehavior File="RunCode" Code="
			if (IsQuestCompleted(40345))
			{
				Logging.Write(System.Windows.Media.Colors.Yellow, &quot;[ProfileBase]: Re-enabling custom anti-stuck measures.&quot;);
				UseAntiStuck = true;
			}
		" />


		<PickUp QuestName="Can't Hold a Candle To You" QuestId="39772" GiverName="Bluewax Gatekeeper" GiverId="97130" X="4992.387" Y="3781.002" Z="734.2791" />
		<While Condition="DoQuest(39772)" >
			<CustomBehavior File="InteractWith" MobId="243993" WaitForNpcs="false" NonCompeteDistance="0" X="4992.549" Y="3778.96" Z="732.3364" />
			<CustomBehavior File="KillUntilComplete" MobId="96853" QuestId="39772" QuestObjectiveIndex="1" X="5029.498" Y="3787.664" Z="734.1189" />
		</While>
		<TurnIn QuestName="Can't Hold a Candle To You" QuestId="39772" TurnInName="Oenia Skyhorn" TurnInId="96984" X="4841.946" Y="3822.238" Z="764.2232" />
	<!-- END Oenia Skyhorn Side Quests -->

	<!-- Story: Skyhorn Tribe -->
		<TurnIn QuestName="The Skyhorn Tribe" QuestId="38913" TurnInName="Lasan Skyhorn" TurnInId="93841" X="4855.699" Y="3979.478" Z="832.155" />

		<PickUp QuestName="Nursing the Wounds" QuestId="39318" GiverName="Lasan Skyhorn" GiverId="93841" X="4855.699" Y="3979.478" Z="832.155" />
		<While Condition="DoQuest(39318)" >
			<CustomBehavior File="InteractWith" MobId="95403" GossipOptions="1" QuestId="39318" QuestObjectiveIndex="1" X="4688.664" Y="3891.091" Z="830.9029" />
			<While Condition="!IsObjectiveComplete(2, 39318)" >
				<!-- NOTE: <Improve> : Improve this.  Can make it a lot better. -->
				<MoveTo QuestId="39318" X="4676.615" Y="3877.472" Z="830.101" />
				<CustomBehavior File="RunCode" QuestId="39318" ><![CDATA[
						while (Unit(95261, u => u.Distance <= 29) != null)
						{
							WoWUnit firePoi = Unit(95261);
							StyxWoW.Me.SetFacing(firePoi);
							await Coroutine.Sleep(750);
							Lua.DoString("ExtraActionButton1:Click();");
							await Coroutine.Sleep(750);
							SpellManager.ClickRemoteLocation(firePoi.Location);
						}
					]]>
				</CustomBehavior>

				<MoveTo QuestId="39318" X="4777.842" Y="3896.039" Z="817.3372" />
				<CustomBehavior File="RunCode" QuestId="39318" ><![CDATA[
						while (Unit(95261, u => u.Distance <= 29) != null)
						{
							WoWUnit firePoi = Unit(95261);
							StyxWoW.Me.SetFacing(firePoi);
							await Coroutine.Sleep(750);
							Lua.DoString("ExtraActionButton1:Click();");
							await Coroutine.Sleep(750);
							SpellManager.ClickRemoteLocation(firePoi.Location);
						}
					]]>
				</CustomBehavior>

				<MoveTo QuestId="39318" X="4800.041" Y="3927.792" Z="829.0881" />
				<CustomBehavior File="RunCode" QuestId="39318" ><![CDATA[
						while (Unit(95261, u => u.Distance <= 29) != null)
						{
							WoWUnit firePoi = Unit(95261);
							StyxWoW.Me.SetFacing(firePoi);
							await Coroutine.Sleep(750);
							Lua.DoString("ExtraActionButton1:Click();");
							await Coroutine.Sleep(750);
							SpellManager.ClickRemoteLocation(firePoi.Location);
						}
					]]>
				</CustomBehavior>
			</While>
		</While>
		<If Condition="QuestDone(39318)" >
			<CustomBehavior File="RunCode" Code="SpellManager.ClickRemoteLocation(Me.Location); await Coroutine.Sleep(500);" />
			<TurnIn QuestName="Nursing the Wounds" QuestId="39318" TurnInName="Lasan Skyhorn" TurnInId="93841" X="4855.699" Y="3979.478" Z="832.1546" />
		</If>

		<PickUp QuestName="Rocs vs Eagles" QuestId="38910" GiverName="Lasan Skyhorn" GiverId="93841" X="4855.699" Y="3979.478" Z="832.1546" />
		<While Condition="DoQuest(38910)" >
			<CustomBehavior File="InteractWith" MobId="94991" Range="5" NonCompeteDistance="0" QuestId="38910" QuestObjectiveIndex="1" >
				<HuntingGrounds>
					<Hotspot X="4952.185" Y="4152.331" Z="821.8495" />
					<Hotspot X="4882.544" Y="4119.929" Z="836.452" />
					<Hotspot X="5017.504" Y="4071.149" Z="794.1622" />
					<Hotspot X="5106.593" Y="3982.121" Z="811.1218" />
				</HuntingGrounds>
			</CustomBehavior>
		</While>
		<!-- NOTE: <BonusObjective> : <PickUp QuestName="Siege of Crawliac" QuestId="39317" GiverName="Hati" GiverId="100324" XXXX /> -->

		<While Condition="!IsQuestCompleted(39317) &amp;&amp; Me.Level &lt; 110" > <!-- Bonus Objective: Siege of Crawliac -->
			<CustomBehavior File="InteractWith" MobState="Dead" NumOfTimes="100" TerminateWhen="IsQuestCompleted(39317)" >
				<HuntingGrounds>
					<Hotspot X="4875.676" Y="4128.829" Z="839.3718" />
					<Hotspot X="4984" Y="4181.067" Z="824.3726" />
					<Hotspot X="5098.25" Y="3976.313" Z="815.0815" />
					<Hotspot X="5037.173" Y="3983.299" Z="799.2974" />
					<Hotspot X="4968.512" Y="4024.22" Z="791.8932" />
					<Hotspot X="4958.427" Y="3955.865" Z="797.9462" />
				</HuntingGrounds>
				<PursuitList>
					<PursueGameObject Id="1234" />
					<PursueUnit Id="94984" PursueWhen="(UNIT.IsAlive || UNIT.Lootable) &amp;&amp; !UNIT.TaggedByOther" />
					<PursueUnit Id="94983" PursueWhen="(UNIT.IsAlive || UNIT.Lootable) &amp;&amp; !UNIT.TaggedByOther" />
					<!--IsFlying doesn't work for these mobs. 
						<PursueUnit Id="94986" PursueWhen="(UNIT.IsAlive || UNIT.Lootable) &amp;&amp; !UNIT.IsFlying &amp;&amp; !UNIT.TaggedByOther" /> -->
				</PursuitList>
			</CustomBehavior>
		</While>

		<TurnIn QuestName="Rocs vs Eagles" QuestId="38910" TurnInName="Lasan Skyhorn" TurnInId="95410" X="5246.301" Y="3989.95" Z="815.5788" />

		<PickUp QuestName="The Three" QuestId="39321" GiverName="Lasan Skyhorn" GiverId="95410" X="5246.301" Y="3989.95" Z="815.5788" />
		<PickUp QuestName="Assaulting the Haglands" QuestId="39429" GiverName="Lasan Skyhorn" GiverId="95410" X="5246.301" Y="3989.95" Z="815.5788" />


		<While Condition="DoQuest(39321)" >
			<CustomBehavior File="KillUntilComplete" MobId="95194" QuestId="39321" QuestObjectiveIndex="1" X="5389.364" Y="3978.481" Z="816.6586" />
			<CustomBehavior File="KillUntilComplete" MobId="95195" QuestId="39321" QuestObjectiveIndex="2" X="5448.787" Y="4144.175" Z="813.1237" /> 
			<CustomBehavior File="KillUntilComplete" MobId="95196" QuestId="39321" QuestObjectiveIndex="3" X="5292.383" Y="4113.406" Z="932.7659" /> 
		</While>

		<While Condition="DoQuest(39429)" >
			<CustomBehavior File="KillUntilComplete" QuestId="39429" >
				<HuntingGrounds>
					<Hotspot X="5427.406" Y="4104.124" Z="823.7021" />
					<Hotspot X="5410.049" Y="4174.924" Z="805.4987" />
					<Hotspot X="5306.97" Y="3943.854" Z="816.3747" />
					<Hotspot X="5272.818" Y="4151.819" Z="930.1882" />
				</HuntingGrounds>

				<PursuitList>
					<PursueUnit Id="95265" PursueWhen="!IsObjectiveComplete(1, 39429)" />
					<PursueUnit Id="95266" PursueWhen="!IsObjectiveComplete(1, 39429)" />
					<PursueUnit Id="95277" PursueWhen="!IsObjectiveComplete(2, 39429)" />
				</PursuitList>
			</CustomBehavior>
		</While>

		<TurnIn QuestName="The Three" QuestId="39321" TurnInName="Lasan Skyhorn" TurnInId="95410" X="5238.109" Y="4209.419" Z="943.1345" />
		<TurnIn QuestName="Assaulting the Haglands" QuestId="39429" TurnInName="Lasan Skyhorn" TurnInId="95410" X="5238.109" Y="4209.419" Z="943.1345" />

		<PickUp QuestName="The Witchqueen" QuestId="39322" GiverName="Lasan Skyhorn" GiverId="95410" X="5238.109" Y="4209.419" Z="943.1345" />
		<While Condition="DoQuest(39322)" >
			<CustomBehavior File="KillUntilComplete" MobId="95153" QuestId="39322" QuestObjectiveIndex="1" X="5082.304" Y="4419.196" Z="1041.61" />
		</While>
		<TurnIn QuestName="The Witchqueen" QuestId="39322" TurnInName="Lasan Skyhorn" TurnInId="95410" X="5082.304" Y="4419.196" Z="1041.61" />

		<PickUp QuestName="The Bloodtotem Tribe" QuestId="38912" GiverName="Lasan Skyhorn" GiverId="95410" X="5117.721" Y="4458.951" Z="1022.652" />
		<PickUp QuestName="The Skies of Highmountain" QuestId="39387" GiverName="Lasan Skyhorn" GiverId="95410" X="5117.721" Y="4458.951" Z="1022.652" />
		<While Condition="DoQuest(39387)" >
			<If Condition="Unit(98777) != null" >
				<CustomBehavior File="InteractWith" MobId="98777" X="5121.456" Y="4461.573" Z="1021.617" />
				<!-- NOTE: <AddTermination> : This wait timer can be terminatable once the player gets off the "vehicle" -->
				<CustomBehavior File="WaitTimer" WaitTime="40000" />
			</If>
			<CustomBehavior File="InteractWith" MobId="98773" WaitForNpcs="false" GossipOptions="1" QuestId="39387" X="4192.526" Y="4406.968" Z="659.2631" />
			<MoveTo QuestId="39387" QuestObjectiveIndex="2" X="4085.01" Y="4385.548" Z="670.6269" />
			<CustomBehavior File="WaitTimer" QuestId="39387" QuestObjectiveIndex="2" WaitTime="60000" />
		</While>
		<TurnIn QuestName="The Skies of Highmountain" QuestId="39387" TurnInName="Mayla Highmountain" TurnInId="108434" X="4083.142" Y="4385.414" Z="670.6261" />
	<!-- END Story: Skyhorn Tribe -->

	<!-- Story: The Bloodtotem Tribe -->
		<TurnIn QuestName="The Bloodtotem Tribe" QuestId="38912" TurnInName="Oakin Ironbull" TurnInId="95256" X="5221.074" Y="4902.253" Z="711.7547" />

		<PickUp QuestName="Witch of the Wood" QuestId="39372" GiverName="Oakin Ironbull" GiverId="95256" X="5221.074" Y="4902.253" Z="711.7547" />
		<PickUp QuestName="Hags of a Feather" QuestId="39373" GiverName="Oakin Ironbull" GiverId="95256" X="5221.074" Y="4902.253" Z="711.7547" />

		<PickUp QuestName="I Have a Bad Feeling About This" QuestId="39873" GiverName="Navarrogg" GiverId="97667" X="5202.087" Y="4935.929" Z="710.6815" />
		<While Condition="DoQuest(39873)" >
			<CustomBehavior File="InteractWith" MobId="244625" NonCompeteDistance="0" QuestId="39873" QuestObjectiveIndex="1" X="5320.737" Y="4933.171" Z="693.3184" />
		</While>
		<TurnIn QuestName="I Have a Bad Feeling About This" QuestId="39873" TurnInName="Navarrogg's Cage" TurnInId="243402" X="5201.837" Y="4936.044" Z="710.4338" />

		<!-- NOTE: <AddAvoid> : Need to add an Avoid behavior here for the bot to stay away from a level 110 elite:
								Name="Gornoth the Lost" Entry="103656" X="5591.57" Y="4684.78" Z="663.5714"
			See NOTE1 for where to remove.
		-->
		<CustomBehavior File="Hooks\Avoid" AvoidName="GornothTheLost" Command="Add" IgnoreLootInAvoid="true" ObjectId="103656" Radius="40" AvoidWhen="UNIT.IsAlive" />

		<While Condition="DoQuest(39372)" >
			<CustomBehavior File="KillUntilComplete" MobId="95311" QuestId="39372" QuestObjectiveIndex="1" X="5649.847" Y="4774.805" Z="676.5629" />
		</While>

		<While Condition="DoQuest(39373)" >
			<CustomBehavior File="KillUntilComplete" MobIds="95310" QuestId="39373" QuestObjectiveIndex="1" >
				<HuntingGrounds>
					<Hotspot X="5629.729" Y="4753.325" Z="674.7219" />
					<Hotspot X="5522.022" Y="4762.646" Z="659.0364" />
					<Hotspot X="5574.595" Y="4696.752" Z="660.9986" />
					<Hotspot X="5386.854" Y="4789.693" Z="658.2443" />
					<Hotspot X="5671.902" Y="4701.65" Z="676.8252" />
				</HuntingGrounds>
			</CustomBehavior>
		</While>

		<While Condition="!IsQuestCompleted(39371) &amp;&amp; Me.Level &lt; 110" > <!-- Bonus Objective: Witches of the Sky -->
			<CustomBehavior File="InteractWith" MobState="Dead" NumOfTimes="100" TerminateWhen="IsQuestCompleted(39371)" >
				<HuntingGrounds>
					<Hotspot X="5425.975" Y="4756.039" Z="665.6051" />
					<Hotspot X="5561.418" Y="4789.268" Z="664.9429" />
					<Hotspot X="5666.565" Y="4703.388" Z="676.524" />
					<Hotspot X="5523.857" Y="4718.088" Z="661.813" />
				</HuntingGrounds>
				<PursuitList>
					<PursueGameObject Id="243401" />
					<PursueUnit Id="95310" PursueWhen="(UNIT.IsAlive || UNIT.Lootable) &amp;&amp; !UNIT.TaggedByOther" />
					<PursueUnit Id="95270" PursueWhen="(UNIT.IsAlive || UNIT.Lootable) &amp;&amp; !UNIT.TaggedByOther" />
				</PursuitList>
			</CustomBehavior>
		</While>

		<CustomBehavior File="Hooks\Avoid" AvoidName="GornothTheLost" Command="Remove" />

		<TurnIn QuestName="Witch of the Wood" QuestId="39372" TurnInName="Oakin Ironbull" TurnInId="95256" X="5221.074" Y="4902.253" Z="711.7546" />
		<TurnIn QuestName="Hags of a Feather" QuestId="39373" TurnInName="Oakin Ironbull" TurnInId="95256" X="5221.074" Y="4902.253" Z="711.7546" />

		<PickUp QuestName="An Audience with Torok" QuestId="39374" GiverName="Oakin Ironbull" GiverId="95256" X="5221.074" Y="4902.253" Z="711.7546" />
		<While Condition="DoQuest(39374)" >
			<MoveTo QuestId="39374" X="5332.99" Y="4919.495" Z="691.7177" />
		</While>
		<TurnIn QuestName="An Audience with Torok" QuestId="39374" TurnInName="Oakin Ironbull" TurnInId="95256" X="5335.489" Y="4919.663" Z="691.8871" />

		<PickUp QuestName="Cave of the Blood Trial" QuestId="39455" GiverName="Oakin Ironbull" GiverId="95256" X="5335.489" Y="4919.663" Z="691.8871" />
		<While Condition="DoQuest(39455)" >
			<MoveTo X="5394.246" Y="5034.519" Z="651.3091" /> <!-- So the bot doesn't get confused while trying to enter the cave, can remove if needed. -->
			<MoveTo X="5310.635" Y="4994.739" Z="627.2947" />
			<CustomBehavior File="InteractWith" MobId="244564" NonCompeteDistance="0" QuestId="39455" QuestObjectiveIndex="1" X="5307.563" Y="4997.418" Z="627.4985" /> <!-- Both MoveTos above can be removed if there's no navigation issues. -->
			<CustomBehavior File="KillUntilComplete" MobId="97544" NonCompeteDistance="0" QuestId="39455" QuestObjectiveIndex="2" X="5309.822" Y="4978.952" Z="626.4682" />
		</While>
		<TurnIn QuestName="Cave of the Blood Trial" QuestId="39455" TurnInName="Torok Bloodtotem" TurnInId="93836" X="5293.963" Y="4965.946" Z="626.6917" />

		<PickUp QuestName="Rite of Blood" QuestId="39860" GiverName="Torok Bloodtotem" GiverId="93836" X="5293.963" Y="4965.946" Z="626.6917" />
		<While Condition="DoQuest(39860)" >
			<MoveTo QuestId="39860" QuestObjectiveIndex="1" X="5110.94" Y="5071.741" Z="627.2762" />
			<CustomBehavior File="KillUntilComplete" MobId="97418" QuestId="39860" QuestObjectiveIndex="2" X="5111.842" Y="5064.063" Z="627.4364" />
		</While>
		<TurnIn QuestName="Rite of Blood" QuestId="39860" TurnInName="Navarrogg" TurnInId="95259" X="5108.871" Y="5060.603" Z="627.3237" /> <!-- WoWAPI returns several Ids for this NPC.  May need to check it. This applies for all occurences of this MobId -->

		<PickUp QuestName="Rock Troll in a Hard Place" QuestId="39381" GiverName="Navarrogg" GiverId="95259" X="5108.871" Y="5060.603" Z="627.3237" />
		<While Condition="DoQuest(39381)" >
			<CustomBehavior File="InteractWith" MobId="95259" GossipOptions="1" QuestId="39381" QuestObjectiveIndex="1" X="5111.675" Y="5058.204" Z="627.42" />
			<CustomBehavior File="WaitTimer" WaitTime="3500" />
		</While>
		<TurnIn QuestName="Rock Troll in a Hard Place" QuestId="39381" TurnInName="Navarrogg" TurnInId="95421" X="5429.645" Y="4492.733" Z="641.6826" />

		<PickUp QuestName="Pet Rocks" QuestId="39391" GiverName="Navarrogg" GiverId="95421" X="5429.645" Y="4492.733" Z="641.6826" />
		<PickUp QuestName="Stonedark Crystal" QuestId="39425" GiverName="Navarrogg" GiverId="95421" X="5429.645" Y="4492.733" Z="641.6826" />
		<PickUp QuestName="They Will Pay With Blood" QuestId="39588" GiverName="Navarrogg" GiverId="95421" X="5429.645" Y="4492.733" Z="641.6826" />

		<While Condition="DoQuest(39391)" >
			<CustomBehavior File="InteractWith" MobId="95276" QuestId="39391" QuestObjectiveIndex="2" X="5376.994" Y="4610.713" Z="637.8018" />
			<CustomBehavior File="InteractWith" MobId="95273" QuestId="39391" QuestObjectiveIndex="1" X="5624.228" Y="4612.62" Z="649.4909" />
			<CustomBehavior File="InteractWith" MobId="95272" QuestId="39391" QuestObjectiveIndex="3" X="5662.877" Y="4485.671" Z="650.6655" />
		</While>

		<While Condition="DoQuest(39588, 39425)" >
			<CustomBehavior File="KillUntilComplete" MobIds="95290, 104323, 104328" TerminateWhen="!DoQuest(39588, 39425)" >
				<HuntingGrounds>
					<Hotspot X="5594.787" Y="4460.441" Z="647.7125" />
					<Hotspot X="5442.837" Y="4598.405" Z="633.9626" />
					<Hotspot X="5409.614" Y="4641.926" Z="632.9194" />
					<Hotspot X="5393.513" Y="4638.206" Z="630.945" />
					<Hotspot X="5704.298" Y="4547.971" Z="652.5223" />
					<Hotspot X="5640.969" Y="4410.331" Z="663.6159" />
					<Hotspot X="5756.513" Y="4241.004" Z="656.9818" />
				</HuntingGrounds>
			</CustomBehavior>
		</While>

		<TurnIn QuestName="Pet Rocks" QuestId="39391" TurnInName="Navarrogg" TurnInId="95421" X="5429.645" Y="4492.733" Z="641.6829" />
		<TurnIn QuestName="Stonedark Crystal" QuestId="39425" TurnInName="Navarrogg" TurnInId="95421" X="5429.645" Y="4492.733" Z="641.6829" />
		<TurnIn QuestName="They Will Pay With Blood" QuestId="39588" TurnInName="Navarrogg" TurnInId="95421" X="5429.645" Y="4492.733" Z="641.6829" />

		<PickUp QuestName="Blood Debt" QuestId="39426" GiverName="Navarrogg" GiverId="95421" X="5429.645" Y="4492.733" Z="641.6829" />
		<While Condition="DoQuest(39426)" >
			<CustomBehavior File="KillUntilComplete" MobId="95707" QuestId="39426" QuestObjectiveIndex="1" X="5849.952" Y="4188.59" Z="716.9656" />
		</While>
		<TurnIn QuestName="Blood Debt" QuestId="39426" TurnInName="Navarrogg" TurnInId="95392" X="5821.911" Y="4201.273" Z="709.0323" />

		<While Condition="!IsQuestCompleted(42373) &amp;&amp; Me.Level &lt; 110" > <!-- Bonus Objective: Vengeance for the Stonedark -->
			<CustomBehavior File="InteractWith" MobState="AliveNotInCombat" NonCompeteDistance="0" NumOfTimes="100" TerminateWhen="IsQuestCompleted(42373)" >
				<HuntingGrounds>
					<Hotspot X="5665.234" Y="4269.152" Z="694.9038" />
					<Hotspot X="5675.331" Y="4308.199" Z="699.7321" />
					<Hotspot X="5800.514" Y="4369.218" Z="686.517" />
				</HuntingGrounds>
				<PursuitList>
					<!-- <PursueGameObject Id="1234" />, NOTE: <CheckLater> : objects glow around the area as if they can be used, but I think it's broken. -->
					<PursueUnit Id="104323" PursueWhen="(UNIT.IsAlive || UNIT.Lootable) &amp;&amp; !UNIT.TaggedByOther" />
					<PursueUnit Id="95290" PursueWhen="(UNIT.IsAlive || UNIT.Lootable) &amp;&amp; !UNIT.TaggedByOther" />
				</PursuitList>
			</CustomBehavior>
		</While>	
	<!-- END Story: The Bloodtotem Tribe -->

		<PickUp QuestName="Step into the Dark" QuestId="40229" GiverName="Navarrogg" GiverId="95392" X="5821.911" Y="4201.273" Z="709.0323" />
		<If Condition="QuestDone(40229)" >
			<MoveTo X="5866.382" Y="4582.85" Z="629.8276" />
		</If>
		<TurnIn QuestName="Step into the Dark" QuestId="40229" TurnInName="Navarrogg" TurnInId="95392" X="5870.035" Y="4577.615" Z="629.2578" />

		<PickUp QuestName="Unexpected Allies" QuestId="39456" GiverName="Navarrogg" GiverId="95392" X="5870.035" Y="4577.615" Z="629.2573" />

	<!-- Stonedark Grotto Side Quests -->
		<PickUp QuestName="You Lift, Brul?" QuestId="39440" GiverName="Damrul the Stronk" GiverId="95799" X="5838.018" Y="4518.045" Z="612.2607" />
		<While Condition="DoQuest(39440)" >
			<CustomBehavior File="MyCTM" QuestId="39440" QuestObjectiveIndex="1" X="5873.235" Y="4516.495" Z="612.2515" />
			<CustomBehavior File="MyCTM" QuestId="39440" QuestObjectiveIndex="2" X="5838.502" Y="4517.966" Z="612.2615" />
		</While>
		<TurnIn QuestName="You Lift, Brul?" QuestId="39440" TurnInName="Damrul the Stronk" TurnInId="95799" X="5838.018" Y="4518.045" Z="612.2607" />

		<PickUp QuestName="Guhruhlruhlruh" QuestId="39438" GiverName="Damrul the Stronk" GiverId="95799" X="5838.018" Y="4518.045" Z="612.2607" />
		<PickUp QuestName="Deep in the Cavern" QuestId="39437" GiverName="Damrul the Stronk" GiverId="95799" X="5838.018" Y="4518.045" Z="612.2607" />
		<PickUp QuestName="Stonedark Relics" QuestId="39439" GiverName="Damrul the Stronk" GiverId="95799" X="5838.018" Y="4518.045" Z="612.2607" />

		<While Condition="DoQuest(39439)" >
			<CustomBehavior File="InteractWith" MobId="243971" InteractByLooting="true" NonCompeteDistance="0" InteractBlacklistTimeInSeconds="1" QuestId="39439" QuestObjectiveIndex="1" X="5869.022" Y="4396.552" Z="597.8045" />
			<CustomBehavior File="InteractWith" MobId="243972" InteractByLooting="true" NonCompeteDistance="0" InteractBlacklistTimeInSeconds="1" QuestId="39439" QuestObjectiveIndex="2" X="5793.476" Y="4413.451" Z="597.9515" />
			<CustomBehavior File="InteractWith" MobId="243973" InteractByLooting="true" NonCompeteDistance="0" InteractBlacklistTimeInSeconds="1" QuestId="39439" QuestObjectiveIndex="3" X="5804.139" Y="4509.205" Z="625.2609" />
		</While>
		<CustomBehavior File="KillUntilComplete" MobId="95780" QuestId="39438" QuestObjectiveIndex="1" X="5765.42" Y="4547.066" Z="629.3021" />
		<CustomBehavior File="KillUntilComplete" MobId="95753" QuestId="39437" QuestObjectiveIndex="1" >
			<HuntingGrounds>
				<Hotspot X="5859.562" Y="4406.934" Z="598.1902" />
				<Hotspot X="5815.406" Y="4440.441" Z="597.8159" />
				<Hotspot X="5784.353" Y="4494.75" Z="618.7035" />
			</HuntingGrounds>
		</CustomBehavior>

		<TurnIn Nav="Fly" QuestName="Guhruhlruhlruh" QuestId="39438" TurnInName="Damrul the Stronk" TurnInId="95799" X="5838.018" Y="4518.045" Z="612.2607" />
		<TurnIn Nav="Fly" QuestName="Deep in the Cavern" QuestId="39437" TurnInName="Damrul the Stronk" TurnInId="95799" X="5838.018" Y="4518.045" Z="612.2607" />
		<TurnIn Nav="Fly" QuestName="Stonedark Relics" QuestId="39439" TurnInName="Damrul the Stronk" TurnInId="95799" X="5838.018" Y="4518.045" Z="612.2607" />
	<!-- END Stonedark Grotto Side Quests -->

	<!-- Apprentice Rosalyn Side Quests -->
		<PickUp QuestName="Shiny, But Deadly" QuestId="39764" GiverName="Apprentice Rosalyn" GiverId="97094" X="4817.446" Y="4786.297" Z="704.7228" />
		<PickUp QuestName="The Soulkeeper's Fate" QuestId="39773" GiverName="Apprentice Rosalyn" GiverId="97094" X="4817.446" Y="4786.297" Z="704.7228" />

		<While Condition="DoQuest(39773)" >
			<CustomBehavior File="InteractWith" MobId="97095" QuestId="39773" QuestObjectiveIndex="1" X="4907.843" Y="4934.395" Z="693.6317" />
		</While>
		<While Condition="DoQuest(39764)" >
			<CustomBehavior File="KillUntilComplete" MobIds="97103, 97064, 97813" QuestId="39764" QuestObjectiveIndex="1" >
				<HuntingGrounds>
					<Hotspot X="4845" Y="4914.385" Z="692.7594" />
					<Hotspot X="4871.927" Y="4801.135" Z="695.4571" />
					<Hotspot X="4944.245" Y="4815.018" Z="687.2032" />
					<Hotspot X="4938.529" Y="4867.245" Z="694.9362" />
				</HuntingGrounds>
			</CustomBehavior>
		</While>

		<TurnIn QuestName="Shiny, But Deadly" QuestId="39764" TurnInName="Apprentice Rosalyn" TurnInId="97846" X="4904.588" Y="4936.658" Z="693.5789" />
		<TurnIn QuestName="The Soulkeeper's Fate" QuestId="39773" TurnInName="Apprentice Rosalyn" TurnInId="97846" X="4904.588" Y="4936.658" Z="693.5789" />

		<PickUp QuestName="Demon Detainment" QuestId="39774" GiverName="Apprentice Rosalyn" GiverId="97846" X="4904.588" Y="4936.658" Z="693.5789" />
		<While Condition="DoQuest(39774)" >
			<CustomBehavior File="KillUntilComplete" MobId="97184" QuestId="39774" QuestObjectiveIndex="2" X="4804.402" Y="4936.729" Z="693.3428" />
			<CustomBehavior File="KillUntilComplete" MobId="97183" QuestId="39774" QuestObjectiveIndex="3" X="5003.809" Y="4865.615" Z="724.1586" />
			<CustomBehavior File="KillUntilComplete" MobId="97181" QuestId="39774" QuestObjectiveIndex="1" X="5155.09" Y="4772.077" Z="683.3164" />
		</While>
		<TurnIn QuestName="Demon Detainment" QuestId="39774" TurnInName="Apprentice Rosalyn" TurnInId="97094" X="5147.085" Y="4764.111" Z="681.6678" />
	<!-- END Apprentice Rosalyn Side Quests -->

		<While Condition="DoQuest(39456)" >
			<CustomBehavior File="InteractWith" MobId="99619" InteractByGossipOptions="1" QuestId="39456" X="4123.887" Y="4475.311" Z="660.1113" />
			<MoveTo QuestId="39456" QuestObjectiveIndex="2" X="4084.514" Y="4386.992" Z="670.6257" />
			<CustomBehavior File="WaitTimer" QuestId="39456" QuestObjectiveIndex="2" WaitTime="23000" />
		</While>						
		<TurnIn QuestName="Unexpected Allies" QuestId="39456" TurnInName="Mayla Highmountain" TurnInId="108434" X="4083.142" Y="4385.414" Z="670.6258" />


		<PickUp QuestName="Bolas Bastion" QuestId="42630" GiverName="Bolas Skyfeather" GiverId="107660" X="4157.229" Y="4400.042" Z="768.2988" />
		<While Condition="DoQuest(42630)" >
			<DisableBehavior Name="Combat" />
			<If Condition="Me.GotAlivePet" >
				<CustomBehavior File="RunCode"><![CDATA[
						Lua.DoString("PetDismiss();");
						SpellManager.Cast("Dismiss Pet");
						await Coroutine.Sleep(3250);
					]]>
				</CustomBehavior>
			</If>
			<CustomBehavior File="InteractWith" MobId="107988" X="4163.167" Y="4396.066" Z="768.3977" TerminateWhen="Me.InVehicle" />
			<CustomBehavior File="Vehicles\CannonControl" QuestId="42630" Gravity="0.01" Velocity="200" MobId="108052" Buttons="1,2" VehicleId="107988" X="4163.167" Y="4396.066" Z="768.3977" TerminateWhen="!Me.InVehicle" />
			<EnableBehavior Name="Combat" />
		</While>
		<TurnIn QuestName="Bolas Bastion" QuestId="42630" TurnInName="Bolas Skyfeather" TurnInId="107660" X="4157.229" Y="4400.042" Z="768.2988" />

		<PickUp QuestName="Mountainstrider Round-Up" QuestId="42596" GiverName="Liza Galestride" GiverId="97854" X="4113.577" Y="4297.513" Z="768.2068" />
		<While Condition="DoQuest(42596)" >
			<DisableBehavior Name="Combat" />
			<If Condition="Me.GotAlivePet" >
				<CustomBehavior File="RunCode"><![CDATA[
						Lua.DoString("PetDismiss();");
						SpellManager.Cast("Dismiss Pet");
						await Coroutine.Sleep(3250);
					]]>
				</CustomBehavior>
			</If>
			<CustomBehavior File="InteractWith" MobId="107680" PreInteractMountStrategy="Dismount" QuestId="42596" QuestObjectiveIndex="1" TerminateWhen="Me.HasAura(214322)" >
				<HuntingGrounds>
					<Hotspot X="4088.927" Y="4247.219" Z="752.7471" />
					<Hotspot X="4015.575" Y="4266.288" Z="786.8982" />
					<Hotspot X="3980.571" Y="4194.148" Z="823.0579" />
					<Hotspot X="3962.082" Y="4149.36" Z="858.9806" />
				</HuntingGrounds>
			</CustomBehavior>
			<CustomBehavior File="FlyTo" MovementBy="NavigatorOnly" X="4113.937" Y="4291.494" Z="768.3278" TerminateAtMaxRunTimeSecs="20" />
			<!-- Need a MoveTo that can be terminated, the termination above allows us to shut off the movement if the vehicle gets stuck on a rock - which antistuck can't get us out of since we're in a vehicle. -->
			<EnableBehavior Name="Combat" />
		</While>
		<TurnIn QuestName="Mountainstrider Round-Up" QuestId="42596" TurnInName="Liza Galestride" TurnInId="97854" X="4113.577" Y="4297.513" Z="768.2068" />

		<PickUp QuestName="Ceremonial Drums" QuestId="42622" GiverName="Torv Dubstomp" GiverId="108017" X="4050.932" Y="4385.313" Z="667.7917" />
		<While Condition="DoQuest(42622)" >
			<CustomBehavior File="InteractWith" MobIds="250903, 250904" NonCompeteDistance="0" QuestId="42622" NumOfTimes="150" TerminateWhen="IsObjectiveComplete(1, 42622) &amp;&amp; IsObjectiveComplete(2, 42622)" >
				<HuntingGrounds>
					<Hotspot X="4055.62" Y="4357.297" Z="667.7882" />
					<Hotspot X="4119.651" Y="4405.478" Z="667.772" />
					<Hotspot X="4070.21" Y="4323.455" Z="675.4371" />
					<Hotspot X="4017.157" Y="4306.525" Z="767.7835" />
					<Hotspot X="4099.75" Y="4413.017" Z="768.3077" />
					<Hotspot X="3921.528" Y="4442.467" Z="774.572" />
					<Hotspot X="3891.333" Y="4508.189" Z="776.5634" />
					<Hotspot X="4274.27" Y="4250.2" Z="737.8741" />
				</HuntingGrounds>
			</CustomBehavior>
			<CustomBehavior File="InteractWith" MobState="Dead" NonCompeteDistance="0" QuestId="42622" QuestObjectiveIndex="3" >
				<HuntingGrounds>
					<Hotspot X="4030.988" Y="4410.811" Z="768.4072" />
					<Hotspot X="4082.007" Y="4424.611" Z="768.4112" />
					<Hotspot X="4128.448" Y="4398.173" Z="768.3737" />
					<Hotspot X="4085.128" Y="4308.399" Z="768.3838" />
					<Hotspot X="4017.051" Y="4354.093" Z="768.3786" />
					<Hotspot X="3916.959" Y="4467.306" Z="776.0771" />
					<Hotspot X="4274.27" Y="4250.2" Z="737.8741" />
				</HuntingGrounds>
				<PursuitList>
					<PursueGameObject Priority="100" Id="250905" />
					<PursueUnit Priority="1" Id="108145" PursueWhen="UNIT.IsAlive" />
				</PursuitList>
			</CustomBehavior>
		</While>
		<TurnIn QuestName="Ceremonial Drums" QuestId="42622" TurnInName="Torv Dubstomp" TurnInId="108017" X="4050.932" Y="4385.313" Z="667.7917" />


		<PickUp QuestName="Battle of Snowblind Mesa" QuestId="38915" GiverName="Mayla Highmountain" GiverId="108434" X="4083.142" Y="4385.414" Z="670.6258" /> <!-- Breadcrumb for Battle of Snowblind Mesa -->
		<!-- <PickUp QuestName="An Offering of Ammo" QuestId="40217" GiverName="Shale Greyfeather" GiverId="99905" X="4106.347" Y="4405.938" Z="768.1934" /> Breadcrumb for Nesignwary quests. -->

	<!-- Warbrave Nava Side Quests -->
		<PickUp QuestName="Wrathshard" QuestId="39134" GiverName="Warbrave Nava" GiverId="94561" X="4358.083" Y="4222.979" Z="731.0326" />
		<PickUp QuestName="No Time to Talk" QuestId="39133" GiverName="Warbrave Nava" GiverId="94561" X="4358.083" Y="4222.979" Z="731.0326" />

		<CustomBehavior File="KillUntilComplete" MobId="94509" QuestId="39134" QuestObjectiveIndex="1" X="4396.81" Y="3871.067" Z="741.3825" />
		<CustomBehavior File="KillUntilComplete" MobIds="94507" QuestId="39133" QuestObjectiveIndex="1" >
			<HuntingGrounds>
				<Hotspot X="4391.395" Y="4211.063" Z="738.668" />
				<Hotspot X="4490.022" Y="4080.627" Z="743.5096" />
				<Hotspot X="4423.121" Y="4005.052" Z="743.233" />
				<Hotspot X="4440.132" Y="3952.695" Z="711.6587" />
			</HuntingGrounds>
		</CustomBehavior>

		<TurnIn QuestName="No Time to Talk" QuestId="39133" TurnInName="Warbrave Nava" TurnInId="94561" X="4358.083" Y="4222.979" Z="731.0326" />
		<TurnIn QuestName="Wrathshard" QuestId="39134" TurnInName="Warbrave Nava" TurnInId="94561" X="4358.083" Y="4222.979" Z="731.0326" />
	<!-- END Warbrave Naga Side Quests -->

	<!-- Story: Battle of Snowblind Mesa -->
		<TurnIn QuestName="Battle of Snowblind Mesa" QuestId="38915" TurnInName="Mayla Highmountain" TurnInId="93846" X="3944.177" Y="3922.587" Z="905.1755" />

		<PickUp QuestName="Battle Worms" QuestId="39776" GiverName="Mayla Highmountain" GiverId="93846" X="3944.177" Y="3922.587" Z="905.1755" />
		<PickUp QuestName="Buy Us Time" QuestId="39777" GiverName="Jale Rivermane" GiverId="97344" X="3946.407" Y="3916.945" Z="905.1759" />
		<PickUp QuestName="The Siegebrul" QuestId="39862" GiverName="Navarrogg" GiverId="97301" X="3941.136" Y="3915.171" Z="905.1761" />

		<CustomBehavior File="Hooks\DoWhen" ActivityName="SummonHelpers" AllowUseDuringCombat="true" LogExecution="false" UseAtInterval="5000" >
			<If Condition="Me.CurrentTarget != null &amp;&amp; Me.CurrentTarget.IsAlive &amp;&amp; (Me.CurrentTarget.Entry == 99217 || Me.CurrentTarget.Entry == 99216 || Me.CurrentTarget.Entry == 97013)" >
				<CustomBehavior File="Misc\RunLua" Lua="ExtraActionButton1:Click();" />
			</If>
		</CustomBehavior>

		<CustomBehavior File="KillUntilComplete" MobId="99217" QuestId="39776" QuestObjectiveIndex="1" X="4206.714" Y="3944.478" Z="915.8086" />
		<CustomBehavior File="KillUntilComplete" MobId="97546" QuestId="39862" QuestObjectiveIndex="1" X="4266.639" Y="3962.442" Z="939.8129" />
		<CustomBehavior File="KillUntilComplete" MobId="97013" QuestId="39776" QuestObjectiveIndex="3" X="4282.72" Y="3877.282" Z="941.5201" />
		<CustomBehavior File="KillUntilComplete" MobId="99216" QuestId="39776" QuestObjectiveIndex="2" X="4184.425" Y="3827.324" Z="912.4977" />

		<CustomBehavior File="Hooks\DoWhen" ActivityName="SummonHelpers" Command="Remove" />


		<While Condition="DoQuest(39777)" >
			<CustomBehavior File="KillUntilComplete" MobIds="96690, 96691" QuestId="39777" QuestObjectiveIndex="1" >
				<HuntingGrounds>
					<Hotspot X="4144.368" Y="3833.892" Z="913.0787" />
					<Hotspot X="4125.081" Y="3914.817" Z="901.1848" />
					<Hotspot X="4016.092" Y="3917.235" Z="903.1" />
					<Hotspot X="4029.489" Y="3951.152" Z="890.1929" />
					<Hotspot X="4133.103" Y="3977.3" Z="888.8749" />
				</HuntingGrounds>
			</CustomBehavior>
		</While>

		<DisableBehavior Name="Pull" />
		<TurnIn QuestName="The Siegebrul" QuestId="39862" TurnInName="Navarrogg" TurnInId="97301" X="3941.136" Y="3915.171" Z="905.176" />
		<TurnIn QuestName="Buy Us Time" QuestId="39777" TurnInName="Jale Rivermane" TurnInId="97344" X="3946.407" Y="3916.945" Z="905.176" />
		<TurnIn QuestName="Battle Worms" QuestId="39776" TurnInName="Mayla Highmountain" TurnInId="93846" X="3944.177" Y="3922.587" Z="905.1754" />
		<EnableBehavior Name="Pull" />

		<PickUp QuestName="Evacuate Snowmane" QuestId="42088" GiverName="Mayla Highmountain" GiverId="93846" X="3944.177" Y="3922.587" Z="905.1754" />
		<While Condition="DoQuest(42088)" >
			<CustomBehavior File="InteractWith" MobId="106153" GossipOptions="1" QuestId="42088" QuestObjectiveIndex="2" X="3799.688" Y="3919.536" Z="915.9227" />
			<CustomBehavior File="InteractWith" MobId="106115" GossipOptions="1" QuestId="42088" QuestObjectiveIndex="1" X="3821.014" Y="4012.692" Z="898.3751" />
			<CustomBehavior File="InteractWith" MobId="106191" GossipOptions="1" QuestId="42088" QuestObjectiveIndex="3" X="3687.918" Y="3918.762" Z="988.7416" />
		</While>
		<TurnIn QuestName="Evacuate Snowmane" QuestId="42088" TurnInName="Mayla Highmountain" TurnInId="93846" X="3856.439" Y="3992.633" Z="896.3563" />

		<PickUp QuestName="Highmountain Stands" QuestId="42512" GiverName="Mayla Highmountain" GiverId="93846" X="3856.439" Y="3992.633" Z="896.3563" />
		<While Condition="DoQuest(42512)" >
			<MoveTo QuestId="42512" QuestObjectiveIndex="1" X="3870.962" Y="3886.591" Z="901.2258" />
			<CustomBehavior File="RunCode" Code="await SkipCutscene();" />
		</While>
		<TurnIn QuestName="Highmountain Stands" QuestId="42512" TurnInName="Lasan Skyhorn" TurnInId="97407" X="3926.542" Y="3924.102" Z="905.2615" />

		<PickUp QuestName="Justice Rains from Above" QuestId="40594" GiverName="Lasan Skyhorn" GiverId="97407" X="3926.542" Y="3924.102" Z="905.2615" />
		<While Condition="DoQuest(40594)" >
			<If Condition="!Me.InVehicle" >
				<CustomBehavior File="InteractWith" MobId="100712" QuestId="40594" X="3931.498" Y="3929.8" Z="905.2336" />
			</If>
			<CustomBehavior File="Vehicles\NoControlVehicle" QuestId="40594" TargetId1="97217" TargetId2="97235" AttackButton="1" OftenToUse="2000" VehicleId="100711" MaxRange="100" />
		</While>
		<While Condition="QuestDone(40594)" >
			<MoveTo X="3721.273" Y="3931.289" Z="915.0441" />
			<If Condition="Unit(97407) != null &amp;&amp; QuestDone(40594)" >
				<TurnIn QuestName="Justice Rains from Above" QuestId="40594" TurnInName="Lasan Skyhorn" TurnInId="97407" X="3721.273" Y="3931.289" Z="915.0441" />
			</If>
			<If Condition="QuestDone(40594)" >
				<TurnIn QuestName="Justice Rains from Above" QuestId="40594" TurnInName="Lasan Skyhorn" TurnInId="97407" X="3721.273" Y="3931.289" Z="915.044" />
			</If>
		</While>

		<PickUp QuestName="The Underking" QuestId="39780" GiverName="Lasan Skyhorn" GiverId="97407" X="3721.273" Y="3931.289" Z="915.0441" />
		<While Condition="DoQuest(39780)" >
			<CustomBehavior File="InteractWith" MobId="97352" QuestId="39780" QuestObjectiveIndex="1" X="3654.333" Y="3928.675" Z="906.7861" />
			<CustomBehavior File="KillUntilComplete" MobId="97266" QuestId="39780" QuestObjectiveIndex="2" X="3644.132" Y="3928.645" Z="906.3824" />
		</While>
		<TurnIn QuestName="The Underking" QuestId="39780" TurnInName="Mayla Highmountain" TurnInId="93846" X="3662.013" Y="3928.4" Z="906.681" />
	<!-- END Story: Battle of Snowblind Mesa -->

		<PickUp QuestName="Neltharion's Lair" QuestId="39781" GiverName="Mayla Highmountain" GiverId="93846" X="3662.013" Y="3928.4" Z="906.681" /> <!-- PickUp dungeon quest. -->
		<!-- Highmountain is done story-wise from this point.  But there's some more quests we're going to do. -->

	<!-- SideQuests: Nesingwary's Retreat -->
		<If Condition="HasQuest(40217)" >
			<TurnIn QuestName="An Offering of Ammo" QuestId="40217" TurnInName="Hemet Nesingwary" TurnInId="94409" X="4500.406" Y="4858.703" Z="661.8898" />
		</If>

		<PickUp QuestName="Amateur Hour" QuestId="40170" GiverName="Hemet Nesingwary" GiverId="94409" X="4500.406" Y="4858.703" Z="661.8898" />
		<PickUp QuestName="Note-Eating Goats" QuestId="39859" GiverName="Addie Fizzlebog" GiverId="94434" X="4501.019" Y="4866.559" Z="662.0485" />

		<CustomBehavior File="InteractWith" MobIds="96591, 98808" QuestId="40170" QuestObjectiveIndex="1" InteractByGossipOptions="1" >
			<HuntingGrounds>
				<Hotspot X="4473.76" Y="4797.701" Z="658.9086" />
				<Hotspot X="4411.5" Y="4773.652" Z="654.4877" /> 
				<Hotspot X="4551.579" Y="4794.254" Z="669.1888" />
				<Hotspot X="4458.153" Y="4708.652" Z="649.8495" />
			</HuntingGrounds>
		</CustomBehavior>

		<CustomBehavior File="KillUntilComplete" MobId="98808" QuestId="39859" QuestObjectiveIndex="1" >
			<HuntingGrounds>
				<Hotspot X="4473.76" Y="4797.701" Z="658.9086" />
				<Hotspot X="4411.5" Y="4773.652" Z="654.4877" /> 
				<Hotspot X="4551.579" Y="4794.254" Z="669.1888" />
				<Hotspot X="4458.153" Y="4708.652" Z="649.8495" />
			</HuntingGrounds>
		</CustomBehavior>



		<TurnIn QuestName="Amateur Hour" QuestId="40170" TurnInName="Hemet Nesingwary" TurnInId="94409" X="4500.406" Y="4858.703" Z="661.8903" />
		<TurnIn QuestName="Note-Eating Goats" QuestId="39859" TurnInName="Hemet Nesingwary" TurnInId="94409" X="4500.406" Y="4858.703" Z="661.8903" />

		<PickUp QuestName="A Hunter at Heart" QuestId="40216" GiverName="Hemet Nesingwary" GiverId="94409" X="4500.406" Y="4858.703" Z="661.8903" />
		<PickUp QuestName="Lion Stalkin'" QuestId="39123" GiverName="Hemet Nesingwary" GiverId="94409" X="4500.406" Y="4858.703" Z="661.8903" />
		<PickUp QuestName="Moose Shootin'" QuestId="39124" GiverName="Hemet Nesingwary" GiverId="94409" X="4500.406" Y="4858.703" Z="661.8903" />
		<PickUp QuestName="Bear Huntin'" QuestId="39392" GiverName="Hemet Nesingwary" GiverId="94409" X="4500.406" Y="4858.703" Z="661.8903" />

		<While Condition="DoQuest(40216, 39123, 39124, 39392)" >
			<!-- NOTE: <AddFailsafe> : Can detect if Addie is nearby by checking the HasAura.  May need to use this interactwith if she disapears. 
						194963
			-->
			<CustomBehavior File="InteractWith" MobId="94434" GossipOptions="1" QuestId="40216" QuestObjectiveIndex="1" X="4501.019" Y="4866.559" Z="662.0496" />

			<CustomBehavior File="KillUntilComplete" MobId="94151" QuestId="39124" QuestObjectiveIndex="1" >
				<HuntingGrounds>
					<Hotspot X="4425.542" Y="4668.432" Z="651.3508" />
					<Hotspot X="4572.676" Y="4664.5" Z="670.3569" />
					<Hotspot X="4545.864" Y="4581.248" Z="678.6174" />
					<Hotspot X="4600.127" Y="4518.751" Z="683.9646" />
					<Hotspot X="4722.389" Y="4568.881" Z="685.6401" />
				</HuntingGrounds>
			</CustomBehavior>

			<CustomBehavior File="KillUntilComplete" MobId="94149" QuestId="39123" QuestObjectiveIndex="1" >
				<HuntingGrounds>
					<Hotspot X="4586.22" Y="4654.041" Z="671.7511" />
					<Hotspot X="4657.758" Y="4702.048" Z="680.5712" />
					<Hotspot X="4577.381" Y="4764.453" Z="675.0428" />
					<Hotspot X="4635.454" Y="4900.287" Z="700.4786" />
					<Hotspot X="4688.603" Y="4971.055" Z="728.9846" />
				</HuntingGrounds>
			</CustomBehavior>

			<CustomBehavior File="KillUntilComplete" MobIds="96146, 99571" QuestId="39392" QuestObjectiveIndex="1" >
				<HuntingGrounds>
					<Hotspot X="4818.637" Y="5093.706" Z="773.2156" />
					<Hotspot X="4933.624" Y="5091.12" Z="783.2698" />
					<Hotspot X="4954.339" Y="5020.648" Z="785.8166" />
					<Hotspot X="5019.267" Y="4983.726" Z="777.357" />
				</HuntingGrounds>
			</CustomBehavior>


			<CustomBehavior File="KillUntilComplete" MobId="94149" QuestId="40216" >
				<HuntingGrounds>
					<Hotspot X="4586.22" Y="4654.041" Z="671.7511" />
					<Hotspot X="4657.758" Y="4702.048" Z="680.5712" />
					<Hotspot X="4577.381" Y="4764.453" Z="675.0428" />
					<Hotspot X="4635.454" Y="4900.287" Z="700.4786" />
					<Hotspot X="4688.603" Y="4971.055" Z="728.9846" />
				</HuntingGrounds>
			</CustomBehavior>
		</While>

		<TurnIn QuestName="A Hunter at Heart" QuestId="40216" TurnInName="Hemet Nesingwary" TurnInId="94409" X="4500.406" Y="4858.703" Z="661.8901" />
		<TurnIn QuestName="Lion Stalkin'" QuestId="39123" TurnInName="Hemet Nesingwary" TurnInId="94409" X="4500.406" Y="4858.703" Z="661.8901" />
		<TurnIn QuestName="Moose Shootin'" QuestId="39124" TurnInName="Hemet Nesingwary" TurnInId="94409" X="4500.406" Y="4858.703" Z="661.8901" />
		<TurnIn QuestName="Bear Huntin'" QuestId="39392" TurnInName="Hemet Nesingwary" TurnInId="94409" X="4500.406" Y="4858.703" Z="661.8901" />

		<PickUp QuestName="Scout It Out" QuestId="40228" GiverName="Hemet Nesingwary" GiverId="94409" X="4500.406" Y="4858.703" Z="661.8901" />
		<While Condition="DoQuest(40228)" >
			<MoveTo X="4849.4" Y="4613.782" Z="761.7373" />
			<CustomBehavior	File="UseItem" ItemId="130074" QuestId="40228" />
			<CustomBehavior File="WaitTimer" WaitTime="10000" QuestId="40228" QuestObjectiveIndex="1" TerminateWhen="Unit(95762) != null" />
			<CustomBehavior File="KillUntilComplete" MobId="95762" QuestId="40228" QuestObjectiveIndex="1" X="4862.219" Y="4596.333" Z="753.0921" TerminateWhen="Unit(95762) == null" />
		</While>
		<TurnIn QuestName="Scout It Out" QuestId="40228" TurnInName="Hemet Nesingwary" TurnInId="94409" X="4500.406" Y="4858.703" Z="661.8901" />

		<PickUp QuestName="Procuring a Prototype" QuestId="39386" GiverName="Hemet Nesingwary" GiverId="94409" X="4500.406" Y="4858.703" Z="661.8901" /> <!-- SideQuests: Shipwreck Cove breadcrumb -->
		<If Condition="NeedsQuest(40045)" > <!-- First quest in the hub. Prevent the breadcrumb from being eaten if we don't need it. -->
			<PickUp QuestName="That Guy in the Costume" QuestId="40244" GiverName="Hemet Nesingwary" GiverId="94409" X="4500.406" Y="4858.703" Z="661.8901" /> <!-- SideQuests: Icepine Point breadcrumb -->
		</If>
	<!-- END SideQuests: Nesingwary's Retreat -->

	<!-- Side Quests -->
		<PickUp QuestName="Hex-a-Gone" QuestId="39419" GiverName="Maltha Silenthoof" GiverId="94522" X="4700.738" Y="4353.918" Z="696.7762" />
		<While Condition="DoQuest(39419)" >
			<CustomBehavior File="KillUntilComplete" MobId="95693" QuestId="39419" QuestObjectiveIndex="1" X="4655.96" Y="4455.82" Z="677.0331" />
		</While>
		<TurnIn QuestName="Hex-a-Gone" QuestId="39419" TurnInName="Maltha Silenthoof" TurnInId="94522" X="4700.738" Y="4353.918" Z="696.7767" />

		<If Condition="!IsQuestCompleted(40316) &amp;&amp; !QuestFlaggedCompleted(40316) &amp;&amp; Me.Level &lt; 110" > <!-- Bonus Objective: The Screeching Crag -->
			<CustomBehavior File="InteractWith" MobState="AliveNotInCombat" InteractByLooting="true" NonCompeteDistance="0" NumOfTimes="100" TerminateWhen="IsQuestCompleted(40316) || QuestFlaggedCompleted(40316)" >
				<HuntingGrounds>
					<Hotspot X="4706.289" Y="4417.684" Z="681.9456" />
					<Hotspot X="4696.113" Y="4368.797" Z="693.1154" />
					<Hotspot X="4701.405" Y="4446.627" Z="677.4445" />
					<Hotspot X="4745.133" Y="4483.751" Z="689.5703" />
					<Hotspot X="4861.904" Y="4475.201" Z="727.6718" />
				</HuntingGrounds>
				<PursuitList>
					<PursueGameObject Id="104531" />
					<PursueUnit Id="94153" PursueWhen="(UNIT.IsAlive || UNIT.Lootable) &amp;&amp; !UNIT.TaggedByOther" />
					<PursueUnit Id="94152" PursueWhen="(UNIT.IsAlive || UNIT.Lootable) &amp;&amp; !UNIT.TaggedByOther" />
					<PursueUnit Id="94386" PursueWhen="(UNIT.IsAlive || UNIT.Lootable) &amp;&amp; !UNIT.TaggedByOther" />
					<PursueUnit Id="94196" PursueWhen="(UNIT.IsAlive || UNIT.Lootable) &amp;&amp; !UNIT.TaggedByOther" />
				</PursuitList>
			</CustomBehavior>
		</If>
	<!-- END Side Quests -->

	<!-- Oren Windstrider Side Quests -->
		<PickUp QuestName="Fledgling Worm Guts" QuestId="40069" GiverName="Oren Windstrider" GiverId="94068" X="5239.339" Y="4091.351" Z="770.8594" />
		<PickUp QuestName="Eagle Egg Recovery" QuestId="40070" GiverName="Oren Windstrider" GiverId="94068" X="5239.339" Y="4091.351" Z="770.8594" />
		<PickUp QuestName="Tamer Takedown" QuestId="40071" GiverName="Oren Windstrider" GiverId="94068" X="5239.339" Y="4091.351" Z="770.8594" />

		<While Condition="DoQuest(40071)" >
			<CustomBehavior File="KillUntilComplete" MobId="94051" QuestId="40071" QuestObjectiveIndex="1" X="4970.82" Y="4217.482" Z="690.6464" />
		</While>

		<While Condition="DoQuest(40070)" >
			<CustomBehavior File="InteractWith" MobId="244841" InteractByLooting="true" NonCompeteDistance="0" QuestId="40070" QuestObjectiveIndex="1" >
				<HuntingGrounds>
					<Hotspot X="5178.515" Y="4204.079" Z="691.7864" />
					<Hotspot X="5228.483" Y="4160.787" Z="699.9973" />
					<Hotspot X="5301.845" Y="4114.416" Z="700.6886" />
				</HuntingGrounds>
			</CustomBehavior>
		</While>

		<While Condition="DoQuest(40069)" >
			<CustomBehavior File="KillUntilComplete" MobId="98038" QuestId="40069" QuestObjectiveIndex="1" >
				<HuntingGrounds>
					<Hotspot X="5241.493" Y="4234.153" Z="703.0239" />
					<Hotspot X="5296.711" Y="4139.164" Z="700.6877" />
					<Hotspot X="5218.102" Y="4095.878" Z="700.6882" />
					<Hotspot X="5196.881" Y="4216.636" Z="696.0438" />
				</HuntingGrounds>
			</CustomBehavior>
		</While>

		<TurnIn QuestName="Fledgling Worm Guts" QuestId="40069" TurnInName="Oren Windstrider" TurnInId="94068" X="5113.545" Y="4194.126" Z="684.139" />
		<TurnIn QuestName="Eagle Egg Recovery" QuestId="40070" TurnInName="Oren Windstrider" TurnInId="94068" X="5113.545" Y="4194.126" Z="684.139" />
		<TurnIn QuestName="Tamer Takedown" QuestId="40071" TurnInName="Oren Windstrider" TurnInId="94068" X="5113.545" Y="4194.126" Z="684.139" />

		<PickUp QuestName="Going Down, Going Up" QuestId="42425" GiverName="Oren Windstrider" GiverId="94068" X="5113.545" Y="4194.126" Z="684.1389" />
		<While Condition="DoQuest(42425)" >
			<DisableBehavior Name="Combat" />
			<CustomBehavior File="InteractWith" MobId="107415" NonCompeteDistance="0" X="5110.403" Y="4194.36" Z="684.1993"/>
			<CustomBehavior File="InteractWith" MobId="250413" InteractByLooting="true" MovementBy="None" NonCompeteDistance="0" InteractBlacklistTimeInSeconds="1" QuestId="42425" QuestObjectiveIndex="1" X="5114.13" Y="4199.023" Z="437.4173" />
			<EnableBehavior Name="Combat" />
		</While>
		<TurnIn QuestName="Going Down, Going Up" QuestId="42425" TurnInName="Oren Windstrider" TurnInId="94068" X="5113.545" Y="4194.126" Z="684.1389" />

		<PickUp QuestName="Empty Nest" QuestId="39305" GiverName="Oren Windstrider" GiverId="94068" X="5113.545" Y="4194.126" Z="684.139" />
		<While Condition="DoQuest(39305)" >
			<MoveTo Precision="1" X="5241.523" Y="4030.749" Z="823.0322" />
			<CustomBehavior File="MyCTM" X="5229.307" Y="4039.607" Z="822.4366" />
			<CustomBehavior File="InteractWith" MobId="244419" QuestId="39305" QuestObjectiveIndex="1" X="5227.337" Y="4035.431" Z="823.1758" />
			<CustomBehavior File="MyCTM" X="5235.256" Y="4010.261" Z="814.8018" />
		</While>
		<TurnIn QuestName="Empty Nest" QuestId="39305" TurnInName="Oren Windstrider" TurnInId="94068" X="5239.339" Y="4091.351" Z="770.8593" />
	<!-- END Oren Windstrider Side Quests -->

	<!-- SideQuests: Shipwreck Cove -->
		<While Condition="DoQuest(40244)" >
			<CustomBehavior File="InteractWith" MobId="94973" GossipOptions="1" QuestId="40244" QuestObjectiveIndex="1" X="4479.038" Y="4845.356" Z="662.822" />
		</While>
		<TurnIn QuestName="That Guy in the Costume" QuestId="40244" TurnInName="King Mrgl-Mrgl" TurnInId="98067" X="6447.201" Y="4667.913" Z="13.13865" />

		<PickUp QuestName="Nature vs. Nurture" QuestId="40045" GiverName="King Mrgl-Mrgl" GiverId="98067" X="6447.201" Y="4667.913" Z="13.13865" />
		<PickUp QuestName="I'll Huff, I'll Puff..." QuestId="40047" GiverName="King Mrgl-Mrgl" GiverId="98067" X="6447.201" Y="4667.913" Z="13.13865" />
		<PickUp QuestName="Slime Time" QuestId="40049" GiverName="King Mrgl-Mrgl" GiverId="98067" X="6447.201" Y="4667.913" Z="13.13865" />

		<While Condition="DoQuest(40045)" >
			<CustomBehavior File="InteractWith" MobIds="98046" NumOfTimes="10" QuestId="40045" QuestObjectiveIndex="1" >
				<HuntingGrounds>
					<Hotspot X="6558.298" Y="4579.138" Z="0.3649234" />
					<Hotspot X="6606.302" Y="4532.553" Z="2.193296" />
				</HuntingGrounds>
			</CustomBehavior>
		</While>

		<While Condition="DoQuest(40049)" >
			<CustomBehavior File="InteractWith" MobIds="99173" Range="1" QuestId="40049" QuestObjectiveIndex="1" >
				<HuntingGrounds>
					<Hotspot X="6601.702" Y="4506.358" Z="-0.05986659"/>
					<Hotspot X="6542.439" Y="4527.12" Z="0.07956004" />
					<Hotspot X="6534.744" Y="4619.489" Z="-0.2430591" />
					<Hotspot X="6606.11" Y="4642.431" Z="-0.3817267" />
				</HuntingGrounds>
			</CustomBehavior>
		</While>

		<While Condition="DoQuest(40047)" >
			<CustomBehavior File="KillUntilComplete" MobId="98037" QuestId="40047" QuestObjectiveIndex="1" >
				<HuntingGrounds>
					<Hotspot X="6648.519" Y="4502.321" Z="-1.564462" />
					<Hotspot X="6659.67" Y="4541.653" Z="-1.524497" />
				</HuntingGrounds>
			</CustomBehavior>
		</While>

		<While Condition="!IsQuestCompleted(40050) &amp;&amp; Me.Level &lt; 110" > <!-- Bonus Objective: Shipwreck Cove -->
			<CustomBehavior File="InteractWith" MobState="Dead" NumOfTimes="100" TerminateWhen="IsQuestCompleted(40050)" >
				<HuntingGrounds>
					<Hotspot X="6549.021" Y="4641.655" Z="2.444716" />
					<Hotspot X="6478.498" Y="4581.215" Z="3.787579" />
					<Hotspot X="6581.625" Y="4560.955" Z="-0.2623894" />
					<Hotspot X="6560.754" Y="4480.689" Z="0.8049188" />
					<Hotspot X="6509.261" Y="4498.851" Z="3.715424" />
					<Hotspot X="6642.09" Y="4437.276" Z="9.893691" />
				</HuntingGrounds>
				<PursuitList>
					<PursueGameObject Id="245350" />
					<PursueUnit Id="97919" PursueWhen="(UNIT.IsAlive || UNIT.Lootable) &amp;&amp; !UNIT.TaggedByOther" />
					<PursueUnit Id="97920" PursueWhen="(UNIT.IsAlive || UNIT.Lootable) &amp;&amp; !UNIT.TaggedByOther" />
				</PursuitList>
			</CustomBehavior>
		</While>

		<TurnIn QuestName="Nature vs. Nurture" QuestId="40045" TurnInName="King Mrgl-Mrgl" TurnInId="98067" X="6447.201" Y="4667.913" Z="13.13795" />
		<TurnIn QuestName="I'll Huff, I'll Puff..." QuestId="40047" TurnInName="King Mrgl-Mrgl" TurnInId="98067" X="6447.201" Y="4667.913" Z="13.13795" />
		<TurnIn QuestName="Slime Time" QuestId="40049" TurnInName="King Mrgl-Mrgl" TurnInId="98067" X="6447.201" Y="4667.913" Z="13.13795" />

		<PickUp QuestName="Murlocs: The Next Generation" QuestId="40102" GiverName="King Mrgl-Mrgl" GiverId="98067" X="6447.201" Y="4667.913" Z="13.13795" />
		<PickUp QuestName="Oh, the Clawdacity!" QuestId="40230" GiverName="King Mrgl-Mrgl" GiverId="98067" X="6447.201" Y="4667.913" Z="13.13795" />

		<While Condition="DoQuest(40102, 40230)" >
			<DisableBehavior Name="Combat" />
			<If Condition="Me.GotAlivePet" >
				<CustomBehavior File="RunCode"><![CDATA[
						Lua.DoString("PetDismiss();");
						SpellManager.Cast("Dismiss Pet");
						await Coroutine.Sleep(3250);
					]]>
				</CustomBehavior>
			</If>
			<CustomBehavior File="InteractWith" MobId="89630" X="6448.142" Y="4665.566" Z="13.05069" TerminateWhen="Me.InVehicle" />
			<DisableBehavior Name="All" />

			<While Condition="!IsQuestCompleted(40230)">
				<CustomBehavior File="RunCode" Code="
					await VehicleMove(new WoWPoint(6218.297, 4186.135, 70.21992)); 
					await VehicleKill(98809);
				"/>
			</While>

			<While Condition="!IsQuestCompleted(40102)">
				<CustomBehavior File="RunCode" Code="
					await VehicleMove(new WoWPoint(6322.653, 4166.996, 63.89966));
					await VehicleMove(new WoWPoint(6313.804, 4131.534, 75.48457));
					await VehicleMove(new WoWPoint(6382.318, 4181.017, 55.30469));
					await VehicleMove(new WoWPoint(6380.356, 4283.081, 53.94374));
					await VehicleMove(new WoWPoint(6322.938, 4259.594, 69.88808));
					await VehicleMove(new WoWPoint(6325.959, 4226.841, 65.20913));
				"/>
			</While>

			<CustomBehavior File="RunCode" Code="await VehicleMove(new WoWPoint(6218.297, 4186.135, 70.21992)); "/>
			<CustomBehavior File="EjectVeh" />
			<EnableBehavior Name="All" />
		</While>
		<TurnIn QuestName="Murlocs: The Next Generation" QuestId="40102" TurnInName="King Mrgl-Mrgl" TurnInId="98067" X="6210.309" Y="4184.444" Z="70.66591" />
		<TurnIn QuestName="Oh, the Clawdacity!" QuestId="40230" TurnInName="King Mrgl-Mrgl" TurnInId="98067" X="6210.309" Y="4184.444" Z="70.66591" />
	<!-- END SideQuests: Shipwreck Cove -->

	<!-- SideQuests: Icepine Point -->
		<TurnIn QuestName="Procuring a Prototype" QuestId="39386" TurnInName="Razik Gazbolt" TurnInId="96513" X="4294.724" Y="3614.605" Z="898.6747" />
		
		<PickUp QuestName="Critter Scatter Shot" QuestId="39670" GiverName="Razik Gazbolt" GiverId="96513" X="4294.724" Y="3614.605" Z="898.6747" />
		<PickUp QuestName="A True Hunter" QuestId="40000" GiverName="Lorna Stoutfoot" GiverId="97974" X="4304.073" Y="3617.26" Z="898.8616" />

		<CustomBehavior File="InteractWith" MobIds="96548" MobState="Alive" QuestId="39670" QuestObjectiveIndex="1" >
			<HuntingGrounds>
				<Hotspot X="4025.184" Y="3688.139" Z="875.8091" />
				<Hotspot X="4008.913" Y="3730.467" Z="878.7299" />
				<Hotspot X="4073.551" Y="3766.832" Z="875.8695" />
				<Hotspot X="4166.058" Y="3640.896" Z="885.9991" />
			</HuntingGrounds>
		</CustomBehavior>

		<CustomBehavior File="KillUntilComplete" MobIds="97976, 103592" QuestId="40000" QuestObjectiveIndex="1" >
			<HuntingGrounds>
				<Hotspot X="4025.184" Y="3688.139" Z="875.8091" />
				<Hotspot X="4008.913" Y="3730.467" Z="878.7299" />
				<Hotspot X="4073.551" Y="3766.832" Z="875.8695" />
				<Hotspot X="4166.058" Y="3640.896" Z="885.9991" />
			</HuntingGrounds>
		</CustomBehavior>

		<TurnIn QuestName="A True Hunter" QuestId="40000" TurnInName="Lorna Stoutfoot" TurnInId="97974" X="4304.073" Y="3617.26" Z="898.8616" />
		<TurnIn QuestName="Critter Scatter Shot" QuestId="39670" TurnInName="Razik Gazbolt" TurnInId="96513" X="4294.724" Y="3614.605" Z="898.6751" />

		<PickUp QuestName="Wolf Pack Attack" QuestId="39656" GiverName="Razik Gazbolt" GiverId="96513" X="4294.724" Y="3614.605" Z="898.6751" />
		<If Condition="DoQuest(39656)" >
			<CustomBehavior File="Hooks\DoWhen" ActivityName="CritterHandCannon" LogExecution="false" AllowUseDuringCombat="true" UseAtInterval="5000" >
				<CustomBehavior File="RunCode"><![CDATA[
						var packLeader = Unit(97957, u => u.Aggro && u.CurrentTarget.IsMe);
						var howler = Unit(98273, u => u.Aggro && u.CurrentTarget.IsMe);
						if (packLeader != null && howler != null) 
						{
							Bots.Grind.LevelBot.BehaviorFlags &= ~Bots.Grind.BehaviorFlags.Combat;
							WoWItem handCannon = StyxWoW.Me.BagItems.FirstOrDefault(i => i.Entry == 128651);
							handCannon.Use();
							await Coroutine.Sleep(350);
							SpellManager.ClickRemoteLocation(packLeader.Location);
							await Coroutine.Sleep(3250);
							Bots.Grind.LevelBot.BehaviorFlags |= Bots.Grind.BehaviorFlags.Combat;
						}
					]]>
				</CustomBehavior>
			</CustomBehavior> 
		</If>
		<While Condition="DoQuest(39656)" >
			<CustomBehavior File="KillUntilComplete" MobId="97957" QuestId="39656" QuestObjectiveIndex="1" >
				<HuntingGrounds>
					<Hotspot X="4330.51" Y="3744.639" Z="867.6182" />
					<Hotspot X="4392.15" Y="3724.92" Z="874.9041" />
					<Hotspot X="4414.124" Y="3753.873" Z="873.5325" />
					<Hotspot X="4360.146" Y="3711.471" Z="870.327" />
				</HuntingGrounds>
			</CustomBehavior>
		</While>
		<If Condition="QuestDone(39656)" >
			<CustomBehavior File="Hooks\DoWhen" ActivityName="CritterHandCannon" Command="Remove" />
			<TurnIn QuestName="Wolf Pack Attack" QuestId="39656" TurnInName="Razik Gazbolt" TurnInId="96513" X="4294.724" Y="3614.605" Z="898.6747" />
			<CustomBehavior File="UseItem" ItemId="131933" />
		</If>
	<!-- END SideQuests: Icepine Point -->

	<!-- Load Class Hall stuff -->
		<!--
		NOTE <ImproveLater> : This is currently the easy solution.
		I'm thinking a RunCode where Me.Class auto-fills the text with using ProfileManager.LoadNew to load the profilewould be more clean.
		-->
		<If Condition="Me.Class == WoWClass.Warrior" >
			<CustomBehavior File="LoadProfile" ProfileName="Class Hall Loaders/[N-Quest] Warrior [Echo]" />
		</If>
		<If Condition="Me.Class == WoWClass.Paladin" >
			<CustomBehavior File="LoadProfile" ProfileName="Class Hall Loaders/[N-Quest] Paladin [Echo]" />
		</If>
		<If Condition="Me.Class == WoWClass.Hunter" >
			<CustomBehavior File="LoadProfile" ProfileName="Class Hall Loaders/[N-Quest] Hunter [Echo]" />
		</If>
		<If Condition="Me.Class == WoWClass.Rogue" >
			<CustomBehavior File="LoadProfile" ProfileName="Class Hall Loaders/[N-Quest] Rogue [Echo]" />
		</If>
		<If Condition="Me.Class == WoWClass.Priest" >
			<CustomBehavior File="LoadProfile" ProfileName="Class Hall Loaders/[N-Quest] Priest [Echo]" />
		</If>
		<If Condition="Me.Class == WoWClass.DeathKnight" >
			<CustomBehavior File="LoadProfile" ProfileName="Class Hall Loaders/[N-Quest] Death Knight [Echo]" />
		</If>
		<If Condition="Me.Class == WoWClass.Shaman" >
			<CustomBehavior File="LoadProfile" ProfileName="Class Hall Loaders/[N-Quest] Shaman [Echo]" />
		</If>
		<If Condition="Me.Class == WoWClass.Mage" >
			<CustomBehavior File="LoadProfile" ProfileName="Class Hall Loaders/[N-Quest] Mage [Echo]" />
		</If>
		<If Condition="Me.Class == WoWClass.Warlock" >
			<CustomBehavior File="LoadProfile" ProfileName="Class Hall Loaders/[N-Quest] Warlock [Echo]" />
		</If>
		<If Condition="Me.Class == WoWClass.Monk" >
			<CustomBehavior File="LoadProfile" ProfileName="Class Hall Loaders/[N-Quest] Monk [Echo]" />
		</If>
		<If Condition="Me.Class == WoWClass.Druid" >
			<CustomBehavior File="LoadProfile" ProfileName="Class Hall Loaders/[N-Quest] Druid [Echo]" />
		</If>
		<If Condition="Me.Class == WoWClass.DemonHunter" >
			<CustomBehavior File="LoadProfile" ProfileName="Class Hall Loaders/[N-Quest] Demon Hunter [Echo]" />
		</If>
	<!-- END Load Class Hall stuff -->


	</QuestOrder>
</HBProfile>