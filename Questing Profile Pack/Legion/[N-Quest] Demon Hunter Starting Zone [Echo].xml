<HBProfile xsi:noNamespaceSchemaLocation="../Schemas/EchoSchema.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<!-- Original contribution by EchoTiger -->
	<Name>Demon Hunter Starting Zone [Echo]</Name>

	<MinDurability>0.3</MinDurability>
	<MinFreeBagSlots>3</MinFreeBagSlots>

	<SellGrey>true</SellGrey>
	<SellWhite>true</SellWhite>
	<SellGreen>true</SellGreen>
	<SellBlue>true</SellBlue>
	<SellPurple>false</SellPurple>

	<MailGrey>false</MailGrey>
	<MailWhite>true</MailWhite>
	<MailGreen>true</MailGreen>
	<MailBlue>true</MailBlue>
	<MailPurple>true</MailPurple>

	<TargetElites>true</TargetElites>

	<AvoidMobs>
	</AvoidMobs>

	<Blackspots>
	</Blackspots>

	<Blacklist>
	</Blacklist>

	<Mailboxes> 
	</Mailboxes>

	<Vendors>
	</Vendors>

	<InitOrder>
		<!-- Perhaps add detection for loading the class hall if player hasn't unlocked this zone yet. -->
		<CustomBehavior File="Misc\RunLua" Lua="SetCVar('AutoLootDefault', 1)" />

		<CustomBehavior File="EnablePlugin" Names="Anti Drown" />
		<CustomBehavior File="EnablePlugin" Names="Refreshment Detection" />

		<CustomBehavior File="Misc\ProfileCompatibilityInfo" AllowBrokenAddOns="true" AllowBrokenPlugIns="true" />

		<LootMobs Value="true" />
		<TargetingDistance Value="45" /> <!-- Use LevelBot default -->
	</InitOrder>

	<QuestOrder> <!-- No checkpoints here. -->
		<!-- RunCode Methods -->
			<CustomBehavior File="RunCode" Type="Definition"><![CDATA[
					bool DoQuest(params uint[] questIds)
					{
						foreach (var questId in questIds)
						{
							if (HasQuest(questId) && !IsQuestCompleted(questId)) return true;
						}
						return false;
					}
					bool NeedsQuest(params uint[] questIds)
					{
						foreach (var questId in questIds)
						{
							if (!HasQuest(questId) && !IsQuestCompleted(questId)) return true;
						}
						return false;
					}
					bool NeedsBreadcrumbQuest(params uint[] questIds)
					{
						foreach (var questId in questIds)
						{
							if (IsQuestCompleted(questId)) return false;
						}
						return true;
					}
					bool QuestDone(params uint[] questIds)
					{
						foreach (var questId in questIds)
						{
							if (HasQuest(questId) && IsQuestCompleted(questId)) return true;
						}
						return false;
					}

					async Task SkipCutscene(int preWait = 3000, int postWait = 3000)
					{
				// Add detection of cutscene here.
						await Coroutine.Sleep(preWait);
				// Test and improve the working method.
						Lua.DoString("MovieFrame:StopMovie(); CinematicFrame_CancelCinematic(); StopCinematic();");
						await Coroutine.Sleep(postWait);
					}
				]]>
			</CustomBehavior>
		<!-- END RunCode Methods -->


		<!-- Loc: Mardum, the Shattered Abyss -->
			<PickUp QuestName="The Invasion Begins" QuestId="40077" GiverName="Kayn Sunfury" GiverId="93011" X="1179.566" Y="3202.607" Z="51.26041" />
			<While Condition="DoQuest(40077)" >
				<CustomBehavior File="KillUntilComplete" MobIds="98484, 98486, 98482" QuestId="40077" QuestObjectiveIndex="1" >
					<HuntingGrounds>
						<Hotspot X="1035.288" Y="3105.021" Z="3.395713" />
						<Hotspot X="1021.677" Y="3064.034" Z="-5.446575" />
						<Hotspot X="1097.825" Y="3011.7" Z="-14.05334" />
						<Hotspot X="1128.688" Y="3100.316" Z="-11.14525" />
						<Hotspot X="900.6875" Y="3047.638" Z="-31.1717" />
						<Hotspot X="979.2049" Y="2946.421" Z="-8.680933" />
					</HuntingGrounds>
				</CustomBehavior>
				<CustomBehavior File="InteractWith" MobId="250560" QuestId="40077" QuestObjectiveIndex="2" X="1002.7" Y="2955.813" Z="-10.55572" />
				<CustomBehavior File="RunCode" Code="await SkipCutscene();" />
			</While>
			<TurnIn QuestName="The Invasion Begins" QuestId="40077" TurnInName="Kayn Sunfury" TurnInId="98229" X="998.9774" Y="2958.637" Z="-10.55687" />

			<PickUp QuestName="Enter the Illidari: Ashtongue" QuestId="40378" GiverName="Kayn Sunfury" GiverId="98229" X="998.9774" Y="2958.637" Z="-10.5568" />
			<While Condition="DoQuest(40378)" >
				<CustomBehavior File="InteractWith" MobId="241751" QuestId="40077" QuestObjectiveIndex="1" WaitTime="16000" X="1027.811" Y="2846.23" Z="5.979488" />
				<CustomBehavior File="InteractWith" MobId="101518" QuestId="40077" QuestObjectiveIndex="2" X="1016.708" Y="2849.313" Z="5.400201" />
				<If Condition="DoQuest(40378)" > <!-- 1of3, Assault on Mardum, Terminates when 'Enter the Illidari: Ashtongue' quest completes. -->
					<CustomBehavior File="InteractWith" MobIds="244439, 97142" WaitForNpcs="false" QuestId="40378" >
						<HuntingGrounds>
							<Hotspot X="937.5411" Y="2843.241" Z="1.29002" />
							<Hotspot X="862.149" Y="2900.982" Z="-24.73688" />
							<Hotspot X="802.3164" Y="2794.566" Z="-32.2492" />
							<Hotspot X="825.494" Y="2762.91" Z="-30.74704" />
						</HuntingGrounds>
					</CustomBehavior>
				</If>
			</While>
			<TurnIn QuestName="Enter the Illidari: Ashtongue" QuestId="40378" TurnInName="Allari the Souleater" TurnInId="94410" X="824.5972" Y="2758.497" Z="-30.43335" />

			<PickUp QuestName="Set Them Free" QuestId="38759" GiverName="Allari the Souleater" GiverId="94410" X="824.5972" Y="2758.497" Z="-30.43329" />
			<PickUp QuestName="Eye On the Prize" QuestId="39049" GiverName="Allari the Souleater" GiverId="94410" X="824.5972" Y="2758.497" Z="-30.43329" />
			<PickUp QuestName="Enter the Illidari: Coilskar" QuestId="40379" GiverName="Sevis Brightflame" GiverId="100982" X="799.16" Y="2770.399" Z="-34.23812" />

			<While Condition="DoQuest(39049)" >
				<!-- NOTE: <AddAvoid> : Could use avoidance here for the Inferal's fireballs and the spinny things that are summoned. -->
				<CustomBehavior File="KillUntilComplete" MobId="93105" QuestId="39049" QuestObjectiveIndex="1" X="592.5816" Y="2432.891" Z="-72.19401" />
			</While>

			<While Condition="DoQuest(40379)" >
				<CustomBehavior File="InteractWith" MobId="99914" GossipOptions="1" QuestId="40077" QuestObjectiveIndex="1" X="758.9722" Y="2403.007" Z="-60.99771" />
				<CustomBehavior File="InteractWith" MobId="241756" QuestId="40077" QuestObjectiveIndex="2" X="775.1858" Y="2389.073" Z="-58.26276" />
			</While>

			<While Condition="DoQuest(38759)" >
				<If Condition="!HasItem(128227)" >
					<CustomBehavior File="KillUntilComplete" MobId="95226" QuestId="39049" QuestObjectiveIndex="1" >
						<HuntingGrounds>
							<Hotspot X="731.5803" Y="2597.187" Z="-67.37312" />
							<Hotspot X="831.3241" Y="2498.659" Z="-60.30329" />
							<Hotspot X="721.7729" Y="2441.058" Z="-65.50719" />
						</HuntingGrounds>
					</CustomBehavior>
				</If>
				<CustomBehavior File="InteractWith" MobId="242989" QuestId="38759" QuestObjectiveIndex="2" X="743.8021" Y="2467.594" Z="-63.04863" />
				<CustomBehavior File="InteractWith" MobId="244916" QuestId="38759" QuestObjectiveIndex="3" X="784.7188" Y="2556.173" Z="-70.49132" />
				<CustomBehavior File="InteractWith" MobId="242990" QuestId="38759" QuestObjectiveIndex="5" X="910.4202" Y="2473.604" Z="-66.64028" />
				<CustomBehavior File="InteractWith" MobId="242987" QuestId="38759" QuestObjectiveIndex="4" X="879.4462" Y="2584.974" Z="-56.78919" />
			</While>

			<CustomBehavior File="InteractWith" MobState="Dead" NumOfTimes="100" TerminateWhen="IsQuestCompleted(39279)" > <!-- Bonus Objective: Assault on Mardum (39279) -->
				<HuntingGrounds>
					<Hotspot X="827.2732" Y="2502.611" Z="-60.79085" />
					<Hotspot X="723.0236" Y="2449.921" Z="-65.46581" />
					<Hotspot X="739.9745" Y="2569.291" Z="-69.40501" />
				</HuntingGrounds>
				<PursuitList>
					<PursueUnit Id="97142" /> <!-- Object based NPC -->
					<PursueGameObject Id="244440" />
					<PursueUnit Id="95226" PursueWhen="(UNIT.IsAlive || UNIT.Lootable) &amp;&amp; !UNIT.TaggedByOther" />
					<PursueUnit Id="93112" PursueWhen="(UNIT.IsAlive || UNIT.Lootable) &amp;&amp; !UNIT.TaggedByOther" />
				</PursuitList>
			</CustomBehavior>

			<TurnIn QuestName="Set Them Free" QuestId="38759" TurnInName="Jace Darkweaver" TurnInId="93759" X="1059.675" Y="2576.715" Z="-37.24481" />
			<TurnIn QuestName="Eye On the Prize" QuestId="39049" TurnInName="Jace Darkweaver" TurnInId="93759" X="1059.675" Y="2576.715" Z="-37.24481" />
			<TurnIn QuestName="Enter the Illidari: Coilskar" QuestId="40379" TurnInName="Jace Darkweaver" TurnInId="93759" X="1059.675" Y="2576.715" Z="-37.24481" />

			<PickUp QuestName="Meeting With the Queen" QuestId="39050" GiverName="Jace Darkweaver" GiverId="93759" X="1059.675" Y="2576.715" Z="-37.24481" />
			<While Condition="DoQuest(39050)" >
				<CustomBehavior File="InteractWith" MobId="243335" QuestId="39050" QuestObjectiveIndex="1" X="1062.385" Y="2578.528" Z="-37.08225" />
				<CustomBehavior File="RunCode" Code="await SkipCutscene();" />
			</While>
			<TurnIn QuestName="Meeting With the Queen" QuestId="39050" TurnInName="Jace Darkweaver" TurnInId="93759" X="1059.675" Y="2576.715" Z="-37.24481" />

			<PickUp QuestName="Enter the Illidari: Shivarra" QuestId="38765" GiverName="Jace Darkweaver" GiverId="93759" X="1059.675" Y="2576.715" Z="-37.24481" />
			<PickUp QuestName="Before We're Overrun" QuestId="38766" GiverName="Jace Darkweaver" GiverId="93759" X="1059.675" Y="2576.715" Z="-37.24481" />

			<While Condition="DoQuest(38766)" >
				<!-- NOTE: <AddAvoid> : Need to get out of the fel lasers, taping the spire objects will deactivate lasers.  I believe the boss also casts a frontal attack.
					Name="Spire Stabilizer" Entry="244604" X="1606.717" Y="2690.228" Z="20.27687"
					Name="Spire Stabilizer" Entry="244601" X="1577.047" Y="2718.522" Z="19.88217"
				-->
				<CustomBehavior File="Hooks\Avoid" AvoidName="SpiritOfWoe1" Command="Add" ObjectId="97634" Radius="5" />
				<CustomBehavior File="Hooks\Avoid" AvoidName="SpiritOfWoe2" Command="Add" ObjectId="97629" Radius="5" />
				<CustomBehavior File="KillUntilComplete" MobId="93221" QuestId="38766" QuestObjectiveIndex="1" X="1609.669" Y="2727.322" Z="20.23943" />
				<CustomBehavior File="Hooks\Avoid" AvoidName="SpiritOfWoe1" Command="Remove" />
				<CustomBehavior File="Hooks\Avoid" AvoidName="SpiritOfWoe2" Command="Remove" />
			</While>

			<While Condition="DoQuest(38765)" >
				<CustomBehavior File="InteractWith" MobId="99915" GossipOptions="1,1" QuestId="38765" QuestObjectiveIndex="1" X="1587.962" Y="2543.091" Z="62.0174" />
				<CustomBehavior File="InteractWith" MobId="241757" QuestId="38765" QuestObjectiveIndex="2" X="1614.97" Y="2518.042" Z="73.3252" />
			</While>

			<TurnIn QuestName="Enter the Illidari: Shivarra" QuestId="38765" TurnInName="Kayn Sunfury" TurnInId="93127" X="1456.023" Y="1763.717" Z="54.43828" />
			<TurnIn QuestName="Before We're Overrun" QuestId="38766" TurnInName="Kayn Sunfury" TurnInId="93127" X="1456.023" Y="1763.717" Z="54.43828" />

			<PickUp QuestName="Orders for Your Captains" QuestId="38813" GiverName="Kayn Sunfury" GiverId="93127" X="1456.023" Y="1763.717" Z="54.43828" />
			<While Condition="DoQuest(38813)" >
				<CustomBehavior File="InteractWith" MobId="93693" GossipOptions="1" QuestId="38765" QuestObjectiveIndex="2" X="1421.135" Y="1811.379" Z="61.92189" />
				<CustomBehavior File="InteractWith" MobId="94435" GossipOptions="1" QuestId="38765" QuestObjectiveIndex="3" X="1400.339" Y="1745.774" Z="56.71823" />
				<CustomBehavior File="InteractWith" MobId="90247" GossipOptions="1" QuestId="38765" QuestObjectiveIndex="1" X="1417.597" Y="1701.092" Z="54.48024" />
			</While>
			<TurnIn QuestName="Orders for Your Captains" QuestId="38813" TurnInName="Kayn Sunfury" TurnInId="93127" X="1456.023" Y="1763.717" Z="54.43828" />

			<PickUp QuestName="Give Me Sight Beyond Sight" QuestId="39262" GiverName="Kayn Sunfury" GiverId="93127" X="1456.023" Y="1763.717" Z="54.43828" />
			<While Condition="DoQuest(39262)" >
				<CustomBehavior File="InteractWith" MobId="96436" GossipOptions="1" QuestId="38765" QuestObjectiveIndex="1" X="1267.639" Y="1631.332" Z="102.7817" />
				<MoveTo X="1254.799" Y="1635.149" Z="101.2232" />
				<CustomBehavior File="RunCode" Code="
					var rockslidePoi = Object(245045);
					Me.SetFacing(rockslidePoi.Location);
					await Coroutine.Sleep(350);
					SpellManager.Cast(188501);
					await Coroutine.Sleep(1000);
				" />
			</While>
			<TurnIn QuestName="Give Me Sight Beyond Sight" QuestId="39262" TurnInName="Jace Darkweaver" TurnInId="93127" X="1456.023" Y="1763.717" Z="54.43828" />

			<PickUp QuestName="Hidden No More" QuestId="39495" GiverName="Jace Darkweaver" GiverId="93127" X="1456.023" Y="1763.717" Z="54.43828" />
			<While Condition="DoQuest(39495)" >
				<CustomBehavior File="KillUntilComplete" MobId="96441" QuestId="38766" QuestObjectiveIndex="1" X="1103.806" Y="1609.285" Z="116.6899" />
			</While>
			<TurnIn QuestName="Hidden No More" QuestId="39495" TurnInName="Kayn Sunfury" TurnInId="93127" X="1456.023" Y="1763.717" Z="54.43813" />

			<PickUp QuestName="Stop the Bombardment" QuestId="38727" GiverName="Kayn Sunfury" GiverId="93127" X="1456.023" Y="1763.717" Z="54.43813" />
			<PickUp QuestName="Their Numbers Are Legion" QuestId="38819" GiverName="Cyana Nightglaive" GiverId="96420" X="1453.278" Y="1762.342" Z="54.438" />
			<PickUp QuestName="Into the Foul Creche" QuestId="38725" GiverName="Allari the Souleater" GiverId="96655" X="1458.165" Y="1763.073" Z="54.43821" />

			<While Condition="DoQuest(38727)" >
				<CustomBehavior File="InteractWith" MobId="243968" WaitTime="5000" QuestId="38727" QuestObjectiveIndex="1" X="1356.149" Y="1436.212" Z="37.66927" />
				<CustomBehavior File="InteractWith" MobId="243967" WaitTime="5000" QuestId="38727" QuestObjectiveIndex="2" X="1547.845" Y="1221.847" Z="74.33907" />
				<CustomBehavior File="InteractWith" MobId="243965" WaitTime="5000" QuestId="38727" QuestObjectiveIndex="3" X="1813.363" Y="1543.425" Z="88.37321" />
			</While>

			<While Condition="DoQuest(38819)" >
				<CustomBehavior File="InteractWith" MobState="Dead" NumOfTimes="100" QuestId="38819" TerminateWhen="IsQuestCompleted(38819)" >
					<HuntingGrounds>
						<Hotspot X="1876.332" Y="1599.706" Z="94.19205" />
						<Hotspot X="1875.889" Y="1687.406" Z="86.19054" />
						<Hotspot X="1478.478" Y="1130.051" Z="69.52277" />
						<Hotspot X="1384.462" Y="1087.794" Z="82.91431" />
					</HuntingGrounds>
					<PursuitList>
						<PursueUnit Id="97014" PursueWhen="(UNIT.IsAlive || UNIT.Lootable) &amp;&amp; !UNIT.TaggedByOther" />
						<PursueUnit Id="96278" PursueWhen="(UNIT.IsAlive || UNIT.Lootable) &amp;&amp; !UNIT.TaggedByOther" />
						<PursueUnit Id="96280" PursueWhen="(UNIT.IsAlive || UNIT.Lootable) &amp;&amp; !UNIT.TaggedByOther" />
						<PursueUnit Id="97034" PursueWhen="(UNIT.IsAlive || UNIT.Lootable) &amp;&amp; !UNIT.TaggedByOther" />
						<PursueUnit Id="96277" PursueWhen="(UNIT.IsAlive || UNIT.Lootable) &amp;&amp; !UNIT.TaggedByOther" />
						<PursueUnit Id="96279" PursueWhen="(UNIT.IsAlive || UNIT.Lootable) &amp;&amp; !UNIT.TaggedByOther" />
						<PursueUnit Id="102724" PursueWhen="(UNIT.IsAlive || UNIT.Lootable) &amp;&amp; !UNIT.TaggedByOther" />

						<PursueUnit Id="97382" /> <!-- Object-base NPC -->
						<PursueUnit Id="100548" /> <!-- Aid friendly NPC -->
						<PursueUnit Id="100543" /> <!-- Aid friendly NPC -->
						<PursueUnit Id="100549" /> <!-- Aid friendly NPC -->
						<PursueUnit Id="100545" /> <!-- Aid friendly NPC -->
					</PursuitList>
				</CustomBehavior>
			</While>

			<TurnIn QuestName="Into the Foul Creche" QuestId="38725" TurnInName="Kor'vas Bloodthorn" TurnInId="98711" X="1729.004" Y="1290.427" Z="82.89706" />

			<PickUp QuestName="The Imp Mother's Tome" QuestId="40222" GiverName="Kor'vas Bloodthorn" GiverId="98711" X="1729.004" Y="1290.427" Z="82.89674" />
			<While Condition="DoQuest(40222)" >
				<CustomBehavior File="InteractWith" MobId="98986" InteractByLooting="true" QuestId="40222" X="1880.26" Y="1140.319" Z="80.16714" />
			</While>
			<TurnIn QuestName="The Imp Mother's Tome" QuestId="40222" TurnInName="Kor'vas Bloodthorn" TurnInId="99045" X="1454.29" Y="1763.451" Z="54.43828" />

			<TurnIn QuestName="Stop the Bombardment" QuestId="38727" TurnInName="Kayn Sunfury" TurnInId="93127" X="1456.023" Y="1763.717" Z="54.43816" />
			<TurnIn QuestName="Their Numbers Are Legion" QuestId="38819" TurnInName="Kayn Sunfury" TurnInId="93127" X="1456.023" Y="1763.717" Z="54.43816" />

			<PickUp QuestName="Fel Secrets" QuestId="40051" GiverName="Kor'vas Bloodthorn" GiverId="99045" X="1454.29" Y="1763.451" Z="54.43799" />
			<While Condition="DoQuest(40051)" >
				<CustomBehavior File="InteractWith" MobId="245112" WaitTime="2500" QuestId="40051" X="1455.868" Y="1761.759" Z="55.65202" />
				<CustomBehavior File="UserDialog" QuestId="40051" AllowBotStop="True" SoundCue="Exclamation" SoundCueInterval="150" ExpiryTime="60" ExpiryAction="InputEnabled_Continue" Text="Choose a specialization." />
				<CustomBehavior File="Misc\RunLua" Lua="QuestChoiceFrameOption1.OptionButton:Click();" /> <!-- Havoc -->
				<!-- Vengeance
				QuestChoiceFrameOption2.OptionButton:Click(); -->
			</While>
			<TurnIn QuestName="Fel Secrets" QuestId="40051" TurnInName="Kayn Sunfury" TurnInId="93127" X="1456.023" Y="1763.717" Z="54.43816" />

			<If Condition="Me.Specialization == WoWSpec.DemonHunterHavoc" >
				<PickUp QuestName="Cry Havoc and Let Slip the Illidari!" QuestId="39516" GiverName="Kayn Sunfury" GiverId="93127" X="1456.023" Y="1763.717" Z="54.43816" />
				<While Condition="DoQuest(39516)" >
					<CustomBehavior File="InteractWith" MobId="93127" GossipOptions="2" QuestId="39516" QuestObjectiveIndex="3" X="1456.023" Y="1763.717" Z="54.43816" />
					<CustomBehavior File="InteractWith" MobId="96420" GossipOptions="1" QuestId="39516" QuestObjectiveIndex="2" X="1453.278" Y="1762.342" Z="54.43803" />
					<CustomBehavior File="InteractWith" MobId="96655" GossipOptions="1" QuestId="39516" QuestObjectiveIndex="1" X="1458.165" Y="1763.073" Z="54.43824" />
					<CustomBehavior File="InteractWith" MobId="99045" GossipOptions="1" QuestId="39516" QuestObjectiveIndex="4" X="1454.29" Y="1763.451" Z="54.43799" />
					<CustomBehavior File="InteractWith" MobId="96652" GossipOptions="1" QuestId="39516" QuestObjectiveIndex="5" X="1460.233" Y="1773.326" Z="54.4456" />
				</While>
				<TurnIn QuestName="Cry Havoc and Let Slip the Illidari!" QuestId="39516" TurnInName="Kayn Sunfury" TurnInId="93127" X="1456.023" Y="1763.717" Z="54.43835" />
			</If>
			<If Condition="Me.Specialization == WoWSpec.DemonHunterVengeance" >
				<PickUp QuestName="Vengeance Will Be Mine!" QuestId="39515" GiverName="Kayn Sunfury" GiverId="93127" X="1456.023" Y="1763.717" Z="54.43816" />
				<While Condition="DoQuest(39515)" >
					<CustomBehavior File="InteractWith" MobId="93127" GossipOptions="2" QuestId="39515" QuestObjectiveIndex="3" X="1456.023" Y="1763.717" Z="54.43816" />
					<CustomBehavior File="InteractWith" MobId="96420" GossipOptions="1" QuestId="39515" QuestObjectiveIndex="2" X="1453.278" Y="1762.342" Z="54.43803" />
					<CustomBehavior File="InteractWith" MobId="96655" GossipOptions="1" QuestId="39515" QuestObjectiveIndex="1" X="1458.165" Y="1763.073" Z="54.43824" />
					<CustomBehavior File="InteractWith" MobId="99045" GossipOptions="1" QuestId="39515" QuestObjectiveIndex="4" X="1454.29" Y="1763.451" Z="54.43799" />
					<CustomBehavior File="InteractWith" MobId="96652" GossipOptions="1" QuestId="39515" QuestObjectiveIndex="5" X="1460.233" Y="1773.326" Z="54.4456" />
				</While>
				<TurnIn QuestName="Vengeance Will Be Mine!" QuestId="39515" TurnInName="Kayn Sunfury" TurnInId="93127" X="1456.023" Y="1763.717" Z="54.43835" />
			</If>

			<PickUp QuestName="On Felbat Wings" QuestId="39663" GiverName="Kayn Sunfury" GiverId="93127" X="1456.023" Y="1763.717" Z="54.43816" />
			<While Condition="DoQuest(39663)" >
				<CustomBehavior File="InteractWith" MobId="96653" GossipOptions="1" QuestId="39663" QuestObjectiveIndex="2" WaitTime="5000" X="1452.146" Y="1688.467" Z="47.22427" />
				<CustomBehavior File="WaitTimer" WaitTime="41000" TerminateWhen="!Me.IsFlying" /> <!-- NOTE: <TechnicalCheck> : Not sure if IsFlying returns true while flying on this mount -->
			</While>
			<TurnIn QuestName="On Felbat Wings" QuestId="39663" TurnInName="Cyana Nightglaive" TurnInId="97297" X="1469.057" Y="1411.031" Z="243.8633" />

			<PickUp QuestName="The Keystone" QuestId="38728" GiverName="Cyana Nightglaive" GiverId="97297" X="1469.057" Y="1411.031" Z="243.8633" />
			<While Condition="DoQuest(38728)" >
				<CustomBehavior File="InteractWith" MobId="100333" InteractByLooting="true" QuestId="38728" X="1559.513" Y="1407.249" Z="237.1088" />
				<MoveTo X="1624.532" Y="1413.022" Z="208.7414" />
			</While>
			<TurnIn QuestName="The Keystone" QuestId="38728" TurnInName="Kayn Sunfury" TurnInId="97303" X="1626.918" Y="1413.984" Z="208.7414" />

			<PickUp QuestName="Return to the Black Temple" QuestId="38729" GiverName="Kayn Sunfury" GiverId="97303" X="1626.918" Y="1413.984" Z="208.7414" />
			<While Condition="DoQuest(38729)" >
				<CustomBehavior File="InteractWith" MobId="245728" QuestId="38729" QuestObjectiveIndex="1" X="1629.439" Y="1414.21" Z="210.3634" />
			</While>
			<If Condition="QuestDone(38729)" >
				<TurnIn QuestName="Return to the Black Temple" QuestId="38729" TurnInName="Fel Portal" TurnInType="Object" TurnInId="244466" X="1636.608" Y="1414.271" Z="208.7355" />
				<CustomBehavior File="RunCode" Code="await SkipCutscene();" />
			</If>
		<!-- END Loc: Mardum, the Shattered Abyss -->

		<!-- Loc: Azuna -->
			<PickUp QuestName="Breaking Out" QuestId="38672" GiverName="Maiev Shadowsong" GiverId="92776" X="4326.902" Y="-515.2207" Z="-287.7824" />
			<While Condition="DoQuest(38672)" >
				<CustomBehavior File="InteractWith" MobId="103655" QuestId="38672" QuestObjectiveIndex="1" X="4312.782" Y="-590.1771" Z="-281.2702" />
				<CustomBehavior File="InteractWith" MobId="103658" QuestId="38672" QuestObjectiveIndex="2" X="4339.203" Y="-590.0521" Z="-281.2409" />
				<CustomBehavior File="WaitTimer" WaitTime="60000" QuestId="38672" />
			</While>
			<TurnIn QuestName="Breaking Out" QuestId="38672" TurnInName="Lever" TurnInType="Object" TurnInId="244923" X="4332.152" Y="-582.5434" Z="-281.9227" />

			<PickUp QuestName="Rise of the Illidari" QuestId="38690" GiverName="Kayn Sunfury" GiverId="92980" X="4330.08" Y="-548.2882" Z="-281.8343" />
			<PickUp QuestName="Fel Infusion" QuestId="38689" GiverName="Altruis the Sufferer" GiverId="92986" X="4321.747" Y="-547.8611" Z="-281.6629" />

			<While Condition="DoQuest(38690)" >
				<CustomBehavior File="InteractWith" MobId="244588" QuestId="38690" NumOfTimes="16" >
					<HuntingGrounds>
						<Hotspot X="4327.04" Y="-551.9789" Z="-281.825" />
						<Hotspot X="4325.488" Y="-446.7546" Z="-283.3723" />
					</HuntingGrounds>
				</CustomBehavior>
			</While>

			<While Condition="DoQuest(38689, 39742)" >
				<CustomBehavior File="KillUntilComplete" MobIds="92782, 92776" TerminateWhen="!DoQuest(38689, 39742)" >
					<HuntingGrounds>
						<Hotspot X="4325.653" Y="-523.0162" Z="-287.6848" />
						<Hotspot X="4272.173" Y="-493.1877" Z="-281.6576" />
						<Hotspot X="4383.523" Y="-492.0817" Z="-281.8568" />
						<Hotspot X="4325.009" Y="-436.2533" Z="-281.8516" />
					</HuntingGrounds>
				</CustomBehavior>
			</While>

			<TurnIn QuestName="Fel Infusion" QuestId="38689" TurnInName="Altruis the Sufferer" TurnInId="92986" X="4238.932" Y="-295.1424" Z="-281.3928" />
			<TurnIn QuestName="Rise of the Illidari" QuestId="38690" TurnInName="Kayn Sunfury" TurnInId="96665" X="4238.04" Y="-290.1441" Z="-281.394" />

			<If Condition="Me.Specialization == WoWSpec.DemonHunterHavoc" >
				<PickUp QuestName="Stop Gul'dan!" QuestId="38723" GiverName="Maiev Shadowsong" GiverId="92718" X="4235.613" Y="-292.9566" Z="-281.3957" />
			</If>
			<If Condition="Me.Specialization == WoWSpec.DemonHunterVengeance" >
				<PickUp QuestName="Stop Gul'dan!" QuestId="40253" GiverName="Maiev Shadowsong" GiverId="92718" X="4235.613" Y="-292.9566" Z="-281.3957" />
			</If>
			<While Condition="DoQuest(38723, 40253)" >
				<CustomBehavior File="RunCode" Code="await SkipCutscene();" />
				<CustomBehavior File="KillUntilComplete" MobIds="92990, 97632" QuestId="38723" X="4047.738" Y="-308.8333" Z="-281.5897" />
				<CustomBehavior File="KillUntilComplete" MobIds="92990, 97632" QuestId="40253" X="4047.738" Y="-308.8333" Z="-281.5897" />
			</While>
			<If Condition="Me.Specialization == WoWSpec.DemonHunterHavoc" >
				<TurnIn QuestName="Stop Gul'dan!" QuestId="38723" TurnInName="Kayn Sunfury" TurnInId="96665" X="4079.023" Y="-306.7014" Z="-281.5352" />
			</If>
			<If Condition="Me.Specialization == WoWSpec.DemonHunterVengeance" >
				<TurnIn QuestName="Stop Gul'dan!" QuestId="40253" TurnInName="Kayn Sunfury" TurnInId="96665" X="4079.023" Y="-306.7014" Z="-281.5352" />
			</If>

			<PickUp QuestName="Grand Theft Felbat" QuestId="39682" GiverName="Kayn Sunfury" GiverId="96665" X="4079.023" Y="-306.7014" Z="-281.5352" />
			<While Condition="DoQuest(39682)" >
				<CustomBehavior File="InteractWith" MobId="96659" QuestId="39682" QuestObjectiveIndex="1" X="4437.868" Y="-283.0434" Z="-244.7543" />
				<CustomBehavior File="WaitTimer" WaitTime="20000" TerminateWhen="!Me.IsFlying" /> <!-- NOTE: <TechnicalCheck> : Not sure if IsFlying returns true while flying on this mount -->
			</While>
			<TurnIn QuestName="Grand Theft Felbat" QuestId="39682" TurnInName="Kor'vas Bloodthorn" TurnInId="97643" X="4456.744" Y="-395.5313" Z="126.0077" />

			<PickUp QuestName="Frozen in Time" QuestId="39685" GiverName="Kor'vas Bloodthorn" GiverId="97643" X="4456.744" Y="-395.5313" Z="126.0077" />
			<PickUp QuestName="Beam Me Up" QuestId="39684" GiverName="Kor'vas Bloodthorn" GiverId="97643" X="4456.744" Y="-395.5313" Z="126.0077" />

			<If Condition="Me.Specialization == WoWSpec.DemonHunterHavoc" >
				<PickUp QuestName="Forged in Fire" QuestId="39683" GiverName="Allari the Souleater" GiverId="96675" X="4458.162" Y="-393.3403" Z="125.8987" />
			</If>
			<If Condition="Me.Specialization == WoWSpec.DemonHunterVengeance" >
				<PickUp QuestName="Forged in Fire" QuestId="40254" GiverName="Allari the Souleater" GiverId="96675" X="4458.162" Y="-393.3403" Z="125.8987" />
			</If>

			<While Condition="DoQuest(39685, 40254)" >
				<!-- NOTE: <AddAvoid> : Boss spawns green fireballs all around the room. -->
				<CustomBehavior File="KillUntilComplete" MobId="96682" QuestId="39685" X="4660.464" Y="-451.5764" Z="122.0296" />
				<CustomBehavior File="KillUntilComplete" MobId="96682" QuestId="40254" X="4660.464" Y="-451.5764" Z="122.0296" />
			</While>

			<While Condition="DoQuest(39684)" >
				<!-- NOTE: <AddAvoid> : Purple stuff on floor.  There's also balls that fly around that hit pretty hard.  They may be ignorable though. -->
				<CustomBehavior File="InteractWith" MobId="244449" QuestId="39684" X="4442.658" Y="-699.9271" Z="116.528" />
			</While>

			<While Condition="DoQuest(39685)" >
				<!-- NOTE: <AddAvoid> : Red lava on floor.  Must avoid this -->
				<CustomBehavior File="InteractWith" MobId="99709" QuestId="39685" X="4244.663" Y="-486.8472" Z="106.5437" />
				<CustomBehavior File="InteractWith" MobId="99731" QuestId="39685" X="4203.372" Y="-451.6823" Z="106.5461" />
				<CustomBehavior File="InteractWith" MobId="99732" QuestId="39685" X="4244.702" Y="-416.8906" Z="106.5452" />
			</While>

			<If Condition="Me.Specialization == WoWSpec.DemonHunterHavoc" >
				<TurnIn QuestName="Forged in Fire" QuestId="39683" TurnInName="Allari the Souleater" TurnInId="96675" X="4458.162" Y="-393.3403" Z="125.8987" />
			</If>
			<If Condition="Me.Specialization == WoWSpec.DemonHunterVengeance" >
				<TurnIn QuestName="Forged in Fire" QuestId="40254" TurnInName="Allari the Souleater" TurnInId="96675" X="4458.162" Y="-393.3403" Z="125.8987" />
			</If>
			<TurnIn QuestName="Beam Me Up" QuestId="39684" TurnInName="Allari the Souleater" TurnInId="96675" X="4458.162" Y="-393.3403" Z="125.8987" />
			<TurnIn QuestName="Frozen in Time" QuestId="39685" TurnInName="Allari the Souleater" TurnInId="96675" X="4458.162" Y="-393.3403" Z="125.8987" />

			<PickUp QuestName="All The Way Up" QuestId="39686" GiverName="Allari the Souleater" GiverId="96675" X="4458.162" Y="-393.3403" Z="125.8987" />
			<If Condition="QuestDone(39686) &amp;&amp; Me.Z &lt; 125" >
				<!-- NOTE: <Elevator> : Name="Warden's Ascent" Entry="244644" X="4450.857" Y="-451.7679" Z="129.4956"-->
				<!-- Top Loc:  X="4450.857" Y="-451.7679" Z="253.4846" -->
				<!-- Bottom Loc: X="4450.857" Y="-451.7679" Z="118.2794" -->
				<CustomBehavior File="WaitTimer" WaitTime="60000" TerminateWhen="Object(244644, o =&gt; o.Z &lt; 119) != null" />
				<CustomBehavior File="MyCTM" X="4451.081" Y="-451.9658" Z="119.4043" />
				<CustomBehavior File="WaitTimer" WaitTime="25000" TerminateWhen="Object(244644, o =&gt; o.Z &gt;= 250) != null" />
				<CustomBehavior File="MyCTM" X="4468.64" Y="-447.0035" Z="253.6915" />
				<MoveTo X="4285.375" Y="-451.2191" Z="259.5194" />
			</If>
			<TurnIn QuestName="All The Way Up" QuestId="39686" TurnInName="Kor'vas Bloodthorn" TurnInId="97644" X="4282.924" Y="-451.7708" Z="259.5203" />

			<PickUp QuestName="A New Direction" QuestId="40373" GiverName="Kor'vas Bloodthorn" GiverId="97644" X="4282.924" Y="-451.7708" Z="259.5203" />
			<While Condition="DoQuest(40373)" >
				<CustomBehavior File="InteractWith" MobId="244455" QuestId="40373" QuestObjectiveIndex="1" X="4302.416" Y="-451.7986" Z="260.235" />
				<CustomBehavior File="RunCode" Code="await SkipCutscene();" />
				<CustomBehavior File="InteractWith" MobId="97644" GossipOptions="1" QuestId="40373" X="4282.924" Y="-451.7708" Z="259.5203" />
				<CustomBehavior File="UserDialog" QuestId="40373" AllowBotStop="True" SoundCue="Exclamation" SoundCueInterval="150" ExpiryTime="60" ExpiryAction="InputEnabled_Continue" Text="Choose a follower." />
				<CustomBehavior File="Misc\RunLua" Lua="QuestChoiceFrameOption1.OptionButton:Click();" /> <!-- Kayn Sunfury -->
			</While>
			<TurnIn QuestName="A New Direction" QuestId="40373" TurnInName="Kor'vas Bloodthorn" TurnInId="97644" X="4282.924" Y="-451.7708" Z="259.5196" />

			<If Condition="Me.Specialization == WoWSpec.DemonHunterHavoc" >
				<PickUp QuestName="Between Us and Freedom" QuestId="39688" GiverName="Kor'vas Bloodthorn" GiverId="97644" X="4282.924" Y="-451.7708" Z="259.5196" />
			</If>
			<If Condition="Me.Specialization == WoWSpec.DemonHunterVengeance" >
				<PickUp QuestName="Between Us and Freedom" QuestId="40255" GiverName="Kor'vas Bloodthorn" GiverId="97644" X="4282.924" Y="-451.7708" Z="259.5196" />
			</If>
			<While Condition="DoQuest(40373, 40255)" >
				<CustomBehavior File="KillUntilComplete" MobId="96783" QuestId="39688" X="4185.642" Y="-627.7885" Z="255.4879" />
				<CustomBehavior File="KillUntilComplete" MobId="96783" QuestId="40255" X="4185.642" Y="-627.7885" Z="255.4879" />
			</While>
			<If Condition="QuestDone(40373, 40255)" >
				<MoveTo X="4161.926" Y="-852.6156" Z="291.4435" />
			</If>
			<!-- NOTE: <NPCConflict> : In this area, Kayn Sunfury may not be availible if the player picks Altruis the Sufferer during the quest 'A New Direction(40373)' -->
			<If Condition="Unit(39688) != null" >
				<TurnIn QuestName="Between Us and Freedom" QuestId="39688" TurnInName="Kayn Sunfury" TurnInId="96666" X="4160.994" Y="-855.743" Z="291.1073" />
			</If>
			<If Condition="Unit(96669) != null" >
				<TurnIn QuestName="Between Us and Freedom" QuestId="40255" TurnInName="Altruis the Sufferer" TurnInId="96669" X="XXX" Y="YYY" Z="ZZZ" />
			</If>

			<PickUp QuestName="Illidari, We Are Leaving" QuestId="39689" GiverName="Archmage Khadgar" GiverId="97978" X="4154.077" Y="-868.8698" Z="290.947" />
			<TurnIn QuestName="Illidari, We Are Leaving" QuestId="39689" TurnInName="Archmage Khadgar" TurnInId="97978" X="4154.077" Y="-868.8698" Z="290.947" />

			<If Condition="Me.IsAlliance" >
				<PickUp QuestName="The Call of War" QuestId="39691" GiverName="Archmage Khadgar" GiverId="97296" X="-8540.545" Y="462.2865" Z="104.7194" />
				<While Condition="DoQuest(39691)" >
					<MoveTo X="-8378.28" Y="251.1476" Z="155.3467" />
				</While>
				<TurnIn QuestName="The Call of War" QuestId="39691" TurnInName="Jace Darkweaver" TurnInId="102585" X="-8386.645" Y="256.592" Z="155.3483" />

				<PickUp QuestName="Second Sight" QuestId="44471" GiverName="Jace Darkweaver" GiverId="102585" X="-8386.645" Y="256.592" Z="155.3483" />
				<While Condition="DoQuest(44471)" >
					<CustomBehavior File="RunCode" Code="SpellManager.Cast(188501);" />
					<CustomBehavior File="WaitTimer" QuestId="44471" WaitTime="10000" />
				</While>
				<TurnIn QuestName="Second Sight" QuestId="44471" TurnInName="Jace Darkweaver" TurnInId="102585" X="-8386.645" Y="256.592" Z="155.3483" />

				<PickUp QuestName="Demons Among Them" QuestId="44463" GiverName="Jace Darkweaver" GiverId="102585" X="-8386.645" Y="256.592" Z="155.3483" />
				<While Condition="DoQuest(44463)" >
					<CustomBehavior File="InteractWith" MobId="100429" QuestId="44463" QuestObjectiveIndex="1" X="-8361.81" Y="230.6198" Z="157.9789" />
					<CustomBehavior File="RunCode" Code="await SkipCutscene();" />					
					<CustomBehavior File="KillUntilComplete" MobId="100993" QuestId="44463" QuestObjectiveIndex="2" >
						<HuntingGrounds>
							<Hotspot X="-8378.479" Y="254.7162" Z="155.3473" />
							<Hotspot X="-8340.885" Y="271.1487" Z="155.3468" />
							<Hotspot X="-8403.619" Y="224.905" Z="155.3472" />
							<Hotspot X="-8422.482" Y="296.8073" Z="147.0145" />
						</HuntingGrounds>
					</CustomBehavior>
				</While>
				<TurnIn QuestName="Demons Among Them" QuestId="44463" TurnInName="Anduin Wrynn" TurnInId="100973" X="-8363.591" Y="232.7483" Z="156.99" />

				<PickUp QuestName="A Weapon of the Alliance" QuestId="44473" GiverName="Anduin Wrynn" GiverId="100973" X="-8363.591" Y="232.7483" Z="156.99" />
				<TurnIn Nav="Fly" QuestName="A Weapon of the Alliance" QuestId="44473" TurnInName="Elerion Bladedancer" TurnInId="101004" X="-8895.939" Y="1023.25" Z="124.4134" />
			</If>

			<If Condition="Me.IsHorde" >
				<PickUp QuestName="Audience with the Warchief" QuestId="40976" GiverName="Archmage Khadgar" GiverId="97296" X="1464.467" Y="-4420.019" Z="25.45385" />
				<While Condition="DoQuest(40976)" >
					<CustomBehavior File="InteractWith" MobId="100636" GossipOptions="1" WaitTime="5000" QuestId="40976" QuestObjectiveIndex="1" X="1605.925" Y="-4376.51" Z="21.73398" />
					<CustomBehavior File="RunCode" Code="await SkipCutscene();" />
				</While>
				<TurnIn QuestName="Audience with the Warchief" QuestId="40976" TurnInName="Allari the Souleater" TurnInId="100873" X="1275.693" Y="-4384.899" Z="28.73854" />

				<PickUp QuestName="Second Sight" QuestId="40982" GiverName="Allari the Souleater" GiverId="100873" X="1275.693" Y="-4384.899" Z="28.73854" />
				<While Condition="DoQuest(40982)" >
					<CustomBehavior File="RunCode" Code="SpellManager.Cast(188501);" />
					<CustomBehavior File="WaitTimer" QuestId="40982" WaitTime="10000" />
				</While>
				<TurnIn QuestName="Second Sight" QuestId="40982" TurnInName="Allari the Souleater" TurnInId="100873" X="1275.693" Y="-4384.899" Z="28.73854" />

				<PickUp QuestName="Demons Among Them" QuestId="40983" GiverName="Allari the Souleater" GiverId="100873" X="XXX" Y="YYY" Z="ZZZ" />
				<While Condition="DoQuest(40983)" >
					<CustomBehavior File="InteractWith" MobId="100866" GossipOptions="1" QuestId="40983" QuestObjectiveIndex="1" X="1248.641" Y="-4379.359" Z="34.83271" />
					<CustomBehavior File="RunCode" Code="await SkipCutscene();" />
					<CustomBehavior File="KillUntilComplete" MobIds="101100" QuestId="44463" QuestObjectiveIndex="2" >
						<HuntingGrounds>
							<Hotspot X="1294.371" Y="-4395.109" Z="26.28323" />
							<Hotspot X="1257.459" Y="-4432.643" Z="26.64934" />
							<Hotspot X="1193.049" Y="-4400.917" Z="22.93755" />
							<Hotspot X="1320.409" Y="-4448.038" Z="25.07881" />
						</HuntingGrounds>
					</CustomBehavior>
				</While>
				<TurnIn QuestName="Demons Among Them" QuestId="40983" TurnInName="Lady Sylvanas Windrunner" TurnInId="101035" X="1246.866" Y="-4377.863" Z="34.91656" />

				<PickUp QuestName="A Weapon of the Horde" QuestId="41002" GiverName="Lady Sylvanas Windrunner" GiverId="101035" X="1246.866" Y="-4377.863" Z="34.91656" />
				<TurnIn Nav="Fly" QuestName="A Weapon of the Horde" QuestId="41002" TurnInName="Elthyn Da'rai" TurnInId="95234" X="1812.56" Y="-4432.923" Z="103.1367" />
			</If>
		<!-- END Loc: Azuna -->

		<CustomBehavior File="LoadProfile" ProfileName="[N-Quest] Legion Intro Quests [Echo].xml" />

	</QuestOrder>
</HBProfile>