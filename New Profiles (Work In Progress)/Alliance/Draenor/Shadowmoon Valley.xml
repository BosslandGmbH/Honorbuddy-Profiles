<HBProfile xsi:noNamespaceSchemaLocation="../../Schemas/EchoQuestingSchema.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<!-- Original contribution by EchoTiger -->
	<Name>Shadowmoon Valley ($Rev: 6041 $)</Name>

	<DefaultNavType>Fly</DefaultNavType>

	<MinDurability>0.3</MinDurability>
	<MinFreeBagSlots>3</MinFreeBagSlots>

	<SellGrey>true</SellGrey>
	<SellWhite>true</SellWhite>
	<SellGreen>true</SellGreen>
	<SellBlue>true</SellBlue>
	<SellPurple>false</SellPurple>

	<MailGrey>false</MailGrey>
	<MailWhite>true</MailWhite>
	<MailGreen>true</MailGreen>
	<MailBlue>true</MailBlue>
	<MailPurple>true</MailPurple>

	<TargetElites>true</TargetElites>

	<AvoidMobs>
	</AvoidMobs>

	<Mailboxes>
	</Mailboxes>

	<Vendors>
	</Vendors>

	<Blackspots>
		<Blackspot X="2451.832" Y="357.7309" Z="-7.92304" Radius="1" /> <!-- Drudgeboat Salvage in bad spot -->
		<Blackspot X="2451.179" Y="320.9375" Z="-18.96798" Radius="1" /> <!-- Drudgeboat Salvage in bad spot -->
	</Blackspots>

	<Blacklist>
		<Mob Name="Frostfire Gronn" Id="70920" Flags="Pull" />
	</Blacklist>

	<QuestOrder IgnoreCheckpoints="false" ContinuallySkipToCheckpoints="true" >
		<If Condition="Me.IsHorde" >
			<Code File="LoadProfile" ProfileName="..\..\Horde\1-41 Autoloader.xml" RememberProfile="true" />
		</If>
		<!-- RunCode Methods -->
			<!-- <Code File="RunCode">
			<![CDATA[
				Bots.Professionbuddy.PBLog.Log(System.Windows.Media.Colors.MediumPurple, "> [Profile Initialization Status] ", System.Windows.Media.Colors.CornflowerBlue, "\n     Auto-Looting	:: Enabled\n     Looting	:: Enabled\n     Game Addons	:: Disabled");
				Lua.DoString("SetCVar('AutoLootDefault', 1);");
				CharacterSettings.Instance.LootMobs = true;
				CharacterSettings.Instance.Save();
				Lua.DoString("for i=1,GetNumAddOns() do local relo=false if IsAddOnLoaded(i) then relo=true DisableAddOn(i) end if relo then relo=nil ReloadUI() end end");
				await Coroutine.Sleep(1500);
				Logging.Write(System.Windows.Media.Colors.MediumPurple, "> [Ready to bot!]");
			]]>
			</Code> -->
			<Code File="RunCode" Type="Definition">
				<![CDATA[
						bool DoQuest(params uint[] questIds)
						{
							foreach (var questId in questIds)
							{
								if (HasQuest(questId) && !IsQuestCompleted(questId)) return true;
							}
							return false;
						}
						bool NeedsQuest(params uint[] questIds)
						{
							foreach (var questId in questIds)
							{
								if (!HasQuest(questId) && !IsQuestCompleted(questId)) return true;
							}
							return false;
						}
						bool NeedsBreadcrumbQuest(params uint[] questIds)
						{
							foreach (var questId in questIds)
							{
								if (IsQuestCompleted(questId)) return false;
							}
							return true;
						}
						bool QuestDone(params uint[] questIds)
						{
							foreach (var questId in questIds)
							{
								if (HasQuest(questId) && IsQuestCompleted(questId)) return true;
							}
							return false;
						}
						bool QuestFlaggedCompleted(params uint[] questIds)
						{
							foreach (var questId in questIds)
							{
								return Lua.GetReturnVal<bool>($"return IsQuestFlaggedCompleted({questId});", 0);
							}
							return false;
						}
						async Task SkipCutscene(int preWait = 3000, int postWait = 3000)
						{
					// Add detection of cutscene here.
							await Coroutine.Sleep(preWait);
					// Test and improve the working method.
							Lua.DoString("MovieFrame:StopMovie(); CinematicFrame_CancelCinematic(); StopCinematic();");
							await Coroutine.Sleep(postWait);
						}
					]]>
			</Code>
		<!-- END RunCode Methods -->

		<!-- Hooks -->
			<Code File="RunCode" Type="Definition">
				<![CDATA[ 
					IEnumerable<WoWItem> GetExtraConsumables()
					{
						uint foodCount = 0;
						uint drinkCount = 0;
						// Skip conjured and buff comsumables.
				
						var extraConsumables = (from item in Me.BagItems
										   where item != null && item.ItemInfo != null
										   let isFood = Consumable.IsFood(item.ItemInfo)
										   let isDrink = Consumable.IsDrink(item.ItemInfo)
										   where (isFood || isDrink) && item.ItemInfo.SellPrice > 0 && item.Effects.Count == 1 && item.ItemInfo.RequiredLevel < Me.Level - 10                    
										   select item).ToList();
				
				
						var extraPotions = Me.BagItems
							.Where(c => c != null && c.IsValid && c.ItemInfo != null && c.ItemInfo.SellPrice > 0 && c.Effects.Count == 1
								&& (c.ItemInfo.ConsumableClass == WoWItemConsumableClass.Potion
								|| c.ItemInfo.ConsumableClass == WoWItemConsumableClass.Elixir
								|| c.ItemInfo.ConsumableClass == WoWItemConsumableClass.Flask)
								&& c.ItemInfo.RequiredLevel < Me.Level - 20);
				
						extraConsumables.AddRange(extraPotions);
						return extraConsumables;
					}
					 
					async Task SellExtraConsumables()
					{
						Logging.Write("Selling items in GetExtraConsumables()");
						foreach (var item in GetExtraConsumables())
						{
							Logging.Write("Selling {0}.", item.Name);
							item.UseContainerItem();
							await Coroutine.Sleep(1337);
						}
					}
				]]>
			</Code>
			<Code File="Hooks\DoWhen" AllowExecutionWhileNotAlive="false"  AllowUseWhileMounted="true" ActivityName="SellExtraConsumables" UseWhen="MerchantFrame.Instance.IsVisible &amp;&amp; GetExtraConsumables().Any()" >
				<Code File="RunCode" Code="await SellExtraConsumables();"/>
			</Code>
		<!-- END Hooks -->

		<TurnIn QuestName="Step Three: Prophet!" QuestId="34575" TurnInName="Prophet Velen" TurnInId="79206" X="2301.421" Y="458.8662" Z="7.836821" />
		<PickUp QuestName="Finding a Foothold" QuestId="34582" GiverName="Prophet Velen" GiverId="79206" X="2301.424" Y="458.859" Z="7.835963" />
		<TurnIn QuestName="Finding a Foothold" QuestId="34582" TurnInName="Vindicator Maraad" TurnInId="79470" X="1934.22" Y="342.9869" Z="88.96427" />

		<PickUp QuestName="For the Alliance!" QuestId="34583" GiverName="Vindicator Maraad" GiverId="79470" X="1934.22" Y="342.9869" Z="88.96427" />
		<Code File="InteractWith" MobId="230280" NonCompeteDistance="0" PreInteractMountStrategy="Dismount" InteractBlacklistTimeInSeconds="1" QuestId="34583" QuestObjectiveIndex="1" X="1940.138" Y="329.5135" Z="88.96427" />
		<TurnIn QuestName="For the Alliance!" QuestId="34583" TurnInName="Baros Alexston" TurnInId="79243" X="1935.479" Y="324.4957" Z="88.98422" />

		<PickUp QuestName="Looking for Lumber" QuestId="34584" GiverName="Baros Alexston" GiverId="79243" X="1935.479" Y="324.4957" Z="88.98422" />
		<PickUp QuestName="Ravenous Ravens" QuestId="34616" GiverName="Baros Alexston" GiverId="79243" X="1935.479" Y="324.4957" Z="88.98422" />

		<Code File="InteractWith" MobId="230335" CollectionDistance="200" NonCompeteDistance="0" PreInteractMountStrategy="Dismount" QuestId="34584" QuestObjectiveIndex="1" >
			<HuntingGrounds>
				<Hotspot X="1883.516" Y="327.5062" Z="83.47712" />
				<Hotspot X="1861.647" Y="189.3937" Z="79.38912" />
			</HuntingGrounds>
		</Code>

		<Code File="KillUntilComplete" MobId="82037" QuestId="34616" >
			<HuntingGrounds>
				<Hotspot X="1886.101" Y="260.7723" Z="77.7935" />
				<Hotspot X="1781.644" Y="201.2479" Z="70.5745" />
				<Hotspot X="1815.755" Y="133.2781" Z="76.67826" />
			</HuntingGrounds>
		</Code>

		<TurnIn QuestName="Looking for Lumber" QuestId="34584" TurnInName="Baros Alexston" TurnInId="79243" X="1935.549" Y="324.485" Z="88.98256" />
		<TurnIn QuestName="Ravenous Ravens" QuestId="34616" TurnInName="Baros Alexston" TurnInId="79243" X="1935.549" Y="324.485" Z="88.98256" />

		<PickUp QuestName="Quakefist" QuestId="34585" GiverName="Yrel" GiverId="79567" X="1930.206" Y="329.7216" Z="89.09069" />
		<Code File="KillUntilComplete" MobId="81360" QuestId="34585" X="1729.972" Y="263.7578" Z="72.03151" />
		<TurnIn QuestName="Quakefist" QuestId="34585" TurnInName="Yrel" TurnInId="79567" X="1923.866" Y="329.8402" Z="89.33455" />

		<PickUp QuestName="Establish Your Garrison" QuestId="34586" GiverName="Baros Alexston" GiverId="79243" X="1933.245" Y="324.0472" Z="89.02901" />
		<While Condition="DoQuest(34586)" >
			<Code File="InteractWith" MobId="79243" GossipOptions="1" NonCompeteDistance="0" PreInteractMountStrategy="Dismount" InteractBlacklistTimeInSeconds="1" QuestId="34586" QuestObjectiveIndex="1" X="1933.245" Y="324.0472" Z="89.02901" />
			<Code File="RunCode" Code="await SkipCutscene();" />
		</While>
		<TurnIn QuestName="Establish Your Garrison" QuestId="34586" TurnInName="Baros Alexston" TurnInId="77209" X="1867.081" Y="259.6523" Z="77.16481" />

		<PickUp QuestName="Keeping it Together" QuestId="35176" GiverName="Baros Alexston" GiverId="77209" X="1864.709" Y="260.9365" Z="77.17206" />
		<PickUp QuestName="Ship Salvage" QuestId="35166" GiverName="Baros Alexston" GiverId="77209" X="1864.709" Y="260.9365" Z="77.17206" />
		<PickUp QuestName="Pale Moonlight" QuestId="35174" GiverName="Vindicator Maraad" GiverId="79457" X="1851.2" Y="244.6389" Z="77.0455" />

		<Code File="InteractWith" MobId="84455" GossipOptions="1" NonCompeteDistance="0" PreInteractMountStrategy="Dismount" InteractBlacklistTimeInSeconds="1" QuestId="35176" QuestObjectiveIndex="1" X="1849.958" Y="240.2393" Z="76.66676" />
		<Code File="InteractWith" MobId="236916" NonCompeteDistance="0" InteractBlacklistTimeInSeconds="1" QuestId="35176" QuestObjectiveIndex="3" X="1893.637" Y="210.7133" Z="77.0638" />
		<Code File="InteractWith" MobId="81441" GossipOptions="1" NonCompeteDistance="0" PreInteractMountStrategy="Dismount" InteractBlacklistTimeInSeconds="1" QuestId="35176" QuestObjectiveIndex="2" X="1933.504" Y="327.3346" Z="88.98238" />

		<TurnIn QuestName="Keeping it Together" QuestId="35176" TurnInName="Baros Alexston" TurnInId="77209" X="1866.748" Y="260.9679" Z="77.17408" />

		<Code File="InteractWith" MobId="231826" CollectionDistance="200" NonCompeteDistance="0" PreInteractMountStrategy="Dismount" QuestId="35166" QuestObjectiveIndex="1" >
			<HuntingGrounds>
				<Hotspot X="2280.564" Y="498.0495" Z="11.77879" />
				<Hotspot X="2433.176" Y="404.5436" Z="2.212824" />
			</HuntingGrounds>
		</Code>

		<Code File="KillUntilComplete" MobId="81670" QuestId="35174" QuestObjectiveIndex="1" X="2400.589" Y="548.7795" Z="4.815833" />

		<Code File="KillUntilComplete" MobId="79205" QuestId="35174" QuestObjectiveIndex="2" >
			<HuntingGrounds>
				<Hotspot X="2308.392" Y="572.4628" Z="8.117545" />
				<Hotspot X="2280.564" Y="498.0495" Z="11.77879" />
				<Hotspot X="2433.176" Y="404.5436" Z="2.212824" />
			</HuntingGrounds>
		</Code>

		<TurnIn QuestName="Ship Salvage" QuestId="35166" TurnInName="Baros Alexston" TurnInId="77209" X="1868.832" Y="261.3672" Z="77.12688" />
		<TurnIn QuestName="Pale Moonlight" QuestId="35174" TurnInName="Vindicator Maraad" TurnInId="79457" X="1852.775" Y="244.8105" Z="76.97448" />

		<PickUp QuestName="Build Your Barracks" QuestId="34587" GiverName="Baros Alexston" GiverId="77209" X="1865.999" Y="260.4644" Z="77.1776" />
		<While Condition="DoQuest(34587)" >
			<Code File="InteractWith" MobId="231855" NonCompeteDistance="0" InteractByLooting="true" PreInteractMountStrategy="Dismount" InteractBlacklistTimeInSeconds="1" QuestId="34587" QuestObjectiveIndex="1" X="1903.285" Y="236.0247" Z="77.60751" />
			<Code File="UseItem" ItemId="111956" QuestId="34587" QuestObjectiveIndex="2" />

			<Code File="InteractWith" MobId="81369" NonCompeteDistance="0" PreInteractMountStrategy="Dismount" QuestId="34587" QuestObjectiveIndex="3" X="1868.666" Y="261.3354" Z="77.12529" />
			<Code File="Misc\RunLua" Lua="C_Garrison.PlaceBuilding(23, 26);" QuestId="34587" QuestObjectiveIndex="3" />

			<Code File="InteractWith" MobId="232651" NonCompeteDistance="0" PreInteractMountStrategy="Dismount" QuestId="34587" QuestObjectiveIndex="5" X="1888.869" Y="242.719" Z="76.55524" />
			<Code File="RunCode" Code="await SkipCutscene(1500);" />
		</While>
		<TurnIn QuestName="Build Your Barracks" QuestId="34587" TurnInName="Vindicator Maraad" TurnInId="79457" X="1852.672" Y="245.3419" Z="77.02358" />

		<PickUp QuestName="Qiana Moonshadow" QuestId="34646" GiverName="Vindicator Maraad" GiverId="79457" X="1852.672" Y="245.3419" Z="77.02358" />
		<Code File="InteractWith" MobId="79446" NonCompeteDistance="0" PreInteractMountStrategy="Dismount" InteractBlacklistTimeInSeconds="1" QuestId="34646" QuestObjectiveIndex="1" X="1358.125" Y="260.2008" Z="54.93652" />

		<PickUp QuestName="A Matter of Life and Death" QuestId="33419" GiverName="Roona" GiverId="70902" X="1190.88" Y="719.2371" Z="112.559" />
		<Code File="InteractWith" MobId="78889" NonCompeteDistance="0" PreInteractMountStrategy="Dismount" InteractBlacklistTimeInSeconds="1" QuestId="33419" QuestObjectiveIndex="2" X="1140.666" Y="750.3815" Z="97.12473" />
		<Code File="InteractWith" MobId="78890" NonCompeteDistance="0" PreInteractMountStrategy="Dismount" InteractBlacklistTimeInSeconds="1" QuestId="33419" QuestObjectiveIndex="1" X="1137.999" Y="820.4667" Z="101.4473" />
		<Code File="InteractWith" MobId="78891" NonCompeteDistance="0" PreInteractMountStrategy="Dismount" InteractBlacklistTimeInSeconds="1" QuestId="33419" QuestObjectiveIndex="3" X="1105.745" Y="759.6339" Z="102.5932" />
		<TurnIn QuestName="A Matter of Life and Death" QuestId="33419" TurnInName="Roona" TurnInId="70902" X="1190.448" Y="722.6288" Z="112.357" />

		<While Condition="!QuestFlaggedCompleted(34504)" >
			<Code File="InteractWith" MobIds="78904, 78903, 78902" NumOfTimes="40" CollectionDistance="200" NonCompeteDistance="0" PreInteractMountStrategy="Dismount" TerminateWhen="IsObjectiveComplete(2, 34504) ? true : QuestFlaggedCompleted(34504)" >
				<HuntingGrounds>
					<Hotspot X="1190.26" Y="709.5089" Z="111.9825" />
					<Hotspot X="1180.182" Y="843.5872" Z="97.21329" />
					<Hotspot X="1078.926" Y="782.4187" Z="100.8398" />
				</HuntingGrounds>
			</Code>

			<Code File="KillUntilComplete" MobId="76382" PreInteractMountStrategy="Dismount" TerminateWhen="IsObjectiveComplete(1, 34504) ? true : QuestFlaggedCompleted(34504)" >
				<HuntingGrounds>
					<Hotspot X="1190.26" Y="709.5089" Z="111.9825" />
					<Hotspot X="1180.182" Y="843.5872" Z="97.21329" />
					<Hotspot X="1078.926" Y="782.4187" Z="100.8398" />
				</HuntingGrounds>
			</Code>
		</While>

		<TurnIn QuestName="Qiana Moonshadow" QuestId="34646" TurnInName="Qiana Moonshadow" TurnInId="81948" X="1846.608" Y="265.6099" Z="78.31462" />

		<PickUp QuestName="Delegating on Draenor" QuestId="34692" GiverName="Lieutenant Thorn" GiverId="79953" X="1847.336" Y="267.1478" Z="78.31462" />
		<While Condition="DoQuest(34692)" >
			<Code File="RunCode" Type="Definition">
				<![CDATA[
					async Task DoMission(int missionID, params int[] followerList)
					{
						foreach (int follower in followerList)
						{
							string luaString = $@"
								local missionID = {missionID};
								local followerID = {follower};
								local allFollowers = C_Garrison.GetFollowers(1);
								for i=1,#allFollowers do
									if (allFollowers[i].garrFollowerID == followerID)  then  
										C_Garrison.AddFollowerToMission(missionID, allFollowers[i].followerID);
										break;
									end
								end
							";
							Lua.DoString(luaString);
							await Coroutine.Sleep(750);
						}
						await Coroutine.Sleep(1000);
						Lua.DoString($"C_Garrison.StartMission({missionID});");
						await Coroutine.Sleep(2500);
						Lua.DoString("GarrisonMissionFrame.CloseButton:Click();");
					}
				]]>
			</Code>
			<Code File="InteractWith" MobId="81546" NonCompeteDistance="0" PreInteractMountStrategy="Dismount" QuestId="34692" X="1847.336" Y="267.1478" Z="78.31462" />
			<Code File="RunCode" Code="await DoMission(66, 34);" />
		</While>
		<TurnIn QuestName="Delegating on Draenor" QuestId="34692" TurnInName="Lieutenant Thorn" TurnInId="79953" X="1847.323" Y="265.3047" Z="78.31462" />

		<PickUp QuestName="A Hero&apos;s Welcome" QuestId="33075" GiverName="Yrel" GiverId="80568" X="1859.522" Y="228.5942" Z="76.57353" />
		<TurnIn QuestName="A Hero&apos;s Welcome" QuestId="33075" TurnInName="Samaara" TurnInId="75005" X="925.8044" Y="-813.1483" Z="-28.83306" />
		<PickUp QuestName="Dark Enemies" QuestId="33765" GiverName="Samaara" GiverId="75005" X="925.8044" Y="-813.1483" Z="-28.83306" />
		<PickUp QuestName="Think of the Children!" QuestId="33070" GiverName="Efee" GiverId="80196" X="977.0334" Y="-855.4263" Z="-31.17296" />
		<PickUp QuestName="Closing the Door" QuestId="33905" GiverName="Vindicator Tenuum" GiverId="74343" X="993.3271" Y="-855.171" Z="-33.68774" />

		<Code File="KillUntilComplete" MobId="80181" QuestId="33905" >
			<HuntingGrounds>
				<Hotspot X="1206.141" Y="-938.093" Z="-73.31255" />
				<Hotspot X="1156.1" Y="-975.1137" Z="-80.05085" />
				<Hotspot X="1175.464" Y="-1060.812" Z="-77.46068" />
				<Hotspot X="1138.204" Y="-1160.13" Z="-64.16885" />
				<Hotspot X="1145.856" Y="-1262.066" Z="-38.4742" />
				<Hotspot X="1045.376" Y="-1274.512" Z="-25.47745" />
			</HuntingGrounds>
		</Code>

		<Code File="InteractWith" MobId="62769" NonCompeteDistance="0" PreInteractMountStrategy="Dismount" InteractBlacklistTimeInSeconds="1" QuestId="33070" QuestObjectiveIndex="1" X="1281.667" Y="-1011.496" Z="-75.17802" />

		<PickUp QuestName="In Need of a Hero" QuestId="33813" GiverName="Ariaana" GiverId="71502" X="1199.455" Y="-1216.947" Z="-47.55516" />
		<While Condition="DoQuest(33813)" >
			<Code File="InteractWith" MobId="230883" NonCompeteDistance="0" PreInteractMountStrategy="Dismount" QuestId="33813" X="1206.588" Y="-1202.881" Z="-47.55516" TerminateWhen="HasItem(111908)" />
			<MoveTo X="1206.588" Y="-1202.881" Z="-47.55516" />
			<CustomBehavior File="UseItemTargetLocation" ItemId="111908" UseType="PointToPoint" WaitTime="4000" QuestId="33813" QuestObjectiveIndex="1" X="1206.588" Y="-1202.881" Z="-47.55516" ClickToX="1193.093" ClickToY="-1221.047" ClickToZ="-47.55488" TerminateWhen="!HasItem(111908)" />
			<CustomBehavior File="UseItemTargetLocation" ItemId="111908" UseType="PointToPoint" WaitTime="4000" QuestId="33813" QuestObjectiveIndex="2" X="1206.588" Y="-1202.881" Z="-47.55516" ClickToX="1192.579" ClickToY="-1218.437" ClickToZ="-47.55488" TerminateWhen="!HasItem(111908)" />
			<CustomBehavior File="UseItemTargetLocation" ItemId="111908" UseType="PointToPoint" WaitTime="4000" QuestId="33813" QuestObjectiveIndex="3" X="1206.588" Y="-1202.881" Z="-47.55516" ClickToX="1189.29" ClickToY="-1217.401" ClickToZ="-46.34229" TerminateWhen="!HasItem(111908)" />
		</While>
		<TurnIn QuestName="In Need of a Hero" QuestId="33813" TurnInName="Ariaana" TurnInId="71502" X="1199.872" Y="-1216.445" Z="-47.55496" />

		<Code File="InteractWith" MobId="64224" NonCompeteDistance="0" PreInteractMountStrategy="Dismount" InteractBlacklistTimeInSeconds="1" QuestId="33070" QuestObjectiveIndex="2" X="1053.143" Y="-1206.485" Z="-43.89391" />

		<Code File="KillUntilComplete" MobId="80162" QuestId="33765" >
			<HuntingGrounds>
				<Hotspot X="1206.521" Y="-968.7875" Z="-75.33047" />
				<Hotspot X="1185.865" Y="-1109.04" Z="-72.10466" />
				<Hotspot X="1089.933" Y="-1204.542" Z="-44.20374" />
				<Hotspot X="1078.335" Y="-1280.054" Z="-27.91971" />
			</HuntingGrounds>
		</Code>

		<TurnIn QuestName="Dark Enemies" QuestId="33765" TurnInName="Prophet Velen" TurnInId="74043" X="938.3976" Y="-1021.21" Z="-0.9264211" />
		<TurnIn QuestName="Think of the Children!" QuestId="33070" TurnInName="Prophet Velen" TurnInId="74043" X="938.3976" Y="-1021.21" Z="-0.9264211" />
		<TurnIn QuestName="Closing the Door" QuestId="33905" TurnInName="Prophet Velen" TurnInId="74043" X="938.3976" Y="-1021.21" Z="-0.9264211" />

		<PickUp QuestName="Shadows Awaken" QuestId="34019" GiverName="Prophet Velen" GiverId="74043" X="938.3976" Y="-1021.21" Z="-0.9264211" />
		<Code File="KillUntilComplete" MobId="75043" QuestId="34019" X="1003.108" Y="-1040.766" Z="6.937754" />
		<TurnIn QuestName="Shadows Awaken" QuestId="34019" TurnInName="Prophet Velen" TurnInId="74043" X="993.3688" Y="-1034.958" Z="6.398535" />

		<PickUp QuestName="Into Twilight" QuestId="33072" GiverName="Prophet Velen" GiverId="74043" X="993.3688" Y="-1034.958" Z="6.398535" />
		<PickUp QuestName="The Southern Wilds" QuestId="35444" GiverName="Farmer Gehaar" GiverId="82256" X="937.364" Y="-1016.978" Z="-1.015294" />

		<If Condition="NeedsQuest(34778) &amp;&amp; HasItem(110560) &amp;&amp; Unit(82256) != null" >
			<Code File="RunCode" Code="
				await CommonCoroutines.LandAndDismount();
				Me.BagItems.FirstOrDefault(x =&gt; x.Entry == 110560).Use();
				await Coroutine.Sleep(500);
				await Coroutine.Wait(7000, () =&gt; !Me.IsCasting);
			" />
		</If>

		<PickUp QuestName="Migrant Workers" QuestId="34778" GiverName="Vindicator Maraad" GiverId="79457" X="1851.976" Y="247.0664" Z="77.21649" />
		<Code File="InteractWith" MobId="81912" GossipOptions="1" NonCompeteDistance="0" PreInteractMountStrategy="Dismount" InteractBlacklistTimeInSeconds="1" QuestId="34778" QuestObjectiveIndex="1" X="1856.468" Y="243.7795" Z="76.98661" />
		<TurnIn QuestName="Migrant Workers" QuestId="34778" TurnInName="Foreman Zipfizzle" TurnInId="81912" X="1199.951" Y="-1479.347" Z="-7.146417" />

		<PickUp QuestName="Circle the Wagon" QuestId="34779" GiverName="Foreman Zipfizzle" GiverId="81912" X="1199.951" Y="-1479.347" Z="-7.146417" />
		<While Condition="DoQuest(34779)" >
			<Code File="KillUntilComplete" MobId="81906" QuestId="34779" QuestObjectiveIndex="2" X="1391.073" Y="-1166.986" Z="-13.03213" />
			<Code File="EscortGroup" QuestId="34779" EscortCompleteWhen="DestinationReached" EscortCountMax="5" EscortNpcId="81850" EscortMaxFollowDistance="8" EscortMaxFightDistance="10" SearchForNpcsRadius="65" EscortCompleteX="1194.855" EscortCompleteY="-1467.868" EscortCompleteZ="-9.412585" >
				<SearchPath>
					<Hotspot X="1385.573" Y="-1167.992" Z="-12.85547" />
					<Hotspot X="1391.1" Y="-1169.28" Z="-12.97862" />
					<Hotspot X="1308.933" Y="-1247.476" Z="-16.03462" />
					<Hotspot X="1227.461" Y="-1334.598" Z="-8.964642" />
					<Hotspot X="1194.855" Y="-1467.868" Z="-9.412585" />
				</SearchPath>
			</Code>
		</While>
		<TurnIn QuestName="Circle the Wagon" QuestId="34779" TurnInName="Exarch Akama" TurnInId="80078" X="1193.431" Y="-1477.169" Z="-7.297888" />

		<PickUp QuestName="Invisible Ramparts" QuestId="34780" GiverName="Exarch Hataaru" GiverId="80075" X="1203.148" Y="-1496.384" Z="-5.43911" />
		<While Condition="DoQuest(34780)" >
			<Code File="InteractWith" MobId="230856" NonCompeteDistance="0" QuestId="34780" X="1133.235" Y="-1536.701" Z="-5.831403" TerminateWhen="Me.HasAura(161644)" />
			<Code File="InteractWith" MobId="80149" Range="2" NonCompeteDistance="0" QuestId="34780" QuestObjectiveIndex="3" X="1167.606" Y="-1495.588" Z="-5.428709" TerminateWhen="!Me.HasAura(161644)" />
			<Code File="InteractWith" MobId="80149" Range="2" NonCompeteDistance="0" QuestId="34780" QuestObjectiveIndex="2" X="1181.816" Y="-1525.031" Z="-5.428925" TerminateWhen="!Me.HasAura(161644)" />
			<Code File="InteractWith" MobId="80086" Range="2" NonCompeteDistance="0" QuestId="34780" QuestObjectiveIndex="1" X="1197.716" Y="-1498.676" Z="-5.428455" TerminateWhen="!Me.HasAura(161644)" />
		</While>
		<TurnIn QuestName="Invisible Ramparts" QuestId="34780" TurnInName="Defense Pylon Central Control Console" TurnInId="230933" X="1110.97" Y="-1546.179" Z="-5.228079" />

		<PickUp QuestName="Defenstrations" QuestId="34781" GiverName="Defense Pylon Central Control Console" GiverId="230933" X="1110.97" Y="-1546.179" Z="-5.228079" />
		<Code File="KillUntilComplete" MobId="82111" QuestId="34781" >
			<HuntingGrounds>
				<Hotspot X="1119.279" Y="-1496.076" Z="-5.198408" />
				<Hotspot X="1183.547" Y="-1407.281" Z="-13.79228" />
				<Hotspot X="1133.521" Y="-1406.159" Z="-14.45606" />
			</HuntingGrounds>
		</Code>
		<TurnIn QuestName="Defenstrations" QuestId="34781" TurnInName="Defense Pylon Central Control Console" TurnInId="230933" X="1110.63" Y="-1547.007" Z="-5.227992" />

		<PickUp QuestName="The Exarch Council" QuestId="34782" GiverName="Vindicator Maraad" GiverId="82348" X="1210.63" Y="-1495.129" Z="-4.797555" />
		<TurnIn QuestName="The Exarch Council" QuestId="34782" TurnInName="Exarch Othaar" TurnInId="80076" X="1473.834" Y="-1703.853" Z="41.11523" />
		<PickUp QuestName="Naielle, The Rangari" QuestId="34783" GiverName="Exarch Othaar" GiverId="80076" X="1473.834" Y="-1703.853" Z="41.11523" />
		<PickUp QuestName="Hataaru, the Artificer" QuestId="34785" GiverName="Exarch Othaar" GiverId="80076" X="1473.834" Y="-1703.853" Z="41.11523" />
		<TurnIn QuestName="Hataaru, the Artificer" QuestId="34785" TurnInName="Exarch Hataaru" TurnInId="80075" X="1336.706" Y="-1876.145" Z="27.37453" />
		<PickUp QuestName="Shut &apos;er Down" QuestId="35070" GiverName="Exarch Hataaru" GiverId="80075" X="1336.706" Y="-1876.145" Z="27.37453" />
		<PickUp QuestName="Engorged Goren" QuestId="34786" GiverName="Apprentice Artificer Andren" GiverId="81140" X="1358.555" Y="-1874.292" Z="27.44447" />

		<While Condition="DoQuest(34786, 35070)" >
			<If Condition="!Me.IsIndoors" >
				<MoveTo X="1383.295" Y="-1873.414" Z="29.21003" />
			</If>
			<Code File="InteractWith" MobId="231657" NonCompeteDistance="0" PreInteractMountStrategy="Dismount" InteractBlacklistTimeInSeconds="1" MovementBy="NavigatorOnly" QuestId="35070" QuestObjectiveIndex="1" X="1487.093" Y="-2048.966" Z="8.329079" />
				<Code File="KillUntilComplete" MobIds="81156, 81157" QuestId="34786" >
				<HuntingGrounds>
					<Hotspot X="1473.184" Y="-2011.592" Z="2.471963" />
					<Hotspot X="1469.533" Y="-1906.264" Z="-3.221392" />
					<Hotspot X="1527.904" Y="-1937.542" Z="3.437305" />
				</HuntingGrounds>
			</Code>
		</While>

		<TurnIn QuestName="Engorged Goren" QuestId="34786" TurnInName="Apprentice Artificer Andren" TurnInId="81140" X="1359.832" Y="-1872.293" Z="27.43034" />
		<TurnIn QuestName="Shut &apos;er Down" QuestId="35070" TurnInName="Exarch Hataaru" TurnInId="80075" X="1338.289" Y="-1876.164" Z="27.36387" />
		<PickUp QuestName="The Big Haul" QuestId="33084" GiverName="Traevar Gunnermark" GiverId="74233" X="1017.574" Y="-1918.057" Z="0.4498203" />

		<CustomBehavior File="KillUntilComplete" MobIds="87698, 87699, 87700" QuestId="33084" >
			<HuntingGrounds >
				<Hotspot X="1209.273" Y="-2030.983" Z="16.22219" />
				<Hotspot X="1081.957" Y="-2060.494" Z="16.04901" />
				<Hotspot X="1078.166" Y="-1948.87" Z="3.683348" />
				<Hotspot X="1161.93" Y="-1947.527" Z="15.78868" />
				<Hotspot X="1030.195" Y="-1839.292" Z="1.179273" />
				<Hotspot X="1088.651" Y="-1744.547" Z="10.47632" />
				<Hotspot X="1149.227" Y="-1690.853" Z="16.87493" />
				<Hotspot X="1097.235" Y="-1616.441" Z="2.837193" />
				<Hotspot X="986.9693" Y="-1553.027" Z="-5.681083" />
				<Hotspot X="880.5822" Y="-1547.989" Z="5.528929" />
				<Hotspot X="931.2725" Y="-1632.799" Z="0.1003789" />
				<Hotspot X="842.7148" Y="-1658.454" Z="9.133578" />
				<Hotspot X="759.5899" Y="-1785.814" Z="18.72637" />
			</HuntingGrounds>
		</CustomBehavior>

		<CustomBehavior File="KillUntilComplete" TerminateWhen="QuestFlaggedCompleted(34496)" >
			<HuntingGrounds >
				<Hotspot X="1182.806" Y="-1734.944" Z="23.6609" />
				<Hotspot X="1230.788" Y="-1852.281" Z="31.54876" />
				<Hotspot X="1272.848" Y="-1979.138" Z="37.54411" />
				<Hotspot X="1287.9" Y="-2068.656" Z="18.11333" />
				<Hotspot X="1155.162" Y="-2098.14" Z="14.17126" />
				<Hotspot X="1006.007" Y="-2039.844" Z="29.26867" />
				<Hotspot X="920.0167" Y="-1988.103" Z="29.81363" />
				<Hotspot X="816.1621" Y="-1923.818" Z="25.37957" />
			</HuntingGrounds>
			<PursuitList>
				<PursueUnit Id="75483" PursueWhen="IsObjectiveComplete(1, 34496) ? false : !QuestFlaggedCompleted(34496)" />
				<PursueUnit Id="82354" PursueWhen="IsObjectiveComplete(2, 34496) ? false : !QuestFlaggedCompleted(34496)" />
			</PursuitList>
		</CustomBehavior>












































































	</QuestOrder>
</HBProfile>