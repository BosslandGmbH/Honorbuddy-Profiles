<HBProfile xsi:noNamespaceSchemaLocation="../Schemas/EchoSchema.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<!-- Original contribution by EchoTiger -->
	<Name>Orc Starter ($Rev: 6041 $)</Name>

	<MinDurability>0.3</MinDurability>
	<MinFreeBagSlots>3</MinFreeBagSlots>

	<SellGrey>true</SellGrey>
	<SellWhite>true</SellWhite>
	<SellGreen>true</SellGreen>
	<SellBlue>true</SellBlue>
	<SellPurple>false</SellPurple>

	<MailGrey>false</MailGrey>
	<MailWhite>true</MailWhite>
	<MailGreen>true</MailGreen>
	<MailBlue>true</MailBlue>
	<MailPurple>true</MailPurple>

	<TargetElites>true</TargetElites>

	<AvoidMobs>
	</AvoidMobs>

	<Mailboxes>
	</Mailboxes>

	<Vendors>
	</Vendors>

	<Blackspots>
	</Blackspots>

	<Blacklist>
	</Blacklist>

	<!-- INITORDER COMMENT 
	<InitOrder>
		Perhaps add detection for loading the class hall if player hasn't unlocked this zone yet.
		<CustomBehavior File="Misc\RunLua" Lua="SetCVar('AutoLootDefault', 1)" />

		<CustomBehavior File="EnablePlugin" Names="Anti Drown" />
		<CustomBehavior File="EnablePlugin" Names="Refreshment Detection" />

		<CustomBehavior File="Misc\ProfileCompatibilityInfo" AllowBrokenAddOns="true" AllowBrokenPlugIns="true" />

		<LootMobs Value="true" />
		<TargetingDistance Value="45" /> Use LevelBot default
	</InitOrder>
END INITORDER COMMENT -->

	<QuestOrder IgnoreCheckpoints="false" ContinuallySkipToCheckpoints="true" >
		<If Condition="Me.IsAlliance" >
			<CustomBehavior File="LoadProfile" ProfileName="..\..\Alliance\1-58 Autoloader.xml" RememberProfile="true" />
		</If>
		<!-- RunCode Methods -->
			<CustomBehavior File="RunCode" Type="Definition">
			<![CDATA[
				public __CompiledBatchClass__()
				{
					Bots.Professionbuddy.PBLog.Log(System.Windows.Media.Colors.MediumPurple, "> [Profile Initialization Status] ", System.Windows.Media.Colors.CornflowerBlue, "\n     Auto-Looting	:: Enabled\n     Looting	:: Enabled\n     Game Addons	:: Disabled");
					Lua.DoString("SetCVar('AutoLootDefault', 1);");
					CharacterSettings.Instance.LootMobs = true;
					CharacterSettings.Instance.Save();
					Lua.DoString("for i=1,GetNumAddOns() do DisableAddOn(i) end ReloadUI();");
					Logging.Write(System.Windows.Media.Colors.MediumPurple, "> [Ready to bot!]");
				}
			]]>
			</CustomBehavior>
			<CustomBehavior File="RunCode" Type="Definition">
				<![CDATA[
						bool DoQuest(params uint[] questIds)
						{
							foreach (var questId in questIds)
							{
								if (HasQuest(questId) && !IsQuestCompleted(questId)) return true;
							}
							return false;
						}
						bool NeedsQuest(params uint[] questIds)
						{
							foreach (var questId in questIds)
							{
								if (!HasQuest(questId) && !IsQuestCompleted(questId)) return true;
							}
							return false;
						}
						bool NeedsBreadcrumbQuest(params uint[] questIds)
						{
							foreach (var questId in questIds)
							{
								if (IsQuestCompleted(questId)) return false;
							}
							return true;
						}
						bool QuestDone(params uint[] questIds)
						{
							foreach (var questId in questIds)
							{
								if (HasQuest(questId) && IsQuestCompleted(questId)) return true;
							}
							return false;
						}
						bool QuestFlaggedCompleted(params uint[] questIds)
						{
							foreach (var questId in questIds)
							{
								return Lua.GetReturnVal<bool>($"return IsQuestFlaggedCompleted({questId});", 0);
							}
							return false;
						}
						async Task SkipCutscene(int preWait = 3000, int postWait = 3000)
						{
					// Add detection of cutscene here.
							await Coroutine.Sleep(preWait);
					// Test and improve the working method.
							Lua.DoString("MovieFrame:StopMovie(); CinematicFrame_CancelCinematic(); StopCinematic();");
							await Coroutine.Sleep(postWait);
						}
					]]>
			</CustomBehavior>
		<!-- END RunCode Methods -->

		<!-- Hooks -->
			<CustomBehavior File="RunCode" Type="Definition">
				<![CDATA[ 
					IEnumerable<WoWItem> GetExtraConsumables()
					{
						uint foodCount = 0;
						uint drinkCount = 0;
						// Skip conjured and buff comsumables.
				
						var extraConsumables = (from item in Me.BagItems
										   where item != null && item.ItemInfo != null
										   let isFood = Consumable.IsFood(item.ItemInfo)
										   let isDrink = Consumable.IsDrink(item.ItemInfo)
										   where (isFood || isDrink) && item.ItemInfo.SellPrice > 0 && item.Effects.Count == 1 && item.ItemInfo.RequiredLevel < Me.Level - 10                    
										   select item).ToList();
				
				
						var extraPotions = Me.BagItems
							.Where(c => c != null && c.IsValid && c.ItemInfo != null && c.ItemInfo.SellPrice > 0 && c.Effects.Count == 1
								&& (c.ItemInfo.ConsumableClass == WoWItemConsumableClass.Potion
								|| c.ItemInfo.ConsumableClass == WoWItemConsumableClass.Elixir
								|| c.ItemInfo.ConsumableClass == WoWItemConsumableClass.Flask)
								&& c.ItemInfo.RequiredLevel < Me.Level - 20);
				
						extraConsumables.AddRange(extraPotions);
						return extraConsumables;
					}
					 
					async Task SellExtraConsumables()
					{
						Logging.Write("Selling items in GetExtraConsumables()");
						foreach (var item in GetExtraConsumables())
						{
							Logging.Write("Selling {0}.", item.Name);
							item.UseContainerItem();
							await Coroutine.Sleep(1337);
						}
					}
				]]>
			</CustomBehavior>
			<CustomBehavior File="Hooks\DoWhen" AllowExecutionWhileNotAlive="false"  AllowUseWhileMounted="true" ActivityName="SellExtraConsumables" UseWhen="MerchantFrame.Instance.IsVisible &amp;&amp; GetExtraConsumables().Any()" >
				<CustomBehavior File="RunCode" Code="await SellExtraConsumables();"/>
			</CustomBehavior>
		<!-- END Hooks -->

		<PickUp QuestName="Your Place In The World" QuestId="25152" GiverName="Kaltunk" GiverId="10176" X="-618.518" Y="-4251.67" Z="38.718" />
		<TurnIn QuestName="Your Place In The World" QuestId="25152" TurnInName="Gornek" TurnInId="3143" X="-601.4888" Y="-4246.486" Z="38.95587" />

		<PickUp QuestName="Cutting Teeth" QuestId="25126" GiverName="Gornek" GiverId="3143" X="-601.4888" Y="-4246.486" Z="38.95587" />
		<While Condition="DoQuest(25126)" >
			<DisableBehavior Name="Loot" />
			<CustomBehavior File="KillUntilComplete" MobId="3098" QuestId="25126" X="-492.3602" Y="-4343.501" Z="38.99313" />
			<EnableBehavior Name="Loot" />
		</While>
		<TurnIn QuestName="Cutting Teeth" QuestId="25126" TurnInName="Gornek" TurnInId="3143" X="-595.0386" Y="-4249.554" Z="38.95654" />

		<PickUp QuestName="Invaders in Our Home" QuestId="25172" GiverName="Gornek" GiverId="3143" X="-595.0386" Y="-4249.554" Z="38.95654" />
		<While Condition="DoQuest(25172)" >
			<DisableBehavior Name="Loot" />
			<CustomBehavior File="KillUntilComplete" MobId="39317" QuestId="25172" >
				<HuntingGrounds>
					<Hotspot X="-697.0238" Y="-4266.36" Z="38.58712" />
					<Hotspot X="-727.9263" Y="-4182.924" Z="30.08645" />
				</HuntingGrounds>
			</CustomBehavior>
			<EnableBehavior Name="Loot" />
		</While>
		<TurnIn QuestName="Invaders in Our Home" QuestId="25172" TurnInName="Gornek" TurnInId="3143" X="-596.3851" Y="-4250.415" Z="38.95618" />

		<PickUp QuestName="Sting of the Scorpid" QuestId="25127" GiverName="Gornek" GiverId="3143" X="-596.3851" Y="-4250.415" Z="38.95618" />
		<PickUp QuestName="Galgar&apos;s Cactus Apple Surprise" QuestId="25136" GiverName="Galgar" GiverId="9796" X="-563.7537" Y="-4223.57" Z="41.59048" />

		<CustomBehavior File="InteractWith" MobId="171938" CollectionDistance="200" InteractByLooting="true" PreInteractMountStrategy="Dismount" QuestId="25136" QuestObjectiveIndex="1" >
			<HuntingGrounds>
				<Hotspot X="-395.2452" Y="-4270.956" Z="50.2653" />
				<Hotspot X="-404.6069" Y="-4165.924" Z="51.36276" />
				<Hotspot X="-291.4646" Y="-4182.903" Z="52.63857" />
			</HuntingGrounds>
		</CustomBehavior>

		<CustomBehavior File="KillUntilComplete" MobId="3124" QuestId="25127" >
			<HuntingGrounds>
				<Hotspot X="-395.2452" Y="-4270.956" Z="50.2653" />
				<Hotspot X="-404.6069" Y="-4165.924" Z="51.36276" />
				<Hotspot X="-291.4646" Y="-4182.903" Z="52.63857" />
			</HuntingGrounds>
		</CustomBehavior>

		<PickUp QuestName="Sarkoth" QuestId="25129" GiverName="Hana&apos;zua" GiverId="3287" X="-397.6655" Y="-4111.908" Z="50.17544" />
		<CustomBehavior File="KillUntilComplete" MobId="3281" QuestId="25129" X="-555.134" Y="-4105.038" Z="71.25594" />
		<TurnIn QuestName="Sarkoth" QuestId="25129" TurnInName="Hana&apos;zua" TurnInId="3287" X="-401.0444" Y="-4111.048" Z="50.13127" />

		<PickUp QuestName="Back to the Den" QuestId="25130" GiverName="Hana&apos;zua" GiverId="3287" X="-401.0444" Y="-4111.048" Z="50.13127" />
		<If Condition="QuestDone(25130) &amp;&amp; Me.HearthstoneAreaId == 363 &amp;&amp; Unit(3287) != null" >
			<CustomBehavior File="UseHearthstone" WaitForCds="false" />
		</If>

		<TurnIn QuestName="Sting of the Scorpid" QuestId="25127" TurnInName="Gornek" TurnInId="3143" X="-600.4946" Y="-4246.126" Z="38.95629" />
		<TurnIn QuestName="Back to the Den" QuestId="25130" TurnInName="Gornek" TurnInId="3143" X="-600.4946" Y="-4246.126" Z="38.95629" />
		<PickUp QuestName="Hana&apos;zua" QuestId="25128" GiverName="Canaga Earthcaller" GiverId="5887" X="-626.7706" Y="-4207.086" Z="38.13482" />
		<TurnIn QuestName="Galgar&apos;s Cactus Apple Surprise" QuestId="25136" TurnInName="Galgar" TurnInId="9796" X="-565.1686" Y="-4224.509" Z="41.43152" />
		<PickUp QuestName="Vile Familiars" QuestId="25131" GiverName="Zureetha Fargaze" GiverId="3145" X="-574.2421" Y="-4259.012" Z="37.9632" />
		<PickUp QuestName="Lazy Peons" QuestId="37446" GiverName="Foreman Thazz&apos;ril" GiverId="11378" X="-572.3614" Y="-4263.845" Z="38.06332" />

		<CustomBehavior File="InteractWith" MobId="10556" AuraIdOnMob="17743" Range="2" CollectionDistance="200" InteractByUsingItemId="16114" InteractBlacklistTimeInSeconds="1" QuestId="37446" QuestObjectiveIndex="1" >
			<HuntingGrounds>
				<Hotspot X="-640.2183" Y="-4348.577" Z="42.71794" />
				<Hotspot X="-508.4733" Y="-4383.482" Z="46.54433" />
				<Hotspot X="-339.9293" Y="-4421.483" Z="52.76396" />
			</HuntingGrounds>
		</CustomBehavior>

		<CustomBehavior File="KillUntilComplete" MobId="3101" QuestId="25131" >
			<HuntingGrounds>
				<Hotspot X="-286.8987" Y="-4388.662" Z="57.47244" />
				<Hotspot X="-206.8877" Y="-4300.415" Z="63.70576" />
			</HuntingGrounds>
		</CustomBehavior>

		<TurnIn QuestName="Hana&apos;zua" QuestId="25128" TurnInName="Hana&apos;zua" TurnInId="3287" X="-398.0338" Y="-4113.111" Z="50.1658" />
		<TurnIn QuestName="Lazy Peons" QuestId="37446" TurnInName="Foreman Thazz&apos;ril" TurnInId="11378" X="-570.3971" Y="-4268.388" Z="37.96813" />
		<TurnIn QuestName="Vile Familiars" QuestId="25131" TurnInName="Zureetha Fargaze" TurnInId="3145" X="-571.2792" Y="-4263.039" Z="38.17424" />
		<PickUp QuestName="Burning Blade Medallion" QuestId="25132" GiverName="Zureetha Fargaze" GiverId="3145" X="-571.2792" Y="-4263.039" Z="38.17424" />
		<PickUp QuestName="Thazz&apos;ril&apos;s Pick" QuestId="25135" GiverName="Foreman Thazz&apos;ril" GiverId="11378" X="-571.3143" Y="-4264.124" Z="38.11153" />

		<CustomBehavior File="InteractWith" MobId="178087" NonCompeteDistance="0" InteractByLooting="true" InteractBlacklistTimeInSeconds="1" QuestId="25135" QuestObjectiveIndex="1" X="-88.34402" Y="-4277.792" Z="64.601" />

		<CustomBehavior File="KillUntilComplete" QuestId="25132" >
			<HuntingGrounds>
				<Hotspot X="-98.70916" Y="-4293.755" Z="60.9591" />
				<Hotspot X="-85.67622" Y="-4209.158" Z="49.94697" />
			</HuntingGrounds>
			<PursuitList>
				<PursueUnit Id="3102" PursueWhen="!IsObjectiveComplete(1, 25132)" />
				<PursueUnit Id="3183" Priority="10" PursueWhen="!IsObjectiveComplete(2, 25132)" />
			</PursuitList>
		</CustomBehavior>

		<TurnIn QuestName="Thazz&apos;ril&apos;s Pick" QuestId="25135" TurnInName="Foreman Thazz&apos;ril" TurnInId="11378" X="-567.558" Y="-4266.502" Z="38.6017" />
		<TurnIn QuestName="Burning Blade Medallion" QuestId="25132" TurnInName="Zureetha Fargaze" TurnInId="3145" X="-569.9094" Y="-4262.885" Z="38.48481" />

		<PickUp QuestName="Report to Sen&apos;jin Village" QuestId="25133" GiverName="Zureetha Fargaze" GiverId="3145" X="-569.9094" Y="-4262.885" Z="38.48481" />

		<Checkpoint Level="5.5" /> <!-- Would be 5, but we don't want to level up inside of the cave and not turn in quests -->

		<CustomBehavior File="LoadProfile" ProfileName="..\Kalimdor\Durotar.xml" RememberProfile="true" />


	</QuestOrder>

</HBProfile>